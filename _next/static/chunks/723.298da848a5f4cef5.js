(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{56867:function(i,r,c){"use strict";r.Xx=r._w=r.aP=r.KS=r.jQ=void 0,c(69790);let l=c(61910);function gf(i){let r=new Float64Array(16);if(i)for(let c=0;c<i.length;c++)r[c]=i[c];return r}c(62942),r.jQ=64,r.KS=64,r.aP=32;let S=new Uint8Array(32);S[0]=9;let P=gf(),C=gf([1]),R=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),q=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),U=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(i,r){for(let c=0;c<16;c++)i[c]=0|r[c]}function car25519(i){let r=1;for(let c=0;c<16;c++){let l=i[c]+r+65535;r=Math.floor(l/65536),i[c]=l-65536*r}i[0]+=r-1+37*(r-1)}function sel25519(i,r,c){let l=~(c-1);for(let c=0;c<16;c++){let S=l&(i[c]^r[c]);i[c]^=S,r[c]^=S}}function pack25519(i,r){let c=gf(),l=gf();for(let i=0;i<16;i++)l[i]=r[i];car25519(l),car25519(l),car25519(l);for(let i=0;i<2;i++){c[0]=l[0]-65517;for(let i=1;i<15;i++)c[i]=l[i]-65535-(c[i-1]>>16&1),c[i-1]&=65535;c[15]=l[15]-32767-(c[14]>>16&1);let i=c[15]>>16&1;c[14]&=65535,sel25519(l,c,1-i)}for(let r=0;r<16;r++)i[2*r]=255&l[r],i[2*r+1]=l[r]>>8}function verify32(i,r){let c=0;for(let l=0;l<32;l++)c|=i[l]^r[l];return(1&c-1>>>8)-1}function neq25519(i,r){let c=new Uint8Array(32),l=new Uint8Array(32);return pack25519(c,i),pack25519(l,r),verify32(c,l)}function par25519(i){let r=new Uint8Array(32);return pack25519(r,i),1&r[0]}function unpack25519(i,r){for(let c=0;c<16;c++)i[c]=r[2*c]+(r[2*c+1]<<8);i[15]&=32767}function add(i,r,c){for(let l=0;l<16;l++)i[l]=r[l]+c[l]}function sub(i,r,c){for(let l=0;l<16;l++)i[l]=r[l]-c[l]}function mul(i,r,c){let l,S,P=0,C=0,R=0,A=0,q=0,$=0,U=0,F=0,J=0,Q=0,X=0,ee=0,et=0,eo=0,ep=0,eg=0,ey=0,em=0,e_=0,ew=0,eb=0,eI=0,eE=0,ex=0,eS=0,eP=0,eC=0,eO=0,eR=0,eA=0,eN=0,eL=c[0],ej=c[1],eT=c[2],ez=c[3],eD=c[4],ek=c[5],eM=c[6],eH=c[7],e$=c[8],eU=c[9],eK=c[10],eV=c[11],eB=c[12],eG=c[13],eW=c[14],eZ=c[15];P+=(l=r[0])*eL,C+=l*ej,R+=l*eT,A+=l*ez,q+=l*eD,$+=l*ek,U+=l*eM,F+=l*eH,J+=l*e$,Q+=l*eU,X+=l*eK,ee+=l*eV,et+=l*eB,eo+=l*eG,ep+=l*eW,eg+=l*eZ,C+=(l=r[1])*eL,R+=l*ej,A+=l*eT,q+=l*ez,$+=l*eD,U+=l*ek,F+=l*eM,J+=l*eH,Q+=l*e$,X+=l*eU,ee+=l*eK,et+=l*eV,eo+=l*eB,ep+=l*eG,eg+=l*eW,ey+=l*eZ,R+=(l=r[2])*eL,A+=l*ej,q+=l*eT,$+=l*ez,U+=l*eD,F+=l*ek,J+=l*eM,Q+=l*eH,X+=l*e$,ee+=l*eU,et+=l*eK,eo+=l*eV,ep+=l*eB,eg+=l*eG,ey+=l*eW,em+=l*eZ,A+=(l=r[3])*eL,q+=l*ej,$+=l*eT,U+=l*ez,F+=l*eD,J+=l*ek,Q+=l*eM,X+=l*eH,ee+=l*e$,et+=l*eU,eo+=l*eK,ep+=l*eV,eg+=l*eB,ey+=l*eG,em+=l*eW,e_+=l*eZ,q+=(l=r[4])*eL,$+=l*ej,U+=l*eT,F+=l*ez,J+=l*eD,Q+=l*ek,X+=l*eM,ee+=l*eH,et+=l*e$,eo+=l*eU,ep+=l*eK,eg+=l*eV,ey+=l*eB,em+=l*eG,e_+=l*eW,ew+=l*eZ,$+=(l=r[5])*eL,U+=l*ej,F+=l*eT,J+=l*ez,Q+=l*eD,X+=l*ek,ee+=l*eM,et+=l*eH,eo+=l*e$,ep+=l*eU,eg+=l*eK,ey+=l*eV,em+=l*eB,e_+=l*eG,ew+=l*eW,eb+=l*eZ,U+=(l=r[6])*eL,F+=l*ej,J+=l*eT,Q+=l*ez,X+=l*eD,ee+=l*ek,et+=l*eM,eo+=l*eH,ep+=l*e$,eg+=l*eU,ey+=l*eK,em+=l*eV,e_+=l*eB,ew+=l*eG,eb+=l*eW,eI+=l*eZ,F+=(l=r[7])*eL,J+=l*ej,Q+=l*eT,X+=l*ez,ee+=l*eD,et+=l*ek,eo+=l*eM,ep+=l*eH,eg+=l*e$,ey+=l*eU,em+=l*eK,e_+=l*eV,ew+=l*eB,eb+=l*eG,eI+=l*eW,eE+=l*eZ,J+=(l=r[8])*eL,Q+=l*ej,X+=l*eT,ee+=l*ez,et+=l*eD,eo+=l*ek,ep+=l*eM,eg+=l*eH,ey+=l*e$,em+=l*eU,e_+=l*eK,ew+=l*eV,eb+=l*eB,eI+=l*eG,eE+=l*eW,ex+=l*eZ,Q+=(l=r[9])*eL,X+=l*ej,ee+=l*eT,et+=l*ez,eo+=l*eD,ep+=l*ek,eg+=l*eM,ey+=l*eH,em+=l*e$,e_+=l*eU,ew+=l*eK,eb+=l*eV,eI+=l*eB,eE+=l*eG,ex+=l*eW,eS+=l*eZ,X+=(l=r[10])*eL,ee+=l*ej,et+=l*eT,eo+=l*ez,ep+=l*eD,eg+=l*ek,ey+=l*eM,em+=l*eH,e_+=l*e$,ew+=l*eU,eb+=l*eK,eI+=l*eV,eE+=l*eB,ex+=l*eG,eS+=l*eW,eP+=l*eZ,ee+=(l=r[11])*eL,et+=l*ej,eo+=l*eT,ep+=l*ez,eg+=l*eD,ey+=l*ek,em+=l*eM,e_+=l*eH,ew+=l*e$,eb+=l*eU,eI+=l*eK,eE+=l*eV,ex+=l*eB,eS+=l*eG,eP+=l*eW,eC+=l*eZ,et+=(l=r[12])*eL,eo+=l*ej,ep+=l*eT,eg+=l*ez,ey+=l*eD,em+=l*ek,e_+=l*eM,ew+=l*eH,eb+=l*e$,eI+=l*eU,eE+=l*eK,ex+=l*eV,eS+=l*eB,eP+=l*eG,eC+=l*eW,eO+=l*eZ,eo+=(l=r[13])*eL,ep+=l*ej,eg+=l*eT,ey+=l*ez,em+=l*eD,e_+=l*ek,ew+=l*eM,eb+=l*eH,eI+=l*e$,eE+=l*eU,ex+=l*eK,eS+=l*eV,eP+=l*eB,eC+=l*eG,eO+=l*eW,eR+=l*eZ,ep+=(l=r[14])*eL,eg+=l*ej,ey+=l*eT,em+=l*ez,e_+=l*eD,ew+=l*ek,eb+=l*eM,eI+=l*eH,eE+=l*e$,ex+=l*eU,eS+=l*eK,eP+=l*eV,eC+=l*eB,eO+=l*eG,eR+=l*eW,eA+=l*eZ,eg+=(l=r[15])*eL,ey+=l*ej,em+=l*eT,e_+=l*ez,ew+=l*eD,eb+=l*ek,eI+=l*eM,eE+=l*eH,ex+=l*e$,eS+=l*eU,eP+=l*eK,eC+=l*eV,eO+=l*eB,eR+=l*eG,eA+=l*eW,eN+=l*eZ,P+=38*ey,C+=38*em,R+=38*e_,A+=38*ew,q+=38*eb,$+=38*eI,U+=38*eE,F+=38*ex,J+=38*eS,Q+=38*eP,X+=38*eC,ee+=38*eO,et+=38*eR,eo+=38*eA,ep+=38*eN,S=Math.floor((l=P+(S=1)+65535)/65536),P=l-65536*S,S=Math.floor((l=C+S+65535)/65536),C=l-65536*S,S=Math.floor((l=R+S+65535)/65536),R=l-65536*S,S=Math.floor((l=A+S+65535)/65536),A=l-65536*S,S=Math.floor((l=q+S+65535)/65536),q=l-65536*S,S=Math.floor((l=$+S+65535)/65536),$=l-65536*S,S=Math.floor((l=U+S+65535)/65536),U=l-65536*S,S=Math.floor((l=F+S+65535)/65536),F=l-65536*S,S=Math.floor((l=J+S+65535)/65536),J=l-65536*S,S=Math.floor((l=Q+S+65535)/65536),Q=l-65536*S,S=Math.floor((l=X+S+65535)/65536),X=l-65536*S,S=Math.floor((l=ee+S+65535)/65536),ee=l-65536*S,S=Math.floor((l=et+S+65535)/65536),et=l-65536*S,S=Math.floor((l=eo+S+65535)/65536),eo=l-65536*S,S=Math.floor((l=ep+S+65535)/65536),ep=l-65536*S,S=Math.floor((l=eg+S+65535)/65536),eg=l-65536*S,P+=S-1+37*(S-1),S=Math.floor((l=P+(S=1)+65535)/65536),P=l-65536*S,S=Math.floor((l=C+S+65535)/65536),C=l-65536*S,S=Math.floor((l=R+S+65535)/65536),R=l-65536*S,S=Math.floor((l=A+S+65535)/65536),A=l-65536*S,S=Math.floor((l=q+S+65535)/65536),q=l-65536*S,S=Math.floor((l=$+S+65535)/65536),$=l-65536*S,S=Math.floor((l=U+S+65535)/65536),U=l-65536*S,S=Math.floor((l=F+S+65535)/65536),F=l-65536*S,S=Math.floor((l=J+S+65535)/65536),J=l-65536*S,S=Math.floor((l=Q+S+65535)/65536),Q=l-65536*S,S=Math.floor((l=X+S+65535)/65536),X=l-65536*S,S=Math.floor((l=ee+S+65535)/65536),ee=l-65536*S,S=Math.floor((l=et+S+65535)/65536),et=l-65536*S,S=Math.floor((l=eo+S+65535)/65536),eo=l-65536*S,S=Math.floor((l=ep+S+65535)/65536),ep=l-65536*S,S=Math.floor((l=eg+S+65535)/65536),eg=l-65536*S,P+=S-1+37*(S-1),i[0]=P,i[1]=C,i[2]=R,i[3]=A,i[4]=q,i[5]=$,i[6]=U,i[7]=F,i[8]=J,i[9]=Q,i[10]=X,i[11]=ee,i[12]=et,i[13]=eo,i[14]=ep,i[15]=eg}function inv25519(i,r){let c;let l=gf();for(c=0;c<16;c++)l[c]=r[c];for(c=253;c>=0;c--)mul(l,l,l),2!==c&&4!==c&&mul(l,l,r);for(c=0;c<16;c++)i[c]=l[c]}function pow2523(i,r){let c;let l=gf();for(c=0;c<16;c++)l[c]=r[c];for(c=250;c>=0;c--)mul(l,l,l),1!==c&&mul(l,l,r);for(c=0;c<16;c++)i[c]=l[c]}function edadd(i,r){let c=gf(),l=gf(),S=gf(),P=gf(),C=gf(),R=gf(),q=gf(),$=gf(),U=gf();sub(c,i[1],i[0]),sub(U,r[1],r[0]),mul(c,c,U),add(l,i[0],i[1]),add(U,r[0],r[1]),mul(l,l,U),mul(S,i[3],r[3]),mul(S,S,A),mul(P,i[2],r[2]),add(P,P,P),sub(C,l,c),sub(R,P,S),add(q,P,S),add($,l,c),mul(i[0],C,R),mul(i[1],$,q),mul(i[2],q,R),mul(i[3],C,$)}function cswap(i,r,c){for(let l=0;l<4;l++)sel25519(i[l],r[l],c)}function pack(i,r){let c=gf(),l=gf(),S=gf();inv25519(S,r[2]),mul(c,r[0],S),mul(l,r[1],S),pack25519(i,l),i[31]^=par25519(c)<<7}function scalarmult(i,r,c){set25519(i[0],P),set25519(i[1],C),set25519(i[2],C),set25519(i[3],P);for(let l=255;l>=0;--l){let S=c[l/8|0]>>(7&l)&1;cswap(i,r,S),edadd(r,i),edadd(i,i),cswap(i,r,S)}}function scalarbase(i,r){let c=[gf(),gf(),gf(),gf()];set25519(c[0],q),set25519(c[1],$),set25519(c[2],C),mul(c[3],q,$),scalarmult(i,c,r)}function generateKeyPairFromSeed(i){if(i.length!==r.aP)throw Error(`ed25519: seed must be ${r.aP} bytes`);let c=(0,l.hash)(i);c[0]&=248,c[31]&=127,c[31]|=64;let S=new Uint8Array(32),P=[gf(),gf(),gf(),gf()];scalarbase(P,c),pack(S,P);let C=new Uint8Array(64);return C.set(i),C.set(S,32),{publicKey:S,secretKey:C}}r._w=generateKeyPairFromSeed;let F=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(i,r){let c,l,S,P;for(l=63;l>=32;--l){for(c=0,S=l-32,P=l-12;S<P;++S)r[S]+=c-16*r[l]*F[S-(l-32)],c=Math.floor((r[S]+128)/256),r[S]-=256*c;r[S]+=c,r[l]=0}for(S=0,c=0;S<32;S++)r[S]+=c-(r[31]>>4)*F[S],c=r[S]>>8,r[S]&=255;for(S=0;S<32;S++)r[S]-=c*F[S];for(l=0;l<32;l++)r[l+1]+=r[l]>>8,i[l]=255&r[l]}function reduce(i){let r=new Float64Array(64);for(let c=0;c<64;c++)r[c]=i[c];for(let r=0;r<64;r++)i[r]=0;modL(i,r)}function sign(i,r){let c=new Float64Array(64),S=[gf(),gf(),gf(),gf()],P=(0,l.hash)(i.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;let C=new Uint8Array(64);C.set(P.subarray(32),32);let R=new l.SHA512;R.update(C.subarray(32)),R.update(r);let A=R.digest();R.clean(),reduce(A),scalarbase(S,A),pack(C,S),R.reset(),R.update(C.subarray(0,32)),R.update(i.subarray(32)),R.update(r);let q=R.digest();reduce(q);for(let i=0;i<32;i++)c[i]=A[i];for(let i=0;i<32;i++)for(let r=0;r<32;r++)c[i+r]+=q[i]*P[r];return modL(C.subarray(32),c),C}r.Xx=sign},61910:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=c(35859),S=c(62942);r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var P=function(){function SHA512(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){S.wipe(this._buffer),S.wipe(this._tempHi),S.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(i,c){if(void 0===c&&(c=i.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var l=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=i[l++],c--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(l=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,i,l,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=i[l++],c--;return this},SHA512.prototype.finish=function(i){if(!this._finished){var r=this._bytesHashed,c=this._bufferLength,S=r%128<112?128:256;this._buffer[c]=128;for(var P=c+1;P<S-8;P++)this._buffer[P]=0;l.writeUint32BE(r/536870912|0,this._buffer,S-8),l.writeUint32BE(r<<3,this._buffer,S-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,S),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)l.writeUint32BE(this._stateHi[P],i,8*P),l.writeUint32BE(this._stateLo[P],i,8*P+4);return this},SHA512.prototype.digest=function(){var i=new Uint8Array(this.digestLength);return this.finish(i),i},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(i){return this._stateHi.set(i.stateHi),this._stateLo.set(i.stateLo),this._bufferLength=i.bufferLength,i.buffer&&this._buffer.set(i.buffer),this._bytesHashed=i.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(i){S.wipe(i.stateHi),S.wipe(i.stateLo),i.buffer&&S.wipe(i.buffer),i.bufferLength=0,i.bytesHashed=0},SHA512}();r.SHA512=P;var C=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(i,r,c,S,P,R,A){for(var q,$,U,F,J,Q,X,ee,et=c[0],eo=c[1],ep=c[2],eg=c[3],ey=c[4],em=c[5],e_=c[6],ew=c[7],eb=S[0],eI=S[1],eE=S[2],ex=S[3],eS=S[4],eP=S[5],eC=S[6],eO=S[7];A>=128;){for(var eR=0;eR<16;eR++){var eA=8*eR+R;i[eR]=l.readUint32BE(P,eA),r[eR]=l.readUint32BE(P,eA+4)}for(var eR=0;eR<80;eR++){var eN=et,eL=eo,ej=ep,eT=eg,ez=ey,eD=em,ek=e_,eM=ew,eH=eb,e$=eI,eU=eE,eK=ex,eV=eS,eB=eP,eG=eC,eW=eO;if(q=ew,J=65535&($=eO),Q=$>>>16,X=65535&q,ee=q>>>16,q=(ey>>>14|eS<<18)^(ey>>>18|eS<<14)^(eS>>>9|ey<<23),J+=65535&($=(eS>>>14|ey<<18)^(eS>>>18|ey<<14)^(ey>>>9|eS<<23)),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=ey&em^~ey&e_,J+=65535&($=eS&eP^~eS&eC),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=C[2*eR],J+=65535&($=C[2*eR+1]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=i[eR%16],J+=65535&($=r[eR%16]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,U=65535&X|ee<<16,F=65535&J|Q<<16,q=U,J=65535&($=F),Q=$>>>16,X=65535&q,ee=q>>>16,q=(et>>>28|eb<<4)^(eb>>>2|et<<30)^(eb>>>7|et<<25),J+=65535&($=(eb>>>28|et<<4)^(et>>>2|eb<<30)^(et>>>7|eb<<25)),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=et&eo^et&ep^eo&ep,J+=65535&($=eb&eI^eb&eE^eI&eE),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,eM=65535&X|ee<<16,eW=65535&J|Q<<16,q=eT,J=65535&($=eK),Q=$>>>16,X=65535&q,ee=q>>>16,q=U,J+=65535&($=F),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,eT=65535&X|ee<<16,eK=65535&J|Q<<16,eo=eN,ep=eL,eg=ej,ey=eT,em=ez,e_=eD,ew=ek,et=eM,eI=eH,eE=e$,ex=eU,eS=eK,eP=eV,eC=eB,eO=eG,eb=eW,eR%16==15)for(var eA=0;eA<16;eA++)q=i[eA],J=65535&($=r[eA]),Q=$>>>16,X=65535&q,ee=q>>>16,q=i[(eA+9)%16],J+=65535&($=r[(eA+9)%16]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=((U=i[(eA+1)%16])>>>1|(F=r[(eA+1)%16])<<31)^(U>>>8|F<<24)^U>>>7,J+=65535&($=(F>>>1|U<<31)^(F>>>8|U<<24)^(F>>>7|U<<25)),Q+=$>>>16,X+=65535&q,ee+=q>>>16,q=((U=i[(eA+14)%16])>>>19|(F=r[(eA+14)%16])<<13)^(F>>>29|U<<3)^U>>>6,J+=65535&($=(F>>>19|U<<13)^(U>>>29|F<<3)^(F>>>6|U<<26)),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,i[eA]=65535&X|ee<<16,r[eA]=65535&J|Q<<16}q=et,J=65535&($=eb),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[0],J+=65535&($=S[0]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[0]=et=65535&X|ee<<16,S[0]=eb=65535&J|Q<<16,q=eo,J=65535&($=eI),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[1],J+=65535&($=S[1]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[1]=eo=65535&X|ee<<16,S[1]=eI=65535&J|Q<<16,q=ep,J=65535&($=eE),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[2],J+=65535&($=S[2]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[2]=ep=65535&X|ee<<16,S[2]=eE=65535&J|Q<<16,q=eg,J=65535&($=ex),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[3],J+=65535&($=S[3]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[3]=eg=65535&X|ee<<16,S[3]=ex=65535&J|Q<<16,q=ey,J=65535&($=eS),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[4],J+=65535&($=S[4]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[4]=ey=65535&X|ee<<16,S[4]=eS=65535&J|Q<<16,q=em,J=65535&($=eP),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[5],J+=65535&($=S[5]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[5]=em=65535&X|ee<<16,S[5]=eP=65535&J|Q<<16,q=e_,J=65535&($=eC),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[6],J+=65535&($=S[6]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[6]=e_=65535&X|ee<<16,S[6]=eC=65535&J|Q<<16,q=ew,J=65535&($=eO),Q=$>>>16,X=65535&q,ee=q>>>16,q=c[7],J+=65535&($=S[7]),Q+=$>>>16,X+=65535&q,ee+=q>>>16,Q+=J>>>16,X+=Q>>>16,ee+=X>>>16,c[7]=ew=65535&X|ee<<16,S[7]=eO=65535&J|Q<<16,R+=128,A-=128}return R}function hash(i){var r=new P;r.update(i);var c=r.digest();return r.clean(),c}r.hash=hash},79820:function(i,r,c){"use strict";let l;c.d(r,{EthereumProvider:function(){return i3}});var S=c(68495),P=c.n(S),C=c(86070);let R=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,A=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,q=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(i,r){if("__proto__"===i||"constructor"===i&&r&&"object"==typeof r&&"prototype"in r){warnKeyDropped(i);return}return r}function warnKeyDropped(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function destr(i,r={}){if("string"!=typeof i)return i;let c=i.trim();if('"'===i[0]&&'"'===i.at(-1)&&!i.includes("\\"))return c.slice(1,-1);if(c.length<=9){let i=c.toLowerCase();if("true"===i)return!0;if("false"===i)return!1;if("undefined"===i)return;if("null"===i)return null;if("nan"===i)return Number.NaN;if("infinity"===i)return Number.POSITIVE_INFINITY;if("-infinity"===i)return Number.NEGATIVE_INFINITY}if(!q.test(i)){if(r.strict)throw SyntaxError("[destr] Invalid JSON");return i}try{if(R.test(i)||A.test(i)){if(r.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(i,jsonParseTransform)}return JSON.parse(i)}catch(c){if(r.strict)throw c;return i}}var $=c(61900).Buffer;function wrapToPromise(i){return i&&"function"==typeof i.then?i:Promise.resolve(i)}function asyncCall(i,...r){try{return wrapToPromise(i(...r))}catch(i){return Promise.reject(i)}}function isPrimitive(i){let r=typeof i;return null===i||"object"!==r&&"function"!==r}function isPureObject(i){let r=Object.getPrototypeOf(i);return!r||r.isPrototypeOf(Object)}function stringify(i){if(isPrimitive(i))return String(i);if(isPureObject(i)||Array.isArray(i))return JSON.stringify(i);if("function"==typeof i.toJSON)return stringify(i.toJSON());throw Error("[unstorage] Cannot stringify value!")}let U="base64:";function serializeRaw(i){if("string"==typeof i)return i;let r=$.from(i).toString("base64");return U+r}function deserializeRaw(i){return"string"==typeof i&&i.startsWith(U)?$.from(i.slice(U.length),"base64"):i}function normalizeKey(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function joinKeys(...i){return normalizeKey(i.join(":"))}function unstorage_8581f561_normalizeBaseKey(i){return(i=normalizeKey(i))?i+":":""}function defineDriver(i){return i}let F=defineDriver(()=>{let i=new Map;return{name:"memory",options:{},hasItem:r=>i.has(r),getItem:r=>i.get(r)??null,getItemRaw:r=>i.get(r)??null,setItem(r,c){i.set(r,c)},setItemRaw(r,c){i.set(r,c)},removeItem(r){i.delete(r)},getKeys:()=>Array.from(i.keys()),clear(){i.clear()},dispose(){i.clear()}}});function createStorage(i={}){let r={mounts:{"":i.driver||F()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=i=>{for(let c of r.mountpoints)if(i.startsWith(c))return{base:c,relativeKey:i.slice(c.length),driver:r.mounts[c]};return{base:"",relativeKey:i,driver:r.mounts[""]}},getMounts=(i,c)=>r.mountpoints.filter(r=>r.startsWith(i)||c&&i.startsWith(r)).map(c=>({relativeBase:i.length>c.length?i.slice(c.length):void 0,mountpoint:c,driver:r.mounts[c]})),onChange=(i,c)=>{if(r.watching)for(let l of(c=normalizeKey(c),r.watchListeners))l(i,c)},startWatch=async()=>{if(!r.watching)for(let i in r.watching=!0,r.mounts)r.unwatch[i]=await watch(r.mounts[i],onChange,i)},stopWatch=async()=>{if(r.watching){for(let i in r.unwatch)await r.unwatch[i]();r.unwatch={},r.watching=!1}},runBatch=(i,r,c)=>{let l=new Map,getBatch=i=>{let r=l.get(i.base);return r||(r={driver:i.driver,base:i.base,items:[]},l.set(i.base,r)),r};for(let c of i){let i="string"==typeof c,l=normalizeKey(i?c:c.key),S=i?void 0:c.value,P=i||!c.options?r:{...r,...c.options},C=getMount(l);getBatch(C).items.push({key:l,value:S,relativeKey:C.relativeKey,options:P})}return Promise.all([...l.values()].map(i=>c(i))).then(i=>i.flat())},c={hasItem(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return asyncCall(l.hasItem,c,r)},getItem(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return asyncCall(l.getItem,c,r).then(i=>destr(i))},getItems:(i,r)=>runBatch(i,r,i=>i.driver.getItems?asyncCall(i.driver.getItems,i.items.map(i=>({key:i.relativeKey,options:i.options})),r).then(r=>r.map(r=>({key:joinKeys(i.base,r.key),value:destr(r.value)}))):Promise.all(i.items.map(r=>asyncCall(i.driver.getItem,r.relativeKey,r.options).then(i=>({key:r.key,value:destr(i)}))))),getItemRaw(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return l.getItemRaw?asyncCall(l.getItemRaw,c,r):asyncCall(l.getItem,c,r).then(i=>deserializeRaw(i))},async setItem(i,r,l={}){if(void 0===r)return c.removeItem(i);i=normalizeKey(i);let{relativeKey:S,driver:P}=getMount(i);P.setItem&&(await asyncCall(P.setItem,S,stringify(r),l),P.watch||onChange("update",i))},async setItems(i,r){await runBatch(i,r,async i=>{i.driver.setItems&&await asyncCall(i.driver.setItems,i.items.map(i=>({key:i.relativeKey,value:stringify(i.value),options:i.options})),r),i.driver.setItem&&await Promise.all(i.items.map(r=>asyncCall(i.driver.setItem,r.relativeKey,stringify(r.value),r.options)))})},async setItemRaw(i,r,l={}){if(void 0===r)return c.removeItem(i,l);i=normalizeKey(i);let{relativeKey:S,driver:P}=getMount(i);if(P.setItemRaw)await asyncCall(P.setItemRaw,S,r,l);else{if(!P.setItem)return;await asyncCall(P.setItem,S,serializeRaw(r),l)}P.watch||onChange("update",i)},async removeItem(i,r={}){"boolean"==typeof r&&(r={removeMeta:r}),i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);l.removeItem&&(await asyncCall(l.removeItem,c,r),(r.removeMeta||r.removeMata)&&await asyncCall(l.removeItem,c+"$",r),l.watch||onChange("remove",i))},async getMeta(i,r={}){"boolean"==typeof r&&(r={nativeOnly:r}),i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i),S=Object.create(null);if(l.getMeta&&Object.assign(S,await asyncCall(l.getMeta,c,r)),!r.nativeOnly){let i=await asyncCall(l.getItem,c+"$",r).then(i=>destr(i));i&&"object"==typeof i&&("string"==typeof i.atime&&(i.atime=new Date(i.atime)),"string"==typeof i.mtime&&(i.mtime=new Date(i.mtime)),Object.assign(S,i))}return S},setMeta(i,r,c={}){return this.setItem(i+"$",r,c)},removeMeta(i,r={}){return this.removeItem(i+"$",r)},async getKeys(i,r={}){i=unstorage_8581f561_normalizeBaseKey(i);let c=getMounts(i,!0),l=[],S=[];for(let i of c){let c=await asyncCall(i.driver.getKeys,i.relativeBase,r),P=c.map(r=>i.mountpoint+normalizeKey(r)).filter(i=>!l.some(r=>i.startsWith(r)));S.push(...P),l=[i.mountpoint,...l.filter(r=>!r.startsWith(i.mountpoint))]}return i?S.filter(r=>r.startsWith(i)&&!r.endsWith("$")):S.filter(i=>!i.endsWith("$"))},async clear(i,r={}){i=unstorage_8581f561_normalizeBaseKey(i),await Promise.all(getMounts(i,!1).map(async i=>{if(i.driver.clear)return asyncCall(i.driver.clear,i.relativeBase,r);if(i.driver.removeItem){let c=await i.driver.getKeys(i.relativeBase||"",r);return Promise.all(c.map(c=>i.driver.removeItem(c,r)))}}))},async dispose(){await Promise.all(Object.values(r.mounts).map(i=>dispose(i)))},watch:async i=>(await startWatch(),r.watchListeners.push(i),async()=>{r.watchListeners=r.watchListeners.filter(r=>r!==i),0===r.watchListeners.length&&await stopWatch()}),async unwatch(){r.watchListeners=[],await stopWatch()},mount(i,l){if((i=unstorage_8581f561_normalizeBaseKey(i))&&r.mounts[i])throw Error(`already mounted at ${i}`);return i&&(r.mountpoints.push(i),r.mountpoints.sort((i,r)=>r.length-i.length)),r.mounts[i]=l,r.watching&&Promise.resolve(watch(l,onChange,i)).then(c=>{r.unwatch[i]=c}).catch(console.error),c},async unmount(i,c=!0){(i=unstorage_8581f561_normalizeBaseKey(i))&&r.mounts[i]&&(r.watching&&i in r.unwatch&&(r.unwatch[i](),delete r.unwatch[i]),c&&await dispose(r.mounts[i]),r.mountpoints=r.mountpoints.filter(r=>r!==i),delete r.mounts[i])},getMount(i=""){i=normalizeKey(i)+":";let r=getMount(i);return{driver:r.driver,base:r.base}},getMounts(i="",r={}){i=normalizeKey(i);let c=getMounts(i,r.parents);return c.map(i=>({driver:i.driver,base:i.mountpoint}))}};return c}function watch(i,r,c){return i.watch?i.watch((i,l)=>r(i,c+l)):()=>{}}async function dispose(i){"function"==typeof i.dispose&&await asyncCall(i.dispose)}function promisifyRequest(i){return new Promise((r,c)=>{i.oncomplete=i.onsuccess=()=>r(i.result),i.onabort=i.onerror=()=>c(i.error)})}function createStore(i,r){let c=indexedDB.open(i);c.onupgradeneeded=()=>c.result.createObjectStore(r);let l=promisifyRequest(c);return(i,c)=>l.then(l=>c(l.transaction(r,i).objectStore(r)))}function defaultGetStore(){return l||(l=createStore("keyval-store","keyval")),l}function get(i,r=defaultGetStore()){return r("readonly",r=>promisifyRequest(r.get(i)))}function set(i,r,c=defaultGetStore()){return c("readwrite",c=>(c.put(r,i),promisifyRequest(c.transaction)))}function del(i,r=defaultGetStore()){return r("readwrite",r=>(r.delete(i),promisifyRequest(r.transaction)))}function clear(i=defaultGetStore()){return i("readwrite",i=>(i.clear(),promisifyRequest(i.transaction)))}function eachCursor(i,r){return i.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},promisifyRequest(i.transaction)}function keys(i=defaultGetStore()){return i("readonly",i=>{if(i.getAllKeys)return promisifyRequest(i.getAllKeys());let r=[];return eachCursor(i,i=>r.push(i.key)).then(()=>r)})}var J=c(74087),z=(i={})=>{let r;let c=i.base&&i.base.length>0?`${i.base}:`:"",e=i=>c+i;return i.dbName&&i.storeName&&(r=createStore(i.dbName,i.storeName)),{name:"idb-keyval",options:i,hasItem:async i=>!(typeof await get(e(i),r)>"u"),getItem:async i=>await get(e(i),r)??null,setItem:(i,c)=>set(e(i),c,r),removeItem:i=>del(e(i),r),getKeys:()=>keys(r),clear:()=>clear(r)}};let _=class _{constructor(){this.indexedDb=createStorage({driver:z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(i=>[i.key,i.value])}async getItem(i){let r=await this.indexedDb.getItem(i);if(null!==r)return r}async setItem(i,r){await this.indexedDb.setItem(i,(0,J.u)(r))}async removeItem(i){await this.indexedDb.removeItem(i)}};var Q="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},X={exports:{}};function k(i){var r;return[i[0],(0,J.D)(null!=(r=i[1])?r:"")]}!function(){let i;function t(){}(i=t).prototype.getItem=function(i){return this.hasOwnProperty(i)?String(this[i]):null},i.prototype.setItem=function(i,r){this[i]=String(r)},i.prototype.removeItem=function(i){delete this[i]},i.prototype.clear=function(){let i=this;Object.keys(i).forEach(function(r){i[r]=void 0,delete i[r]})},i.prototype.key=function(i){return i=i||0,Object.keys(this)[i]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof Q&&Q.localStorage?X.exports=Q.localStorage:"u">typeof window&&window.localStorage?X.exports=window.localStorage:X.exports=new t}();let K=class K{constructor(){this.localStorage=X.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(i){let r=this.localStorage.getItem(i);if(null!==r)return(0,J.D)(r)}async setItem(i,r){this.localStorage.setItem(i,(0,J.u)(r))}async removeItem(i){this.localStorage.removeItem(i)}};let O=async(i,r,c)=>{let l="wc_storage_version",S=await r.getItem(l);if(S&&S>=1){c(r);return}let P=await i.getKeys();if(!P.length){c(r);return}let C=[];for(;P.length;){let c=P.shift();if(!c)continue;let l=c.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){let l=await i.getItem(c);await r.setItem(c,l),C.push(c)}}await r.setItem(l,1),c(r),j(i,C)},j=async(i,r)=>{r.length&&r.forEach(async r=>{await i.removeItem(r)})};let h=class h{constructor(){this.initialized=!1,this.setInitialized=i=>{this.storage=i,this.initialized=!0};let i=new K;this.storage=i;try{let r=new _;O(i,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(i){return await this.initialize(),this.storage.getItem(i)}async setItem(i,r){return await this.initialize(),this.storage.setItem(i,r)}async removeItem(i){return await this.initialize(),this.storage.removeItem(i)}async initialize(){this.initialized||await new Promise(i=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),i())},20)})}};var ee=c(60118),et=c(11121),eo=c(13263);let n=class n extends eo.q{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}};let index_es_h=class index_es_h extends eo.q{constructor(i,r){super(),this.core=i,this.logger=r,this.records=new Map}};let a=class a{constructor(i,r){this.logger=i,this.core=r}};let u=class u extends eo.q{constructor(i,r){super(),this.relayer=i,this.logger=r}};let g=class g extends eo.q{constructor(i){super()}};let p=class p{constructor(i,r,c,l){this.core=i,this.logger=r,this.name=c}};let d=class d extends eo.q{constructor(i,r){super(),this.relayer=i,this.logger=r}};let index_es_E=class index_es_E extends eo.q{constructor(i,r){super(),this.core=i,this.logger=r}};let index_es_y=class index_es_y{constructor(i,r){this.projectId=i,this.logger=r}};let v=class v{constructor(i,r){this.projectId=i,this.logger=r}};let b=class b{constructor(i){this.opts=i,this.protocol="wc",this.version=2}};let w=class w{constructor(i){this.client=i}};var ep=c(56867),eg=c(69790),ey=c(88316);let em="base64url",e_="base58btc";var ew=c(37839),eb=c(12559),eI=c(93089);function encodeJSON(i){return(0,eb.B)((0,eI.m)((0,J.u)(i),"utf8"),em)}function encodeIss(i){let r=(0,eI.m)("K36",e_),c="z"+(0,eb.B)((0,ew.z)([r,i]),e_);return["did","key",c].join(":")}function encodeSig(i){return(0,eb.B)(i,em)}function encodeData(i){return(0,eI.m)([encodeJSON(i.header),encodeJSON(i.payload)].join("."),"utf8")}function encodeJWT(i){return[encodeJSON(i.header),encodeJSON(i.payload),encodeSig(i.signature)].join(".")}function generateKeyPair(i=(0,eg.randomBytes)(32)){return ep._w(i)}async function signJWT(i,r,c,l,S=(0,ey.fromMiliseconds)(Date.now())){let P={alg:"EdDSA",typ:"JWT"},C=encodeIss(l.publicKey),R=S+c,A={iss:C,sub:i,aud:r,iat:S,exp:R},q=encodeData({header:P,payload:A}),$=ep.Xx(l.secretKey,q);return encodeJWT({header:P,payload:A,signature:$})}c(97947);var eE=c(27147),ex=c(87878),eS=c(78102);let index_es_b=()=>"u">typeof WebSocket||"u">typeof c.g&&"u">typeof c.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,index_es_a=i=>i.split("?")[0],eP="u">typeof WebSocket?WebSocket:"u">typeof c.g&&"u">typeof c.g.WebSocket?c.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:c(13361);let f=class f{constructor(i){if(this.url=i,this.events=new S.EventEmitter,this.registering=!1,!(0,eS.isWsUrl)(i))throw Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,r)=>{if(typeof this.socket>"u"){r(Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),i()},this.socket.close()})}async send(i){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,J.u)(i))}catch(r){this.onError(i.id,r)}}register(i=this.url){if(!(0,eS.isWsUrl)(i))throw Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){let i=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=i||this.events.listenerCount("open")>=i)&&this.events.setMaxListeners(i+1),new Promise((i,r)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),r(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return r(Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=i,this.registering=!0,new Promise((r,c)=>{let l=new URLSearchParams(i).get("origin"),S=(0,eS.isReactNative)()?{headers:{origin:l}}:{rejectUnauthorized:!(0,eS.isLocalhostUrl)(i)},P=new eP(i,[],S);index_es_b()?P.onerror=i=>{c(this.emitError(i.error))}:P.on("error",i=>{c(this.emitError(i))}),P.onopen=()=>{this.onOpen(P),r(P)}})}onOpen(i){i.onmessage=i=>this.onPayload(i),i.onclose=i=>this.onClose(i),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;let r="string"==typeof i.data?(0,J.D)(i.data):i.data;this.events.emit("payload",r)}onError(i,r){let c=this.parseError(r),l=c.message||c.toString(),S=(0,eS.formatJsonRpcError)(i,l);this.events.emit("payload",S)}parseError(i,r=this.url){return(0,eS.parseConnectionError)(i,index_es_a(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(i){let r=this.parseError(Error(i?.message||`WebSocket connection failed for host: ${index_es_a(this.url)}`));return this.events.emit("register_error",r),r}};var eC=c(36657),eO=c.n(eC),eR=c(18805),eA=c.n(eR),eN=c(28070),Ji=function(i,r){if(i.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),l=0;l<c.length;l++)c[l]=255;for(var S=0;S<i.length;S++){var P=i.charAt(S),C=P.charCodeAt(0);if(255!==c[C])throw TypeError(P+" is ambiguous");c[C]=S}var R=i.length,A=i.charAt(0),q=Math.log(R)/Math.log(256),$=Math.log(256)/Math.log(R);function y(i){if("string"!=typeof i)throw TypeError("Expected String");if(0===i.length)return new Uint8Array;var r=0;if(" "!==i[0]){for(var l=0,S=0;i[r]===A;)l++,r++;for(var P=(i.length-r)*q+1>>>0,C=new Uint8Array(P);i[r];){var $=c[i.charCodeAt(r)];if(255===$)return;for(var U=0,F=P-1;(0!==$||U<S)&&-1!==F;F--,U++)$+=R*C[F]>>>0,C[F]=$%256>>>0,$=$/256>>>0;if(0!==$)throw Error("Non-zero carry");S=U,r++}if(" "!==i[r]){for(var J=P-S;J!==P&&0===C[J];)J++;for(var Q=new Uint8Array(l+(P-J)),X=l;J!==P;)Q[X++]=C[J++];return Q}}}function M(i){var c=y(i);if(c)return c;throw Error(`Non-${r} character`)}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===r.length)return"";for(var c=0,l=0,S=0,P=r.length;S!==P&&0===r[S];)S++,c++;for(var C=(P-S)*$+1>>>0,q=new Uint8Array(C);S!==P;){for(var U=r[S],F=0,J=C-1;(0!==U||F<l)&&-1!==J;J--,F++)U+=256*q[J]>>>0,q[J]=U%R>>>0,U=U/R>>>0;if(0!==U)throw Error("Non-zero carry");l=F,S++}for(var Q=C-l;Q!==C&&0===q[Q];)Q++;for(var X=A.repeat(c);Q<C;++Q)X+=i.charAt(q[Q]);return X},decodeUnsafe:y,decode:M}};let Ne=i=>{if(i instanceof Uint8Array&&"Uint8Array"===i.constructor.name)return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw Error("Unknown type, must be binary type")},Wi=i=>new TextEncoder().encode(i),Qi=i=>new TextDecoder().decode(i);let Zi=class Zi{constructor(i,r,c){this.name=i,this.prefix=r,this.baseEncode=c}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}};let es=class es{constructor(i,r,c){if(this.name=i,this.prefix=r,void 0===r.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=c}decode(i){if("string"==typeof i){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(i){return Ue(this,i)}};let ts=class ts{constructor(i){this.decoders=i}or(i){return Ue(this,i)}decode(i){let r=i[0],c=this.decoders[r];if(c)return c.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let Ue=(i,r)=>new ts({...i.decoders||{[i.prefix]:i},...r.decoders||{[r.prefix]:r}});let is=class is{constructor(i,r,c,l){this.name=i,this.prefix=r,this.baseEncode=c,this.baseDecode=l,this.encoder=new Zi(i,r,c),this.decoder=new es(i,r,l)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}};let W=({name:i,prefix:r,encode:c,decode:l})=>new is(i,r,c,l),B=({prefix:i,name:r,alphabet:c})=>{let{encode:l,decode:S}=Ji(c,r);return W({prefix:i,name:r,encode:l,decode:i=>Ne(S(i))})},ss=(i,r,c,l)=>{let S={};for(let i=0;i<r.length;++i)S[r[i]]=i;let P=i.length;for(;"="===i[P-1];)--P;let C=new Uint8Array(P*c/8|0),R=0,A=0,q=0;for(let r=0;r<P;++r){let P=S[i[r]];if(void 0===P)throw SyntaxError(`Non-${l} character`);A=A<<c|P,(R+=c)>=8&&(R-=8,C[q++]=255&A>>R)}if(R>=c||255&A<<8-R)throw SyntaxError("Unexpected end of data");return C},rs=(i,r,c)=>{let l="="===r[r.length-1],S=(1<<c)-1,P="",C=0,R=0;for(let l=0;l<i.length;++l)for(R=R<<8|i[l],C+=8;C>c;)C-=c,P+=r[S&R>>C];if(C&&(P+=r[S&R<<c-C]),l)for(;P.length*c&7;)P+="=";return P},index_es_g=({name:i,prefix:r,bitsPerChar:c,alphabet:l})=>W({prefix:r,name:i,encode:i=>rs(i,l,c),decode:r=>ss(r,l,c,i)}),eL=W({prefix:"\x00",name:"identity",encode:i=>Qi(i),decode:i=>Wi(i)});var ej=Object.freeze({__proto__:null,identity:eL});let eT=index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ez=Object.freeze({__proto__:null,base2:eT});let eD=index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ek=Object.freeze({__proto__:null,base8:eD});let eM=B({prefix:"9",name:"base10",alphabet:"0123456789"});var eH=Object.freeze({__proto__:null,base10:eM});let e$=index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eU=index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var eK=Object.freeze({__proto__:null,base16:e$,base16upper:eU});let eV=index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eB=index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eG=index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eW=index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eZ=index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eF=index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eJ=index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eY=index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eQ=index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eX=Object.freeze({__proto__:null,base32:eV,base32upper:eB,base32pad:eG,base32padupper:eW,base32hex:eZ,base32hexupper:eF,base32hexpad:eJ,base32hexpadupper:eY,base32z:eQ});let e0=B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),e1=B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var e5=Object.freeze({__proto__:null,base36:e0,base36upper:e1});let e6=B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),e2=B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var e3=Object.freeze({__proto__:null,base58btc:e6,base58flickr:e2});let e9=index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),e8=index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),e4=index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),e7=index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tn=Object.freeze({__proto__:null,base64:e9,base64pad:e8,base64url:e4,base64urlpad:e7});let ta=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),to=ta.reduce((i,r,c)=>(i[c]=r,i),[]),tp=ta.reduce((i,r,c)=>(i[r.codePointAt(0)]=c,i),[]);function Ms(i){return i.reduce((i,r)=>i+=to[r],"")}function ks(i){let r=[];for(let c of i){let i=tp[c.codePointAt(0)];if(void 0===i)throw Error(`Non-base256emoji character: ${c}`);r.push(i)}return new Uint8Array(r)}let ty=W({prefix:"\uD83D\uDE80",name:"base256emoji",encode:Ms,decode:ks});var tm=Object.freeze({__proto__:null,base256emoji:ty});function $e(i,r,c){r=r||[],c=c||0;for(var l=c;i>=2147483648;)r[c++]=255&i|128,i/=128;for(;-128&i;)r[c++]=255&i|128,i>>>=7;return r[c]=0|i,$e.bytes=c-l+1,r}function he(i,r){var c,l=0,r=r||0,S=0,P=r,C=i.length;do{if(P>=C)throw he.bytes=0,RangeError("Could not decode varint");c=i[P++],l+=S<28?(127&c)<<S:(127&c)*Math.pow(2,S),S+=7}while(c>=128);return he.bytes=P-r,l}var t_={encode:$e,decode:he,encodingLength:function(i){return i<128?1:i<16384?2:i<2097152?3:i<268435456?4:i<34359738368?5:i<4398046511104?6:i<562949953421312?7:i<72057594037927940?8:i<0x7fffffffffffffff?9:10}};let Ke=(i,r,c=0)=>(t_.encode(i,r,c),r),Be=i=>t_.encodingLength(i),ce=(i,r)=>{let c=r.byteLength,l=Be(i),S=l+Be(c),P=new Uint8Array(S+c);return Ke(i,P,0),Ke(c,P,l),P.set(r,S),new or(i,c,r,P)};let or=class or{constructor(i,r,c,l){this.code=i,this.size=r,this.digest=c,this.bytes=l}};let Ve=({name:i,code:r,encode:c})=>new ar(i,r,c);let ar=class ar{constructor(i,r,c){this.name=i,this.code=r,this.encode=c}digest(i){if(i instanceof Uint8Array){let r=this.encode(i);return r instanceof Uint8Array?ce(this.code,r):r.then(i=>ce(this.code,i))}throw Error("Unknown type, must be binary type")}};let je=i=>async r=>new Uint8Array(await crypto.subtle.digest(i,r)),tw=Ve({name:"sha2-256",code:18,encode:je("SHA-256")}),tb=Ve({name:"sha2-512",code:19,encode:je("SHA-512")});var tI=Object.freeze({__proto__:null,sha256:tw,sha512:tb}),tE=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Ne,digest:i=>ce(0,Ne(i))}});new TextEncoder,new TextDecoder;let tx={...ej,...ez,...ek,...eH,...eK,...eX,...e5,...e3,...tn,...tm};function He(i){return null!=globalThis.Buffer?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Dr(i=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?He(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Je(i,r,c,l){return{name:i,prefix:r,encoder:{name:i,prefix:r,encode:c},decoder:{decode:l}}}({...tI,...tE});let tS=Je("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),tP=Je("ascii","a",i=>{let r="a";for(let c=0;c<i.length;c++)r+=String.fromCharCode(i[c]);return r},i=>{i=i.substring(1);let r=Dr(i.length);for(let c=0;c<i.length;c++)r[c]=i.charCodeAt(c);return r}),tC={utf8:tS,"utf-8":tS,hex:tx.base16,latin1:tP,ascii:tP,binary:tP,...tx};function mr(i,r="utf8"){let c=tC[r];if(!c)throw Error(`Unsupported encoding "${r}"`);return("utf8"===r||"utf-8"===r)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?He(globalThis.Buffer.from(i,"utf-8")):c.decoder.decode(`${c.prefix}${i}`)}let tO="core",tR=`wc@2:${tO}:`,tA={logger:"error"},tN={database:":memory:"},tL="client_ed25519_seed",tj=ey.ONE_DAY,tT=ey.SIX_HOURS,tz="wss://relay.walletconnect.com",tq="wss://relay.walletconnect.org",tD={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},tk={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tM=ey.ONE_SECOND,tH={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},t$=1e3*ey.FIVE_SECONDS,tU={wc_pairingDelete:{req:{ttl:ey.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ey.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ey.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ey.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ey.ONE_DAY,prompt:!1,tag:0},res:{ttl:ey.ONE_DAY,prompt:!1,tag:0}}},tK={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},tV={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},tB={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tG="verify-api",tW="https://verify.walletconnect.com",tZ="https://verify.walletconnect.org",tF=[tW,tZ];let Pt=class Pt{constructor(i,r){this.core=i,this.logger=r,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=tR,this.init=async()=>{if(!this.initialized){let i=await this.getKeyChain();"u">typeof i&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,r)=>{this.isInitialized(),this.keychain.set(i,r),await this.persist()},this.get=i=>{this.isInitialized();let r=this.keychain.get(i);if(typeof r>"u"){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=i,this.logger=(0,et.generateChildLogger)(r,this.name)}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,(0,C.KC)(i))}async getKeyChain(){let i=await this.core.storage.getItem(this.storageKey);return"u">typeof i?(0,C.IP)(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let xt=class xt{constructor(i,r,c){this.core=i,this.logger=r,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();let i=await this.getClientSeed(),r=generateKeyPair(i);return encodeIss(r.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let i=(0,C.Au)();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();let r=await this.getClientSeed(),c=generateKeyPair(r),l=(0,C.jd)();return await signJWT(l,i,tj,c)},this.generateSharedKey=(i,r,c)=>{this.isInitialized();let l=this.getPrivateKey(i),S=(0,C.m$)(l,r);return this.setSymKey(S,c)},this.setSymKey=async(i,r)=>{this.isInitialized();let c=r||(0,C.Ym)(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,r,c)=>{this.isInitialized();let l=(0,C.EN)(c),S=(0,J.u)(r);if((0,C.Q8)(l)){let r=l.senderPublicKey,c=l.receiverPublicKey;i=await this.generateSharedKey(r,c)}let P=this.getSymKey(i),{type:R,senderPublicKey:A}=l;return(0,C.HI)({type:R,symKey:P,message:S,senderPublicKey:A})},this.decode=async(i,r,c)=>{this.isInitialized();let l=(0,C.Ll)(r,c);if((0,C.Q8)(l)){let r=l.receiverPublicKey,c=l.senderPublicKey;i=await this.generateSharedKey(r,c)}try{let c=this.getSymKey(i),l=(0,C.pe)({symKey:c,encoded:r});return(0,J.D)(l)}catch(r){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=i=>{let r=(0,C.vB)(i);return(0,C.WG)(r.type)},this.getPayloadSenderPublicKey=i=>{let r=(0,C.vB)(i);return r.senderPublicKey?(0,eE.BB)(r.senderPublicKey,C.AW):void 0},this.core=i,this.logger=(0,et.generateChildLogger)(r,this.name),this.keychain=c||new Pt(this.core,this.logger)}get context(){return(0,et.getLoggerContext)(this.logger)}async setPrivateKey(i,r){return await this.keychain.set(i,r),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(tL)}catch{i=(0,C.jd)(),await this.keychain.set(tL,i)}return mr(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let Ot=class Ot extends a{constructor(i,r){super(i,r),this.logger=i,this.core=r,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=tR,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let i=await this.getRelayerMessages();"u">typeof i&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,r)=>{this.isInitialized();let c=(0,C.rj)(r),l=this.messages.get(i);return typeof l>"u"&&(l={}),"u">typeof l[c]||(l[c]=r,this.messages.set(i,l),await this.persist()),c},this.get=i=>{this.isInitialized();let r=this.messages.get(i);return typeof r>"u"&&(r={}),r},this.has=(i,r)=>{this.isInitialized();let c=this.get(i),l=(0,C.rj)(r);return"u">typeof c[l]},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,et.generateChildLogger)(i,this.name),this.core=r}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,(0,C.KC)(i))}async getRelayerMessages(){let i=await this.core.storage.getItem(this.storageKey);return"u">typeof i?(0,C.IP)(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let vr=class vr extends u{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.events=new S.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,ey.toMiliseconds)(ey.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,r,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:r,opts:c}});try{let S=c?.ttl||tT,P=(0,C._H)(c),R=c?.prompt||!1,A=c?.tag||0,q=c?.id||(0,eS.getBigIntRpcId)().toString(),$={topic:i,message:r,opts:{ttl:S,relay:P,prompt:R,tag:A,id:q}},U=setTimeout(()=>this.queue.set(q,$),this.publishTimeout);try{await await (0,C.hF)(this.rpcPublish(i,r,S,P,R,A,q),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(q),this.relayer.events.emit(tD.publish,$)}catch(i){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(l=c?.internal)&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(q),i;return}finally{clearTimeout(U)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:r,opts:c}})}catch(i){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(i),i}},this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.relayer=i,this.logger=(0,et.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,et.getLoggerContext)(this.logger)}rpcPublish(i,r,c,l,S,P,R){var A,q,$,U;let F={method:(0,C.cO)(l.protocol).publish,params:{topic:i,message:r,ttl:c,prompt:S,tag:P},id:R};return(0,C.o8)(null==(A=F.params)?void 0:A.prompt)&&(null==(q=F.params)||delete q.prompt),(0,C.o8)(null==($=F.params)?void 0:$.tag)&&(null==(U=F.params)||delete U.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:F}),this.relayer.request(F)}removeRequestFromQueue(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{let{topic:r,message:c,opts:l}=i;await this.publish(r,c,l)})}registerEventListeners(){this.relayer.core.heartbeat.on(ee.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tD.connection_stalled);return}this.checkQueue()}),this.relayer.on(tD.message_ack,i=>{this.removeRequestFromQueue(i.id.toString())})}};let Ir=class Ir{constructor(){this.map=new Map,this.set=(i,r)=>{let c=this.get(i);this.exists(i,r)||this.map.set(i,[...c,r])},this.get=i=>this.map.get(i)||[],this.exists=(i,r)=>this.get(i).includes(r),this.delete=(i,r)=>{if(typeof r>"u"){this.map.delete(i);return}if(!this.map.has(i))return;let c=this.get(i);if(!this.exists(i,r))return;let l=c.filter(i=>i!==r);if(!l.length){this.map.delete(i);return}this.map.set(i,l)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var tJ=Object.defineProperty,tY=Object.defineProperties,tQ=Object.getOwnPropertyDescriptors,tX=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,t1=Object.prototype.propertyIsEnumerable,zt=(i,r,c)=>r in i?tJ(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_j=(i,r)=>{for(var c in r||(r={}))t0.call(r,c)&&zt(i,c,r[c]);if(tX)for(var c of tX(r))t1.call(r,c)&&zt(i,c,r[c]);return i},De=(i,r)=>tY(i,tQ(r));let Nt=class Nt extends d{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.subscriptions=new Map,this.topicMap=new Ir,this.events=new S.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=tR,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:r}});try{let c=(0,C._H)(r),l={topic:i,relay:c};this.pending.set(i,l);let S=await this.rpcSubscribe(i,c);return this.onSubscribe(S,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:r}}),S}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}},this.unsubscribe=async(i,r)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof r?.id?await this.unsubscribeById(i,r.id,r):await this.unsubscribeByTopic(i,r)},this.isSubscribed=async i=>!!this.topics.includes(i)||await new Promise((r,c)=>{let l=new ey.Watch;l.start(this.pendingSubscriptionWatchLabel);let S=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(S),l.stop(this.pendingSubscriptionWatchLabel),r(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=t$&&(clearInterval(S),l.stop(this.pendingSubscriptionWatchLabel),c(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=(0,et.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,r){let c=!1;try{c=this.getSubscription(i).topic===r}catch{}return c}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,r){let c=this.topicMap.get(i);await Promise.all(c.map(async c=>await this.unsubscribeById(i,c,r)))}async unsubscribeById(i,r,c){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:c}});try{let l=(0,C._H)(c);await this.rpcUnsubscribe(i,r,l);let S=(0,C.D6)("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,r,S),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:c}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(i,r){let c={method:(0,C.cO)(r.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{await await (0,C.hF)(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tD.connection_stalled)}return(0,C.rj)(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;let r=i[0].relay,c={method:(0,C.cO)(r.protocol).batchSubscribe,params:{topics:i.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{return await await (0,C.hF)(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tD.connection_stalled)}}rpcUnsubscribe(i,r,c){let l={method:(0,C.cO)(c.protocol).unsubscribe,params:{topic:i,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:l}),this.relayer.request(l)}onSubscribe(i,r){this.setSubscription(i,De(index_es_j({},r),{id:i})),this.pending.delete(r.topic)}onBatchSubscribe(i){i.length&&i.forEach(i=>{this.setSubscription(i.id,index_es_j({},i)),this.pending.delete(i.topic)})}async onUnsubscribe(i,r,c){this.events.removeAllListeners(r),this.hasSubscription(r,i)&&this.deleteSubscription(r,c),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,r){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:r}),this.addSubscription(i,r))}addSubscription(i,r){this.subscriptions.set(i,index_es_j({},r)),this.topicMap.set(r.topic,i),this.events.emit(tH.created,r)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});let r=this.subscriptions.get(i);if(!r){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r}deleteSubscription(i,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:r});let c=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(c.topic,i),this.events.emit(tH.deleted,De(index_es_j({},c),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tH.sync)}async reset(){if(this.cached.length){let i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){let i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(tH.resubscribed)}async restore(){try{let i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){let{message:i}=(0,C.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;let r=await this.rpcBatchSubscribe(i);(0,C.qt)(r)&&this.onBatchSubscribe(r.map((r,c)=>De(index_es_j({},i[c]),{id:r})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let i=[];this.pending.forEach(r=>{i.push(r)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(ee.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tD.connect,async()=>{await this.onConnect()}),this.relayer.on(tD.disconnect,()=>{this.onDisconnect()}),this.events.on(tH.created,async i=>{let r=tH.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()}),this.events.on(tH.deleted,async i=>{let r=tH.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),i())},this.pollingInterval)})}};var t5=Object.defineProperty,t6=Object.getOwnPropertySymbols,t2=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,Lt=(i,r,c)=>r in i?t5(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,Ar=(i,r)=>{for(var c in r||(r={}))t2.call(r,c)&&Lt(i,c,r[c]);if(t6)for(var c of t6(r))t3.call(r,c)&&Lt(i,c,r[c]);return i};let Ft=class Ft extends g{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new S.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async i=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(i)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=i=>{this.onProviderPayload(i)},this.onConnectHandler=()=>{this.events.emit(tD.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=i=>{this.logger.error(i),this.events.emit(tD.error,i),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tk.payload,this.onPayloadHandler),this.provider.on(tk.connect,this.onConnectHandler),this.provider.on(tk.disconnect,this.onDisconnectHandler),this.provider.on(tk.error,this.onProviderErrorHandler)},this.core=i.core,this.logger="u">typeof i.logger&&"string"!=typeof i.logger?(0,et.generateChildLogger)(i.logger,this.name):(0,et.pino)((0,et.getDefaultLoggerOptions)({level:i.logger||"error"})),this.messages=new Ot(this.logger,i.core),this.subscriber=new Nt(this,this.logger),this.publisher=new vr(this,this.logger),this.relayUrl=i?.relayUrl||tz,this.projectId=i.projectId,this.bundleId=(0,C.X_)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${tq}...`),await this.restartTransport(tq)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,et.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,r,c){this.isInitialized(),await this.publisher.publish(i,r,c),await this.recordMessageEvent({topic:i,message:r,publishedAt:Date.now()})}async subscribe(i,r){var c;let l;this.isInitialized();let S=(null==(c=this.subscriber.topicMap.get(i))?void 0:c[0])||"";if(S)return S;let o=r=>{r.topic===i&&(this.subscriber.off(tH.created,o),l())};return await Promise.all([new Promise(i=>{l=i,this.subscriber.on(tH.created,o)}),new Promise(async c=>{S=await this.subscriber.subscribe(i,r),c()})]),S}async unsubscribe(i,r){this.isInitialized(),await this.subscriber.unsubscribe(i,r)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await (0,C.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(i){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){i&&i!==this.relayUrl&&(this.relayUrl=i,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(i=>{if(!this.initialized)return i();this.subscriber.once(tH.resubscribed,()=>{i()})}),new Promise(async(i,r)=>{try{await (0,C.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){r(i);return}i()})])}catch(i){if(this.logger.error(i),!this.isConnectionStalled(i.message))throw i;this.provider.events.emit(tk.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(i){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=i||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await (0,C.Gg)())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(i){return this.staleConnectionErrors.some(r=>i.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ex.r(new f((0,C.$0)({sdkVersion:"2.11.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(i){let{topic:r,message:c}=i;await this.messages.set(r,c)}async shouldIgnoreMessageEvent(i){let{topic:r,message:c}=i;if(!c||0===c.length)return this.logger.debug(`Ignoring invalid/empty message: ${c}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let l=this.messages.has(r,c);return l&&this.logger.debug(`Ignoring duplicate message: ${c}`),l}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),(0,eS.isJsonRpcRequest)(i)){if(!i.method.endsWith("_subscription"))return;let r=i.params,{topic:c,message:l,publishedAt:S}=r.data,P={topic:c,message:l,publishedAt:S};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ar({type:"event",event:r.id},P)),this.events.emit(r.id,P),await this.acknowledgePayload(i),await this.onMessageEvent(P)}else(0,eS.isJsonRpcResponse)(i)&&this.events.emit(tD.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(tD.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){let r=(0,eS.formatJsonRpcResult)(i.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(tk.payload,this.onPayloadHandler),this.provider.off(tk.connect,this.onConnectHandler),this.provider.off(tk.disconnect,this.onDisconnectHandler),this.provider.off(tk.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tD.connection_stalled,()=>{this.restartTransport().catch(i=>this.logger.error(i))});let i=await (0,C.Gg)();(0,C.uw)(async r=>{this.initialized&&i!==r&&(i=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(tD.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(i=>this.logger.error(i))},(0,ey.toMiliseconds)(tM)))}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(i=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var t9=Object.defineProperty,t8=Object.getOwnPropertySymbols,t4=Object.prototype.hasOwnProperty,t7=Object.prototype.propertyIsEnumerable,Mt=(i,r,c)=>r in i?t9(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,kt=(i,r)=>{for(var c in r||(r={}))t4.call(r,c)&&Mt(i,c,r[c]);if(t8)for(var c of t8(r))t7.call(r,c)&&Mt(i,c,r[c]);return i};let Kt=class Kt extends p{constructor(i,r,c,l=tR,S){super(i,r,c,l),this.core=i,this.logger=r,this.name=c,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tR,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>{this.getKey&&null!==i&&!(0,C.o8)(i)?this.map.set(this.getKey(i),i):(0,C.xW)(i)?this.map.set(i.id,i):(0,C.h1)(i)&&this.map.set(i.topic,i)}),this.cached=[],this.initialized=!0)},this.set=async(i,r)=>{this.isInitialized(),this.map.has(i)?await this.update(i,r):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:i,value:r}),this.map.set(i,r),await this.persist())},this.get=i=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:i}),this.getData(i)),this.getAll=i=>(this.isInitialized(),i?this.values.filter(r=>Object.keys(i).every(c=>eO()(r[c],i[c]))):this.values),this.update=async(i,r)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:i,update:r});let c=kt(kt({},this.getData(i)),r);this.map.set(i,c),await this.persist()},this.delete=async(i,r)=>{this.isInitialized(),this.map.has(i)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:i,reason:r}),this.map.delete(i),await this.persist())},this.logger=(0,et.generateChildLogger)(r,this.name),this.storagePrefix=l,this.getKey=S}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){let r=this.map.get(i);if(!r){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(r),Error(r)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){let{message:i}=(0,C.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let Bt=class Bt{constructor(i,r){this.core=i,this.logger=r,this.name="pairing",this.version="0.3",this.events=new(P()),this.initialized=!1,this.storagePrefix=tR,this.ignoredPayloadTypes=[C.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();let i=(0,C.jd)(),r=await this.core.crypto.setSymKey(i),c=(0,C.gn)(ey.FIVE_MINUTES),l={protocol:"irn"},S=(0,C.Bv)({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:i,relay:l});return await this.pairings.set(r,{topic:r,expiry:c,relay:l,active:!1}),await this.core.relayer.subscribe(r),this.core.expirer.set(r,c),{topic:r,uri:S}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);let{topic:r,symKey:c,relay:l}=(0,C.he)(i.uri);if(this.pairings.keys.includes(r)&&this.pairings.get(r).active)throw Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);let S=(0,C.gn)(ey.FIVE_MINUTES),P={topic:r,relay:l,expiry:S,active:!1};return await this.pairings.set(r,P),this.core.expirer.set(r,S),i.activatePairing&&await this.activate({topic:r}),this.events.emit(tK.create,P),this.core.crypto.keychain.has(r)||(await this.core.crypto.setSymKey(c,r),await this.core.relayer.subscribe(r,{relay:l})),P},this.activate=async({topic:i})=>{this.isInitialized();let r=(0,C.gn)(ey.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:r}),this.core.expirer.set(i,r)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);let{topic:r}=i;if(this.pairings.keys.includes(r)){let i=await this.sendRequest(r,"wc_pairingPing",{}),{done:c,resolve:l,reject:S}=(0,C.H1)();this.events.once((0,C.E0)("pairing_ping",i),({error:i})=>{i?S(i):l()}),await c()}},this.updateExpiry=async({topic:i,expiry:r})=>{this.isInitialized(),await this.pairings.update(i,{expiry:r})},this.updateMetadata=async({topic:i,metadata:r})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);let{topic:r}=i;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",(0,C.D6)("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(i,r,c)=>{let l=(0,eS.formatJsonRpcRequest)(r,c),S=await this.core.crypto.encode(i,l),P=tU[r].req;return this.core.history.set(i,l),this.core.relayer.publish(i,S,P),l.id},this.sendResult=async(i,r,c)=>{let l=(0,eS.formatJsonRpcResult)(i,c),S=await this.core.crypto.encode(r,l),P=await this.core.history.get(r,i),C=tU[P.request.method].res;await this.core.relayer.publish(r,S,C),await this.core.history.resolve(l)},this.sendError=async(i,r,c)=>{let l=(0,eS.formatJsonRpcError)(i,c),S=await this.core.crypto.encode(r,l),P=await this.core.history.get(r,i),C=tU[P.request.method]?tU[P.request.method].res:tU.unregistered_method.res;await this.core.relayer.publish(r,S,C),await this.core.history.resolve(l)},this.deletePairing=async(i,r)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,(0,C.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),r?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{let i=this.pairings.getAll().filter(i=>(0,C.Bw)(i.expiry));await Promise.all(i.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=i=>{let{topic:r,payload:c}=i;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(r,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,c);default:return this.onUnknownRpcMethodRequest(r,c)}},this.onRelayEventResponse=async i=>{let{topic:r,payload:c}=i,l=(await this.core.history.get(r,c.id)).request.method;return"wc_pairingPing"===l?this.onPairingPingResponse(r,c):this.onUnknownRpcMethodResponse(l)},this.onPairingPingRequest=async(i,r)=>{let{id:c}=r;try{this.isValidPing({topic:i}),await this.sendResult(c,i,!0),this.events.emit(tK.ping,{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onPairingPingResponse=(i,r)=>{let{id:c}=r;setTimeout(()=>{(0,eS.isJsonRpcResult)(r)?this.events.emit((0,C.E0)("pairing_ping",c),{}):(0,eS.isJsonRpcError)(r)&&this.events.emit((0,C.E0)("pairing_ping",c),{error:r.error})},500)},this.onPairingDeleteRequest=async(i,r)=>{let{id:c}=r;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(tK.delete,{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onUnknownRpcMethodRequest=async(i,r)=>{let{id:c,method:l}=r;try{if(this.registeredMethods.includes(l))return;let r=(0,C.D6)("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,i,r),this.logger.error(r)}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error((0,C.D6)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var r;if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`pair() params: ${i}`);throw Error(r)}if(!(0,C.jv)(i.uri)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw Error(r)}let c=(0,C.he)(i.uri);if(!(null!=(r=c?.relay)&&r.protocol)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(i)}if(!(null!=c&&c.symKey)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID","pair() uri#symKey");throw Error(i)}},this.isValidPing=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidPairingTopic(r)},this.isValidDisconnect=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async i=>{if(!(0,C.M_)(i,!1)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw Error(r)}if(!this.pairings.keys.includes(i)){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw Error(r)}if((0,C.Bw)(this.pairings.get(i).expiry)){await this.deletePairing(i);let{message:r}=(0,C.Z7)("EXPIRED",`pairing topic: ${i}`);throw Error(r)}},this.core=i,this.logger=(0,et.generateChildLogger)(r,this.name),this.pairings=new Kt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,et.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}registerRelayerEvents(){this.core.relayer.on(tD.message,async i=>{let{topic:r,message:c}=i;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(c)))return;let l=await this.core.crypto.decode(r,c);try{(0,eS.isJsonRpcRequest)(l)?(this.core.history.set(r,l),this.onRelayEventRequest({topic:r,payload:l})):(0,eS.isJsonRpcResponse)(l)&&(await this.core.history.resolve(l),await this.onRelayEventResponse({topic:r,payload:l}),this.core.history.delete(r,l.id))}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(tB.expired,async i=>{let{topic:r}=(0,C.iP)(i.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(tK.expire,{topic:r}))})}};let Vt=class Vt extends index_es_h{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.records=new Map,this.events=new S.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tR,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,r,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:r,chainId:c}),this.records.has(r.id))return;let l={id:r.id,topic:i,request:{method:r.method,params:r.params||null},chainId:c,expiry:(0,C.gn)(ey.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(tV.created,l)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;let r=await this.getRecord(i.id);typeof r.response>"u"&&(r.response=(0,eS.isJsonRpcError)(i)?{error:i.error}:{result:i.result},this.records.set(r.id,r),this.events.emit(tV.updated,r))},this.get=async(i,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:r}),await this.getRecord(r)),this.delete=(i,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach(c=>{c.topic!==i||"u">typeof r&&c.id!==r||(this.records.delete(c.id),this.events.emit(tV.deleted,c))})},this.exists=async(i,r)=>(this.isInitialized(),!!this.records.has(r)&&(await this.getRecord(r)).topic===i),this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.logger=(0,et.generateChildLogger)(r,this.name)}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let i=[];return this.values.forEach(r=>{if("u">typeof r.response)return;let c={topic:r.topic,request:(0,eS.formatJsonRpcRequest)(r.request.method,r.request.params,r.id),chainId:r.chainId};return i.push(c)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();let r=this.records.get(i);if(!r){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tV.sync)}async restore(){try{let i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){let{message:i}=(0,C.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(tV.created,i=>{let r=tV.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(tV.updated,i=>{let r=tV.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(tV.deleted,i=>{let r=tV.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.core.heartbeat.on(ee.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{(0,ey.toMiliseconds)(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let jt=class jt extends index_es_E{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.expirations=new Map,this.events=new S.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tR,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{let r=this.formatTarget(i);return"u">typeof this.getExpiration(r)}catch{return!1}},this.set=(i,r)=>{this.isInitialized();let c=this.formatTarget(i),l={target:c,expiry:r};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(tB.created,{target:c,expiration:l})},this.get=i=>{this.isInitialized();let r=this.formatTarget(i);return this.getExpiration(r)},this.del=i=>{if(this.isInitialized(),this.has(i)){let r=this.formatTarget(i),c=this.getExpiration(r);this.expirations.delete(r),this.events.emit(tB.deleted,{target:r,expiration:c})}},this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.logger=(0,et.generateChildLogger)(r,this.name)}get context(){return(0,et.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if("string"==typeof i)return(0,C.Z4)(i);if("number"==typeof i)return(0,C.Gq)(i);let{message:r}=(0,C.Z7)("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw Error(r)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(tB.sync)}async restore(){try{let i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){let{message:i}=(0,C.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){let r=this.expirations.get(i);if(!r){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(r),Error(r)}return r}checkExpiry(i,r){let{expiry:c}=r;(0,ey.toMiliseconds)(c)-Date.now()<=0&&this.expire(i,r)}expire(i,r){this.expirations.delete(i),this.events.emit(tB.expired,{target:i,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,r)=>this.checkExpiry(r,i))}registerEventListeners(){this.core.heartbeat.on(ee.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(tB.created,i=>{let r=tB.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(tB.expired,i=>{let r=tB.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(tB.deleted,i=>{let r=tB.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()})}isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let qt=class qt extends index_es_y{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.name=tG,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||(0,C.b$)()||!(0,C.jU)())return;let r=this.getVerifyUrl(i?.verifyUrl);this.verifyUrl!==r&&this.removeIframe(),this.verifyUrl=r;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=tZ;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{let r;if(this.isDevEnv)return"";let c=this.getVerifyUrl(i?.verifyUrl);try{r=await this.fetchAttestation(i.attestationId,c)}catch(l){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${c}`),this.logger.info(l),r=await this.fetchAttestation(i.attestationId,tZ)}return r},this.fetchAttestation=async(i,r)=>{this.logger.info(`resolving attestation: ${i} from url: ${r}`);let c=this.startAbortTimer(2*ey.ONE_SECOND),l=await fetch(`${r}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(c),200===l.status?await l.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var r;try{if(!this.iframe)return;null==(r=this.iframe.contentWindow)||r.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;let s=r=>{"verify_ready"===r.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),i())};await Promise.race([new Promise(r=>{if(document.getElementById(tG))return r();window.addEventListener("message",s);let c=document.createElement("iframe");c.id=tG,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,i=r}),new Promise((i,r)=>setTimeout(()=>{window.removeEventListener("message",s),r("verify iframe load timeout")},(0,ey.toMiliseconds)(ey.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let r=i||tW;return tF.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${tW}`),r=tW),r},this.logger=(0,et.generateChildLogger)(r,this.name),this.verifyUrl=tW,this.abortController=new AbortController,this.isDevEnv=(0,C.UG)()&&eN.env.IS_VITEST}get context(){return(0,et.getLoggerContext)(this.logger)}startAbortTimer(i){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,ey.toMiliseconds)(i))}};let Gt=class Gt extends v{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.context="echo",this.registerDeviceToken=async i=>{let{clientId:r,token:c,notificationType:l,enableEncrypted:S=!1}=i,P=`https://echo.walletconnect.com/${this.projectId}/clients`;await eA()(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,type:l,token:c,always_raw:S})})},this.logger=(0,et.generateChildLogger)(r,this.context)}};var ie=Object.defineProperty,ir=Object.getOwnPropertySymbols,io=Object.prototype.hasOwnProperty,il=Object.prototype.propertyIsEnumerable,Ht=(i,r,c)=>r in i?ie(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,Jt=(i,r)=>{for(var c in r||(r={}))io.call(r,c)&&Ht(i,c,r[c]);if(ir)for(var c of ir(r))il.call(r,c)&&Ht(i,c,r[c]);return i};let te=class te extends n{constructor(i){super(i),this.protocol="wc",this.version=2,this.name=tO,this.events=new S.EventEmitter,this.initialized=!1,this.on=(i,r)=>this.events.on(i,r),this.once=(i,r)=>this.events.once(i,r),this.off=(i,r)=>this.events.off(i,r),this.removeListener=(i,r)=>this.events.removeListener(i,r),this.projectId=i?.projectId,this.relayUrl=i?.relayUrl||tz,this.customStoragePrefix=null!=i&&i.customStoragePrefix?`:${i.customStoragePrefix}`:"";let r="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,et.pino)((0,et.getDefaultLoggerOptions)({level:i?.logger||tA.logger}));this.logger=(0,et.generateChildLogger)(r,this.name),this.heartbeat=new ee.HeartBeat,this.crypto=new xt(this,this.logger,i?.keychain),this.history=new Vt(this,this.logger),this.expirer=new jt(this,this.logger),this.storage=null!=i&&i.storage?i.storage:new h(Jt(Jt({},tN),i?.storageOptions)),this.relayer=new Ft({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Bt(this,this.logger),this.verify=new qt(this.projectId||"",this.logger),this.echoClient=new Gt(this.projectId||"",this.logger)}static async init(i){let r=new te(i);await r.initialize();let c=await r.crypto.getClientId();return await r.storage.setItem("WALLETCONNECT_CLIENT_ID",c),r}get context(){return(0,et.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}};let iu="client",id=`wc@2:${iu}:`,ig={name:iu,logger:"error"},iy="WALLETCONNECT_DEEPLINK_CHOICE",im="Proposal expired",i_=ey.SEVEN_DAYS,iw={wc_sessionPropose:{req:{ttl:ey.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ey.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ey.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ey.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ey.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ey.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ey.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ey.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ey.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ey.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ey.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ey.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ey.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ey.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ey.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ey.THIRTY_SECONDS,prompt:!1,tag:1115}}},ib={min:ey.FIVE_MINUTES,max:ey.SEVEN_DAYS},iI={idle:"IDLE",active:"ACTIVE"},iE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var ix=Object.defineProperty,iS=Object.defineProperties,iP=Object.getOwnPropertyDescriptors,iC=Object.getOwnPropertySymbols,iO=Object.prototype.hasOwnProperty,iR=Object.prototype.propertyIsEnumerable,index_es_de=(i,r,c)=>r in i?ix(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,dist_index_es_g=(i,r)=>{for(var c in r||(r={}))iO.call(r,c)&&index_es_de(i,c,r[c]);if(iC)for(var c of iC(r))iR.call(r,c)&&index_es_de(i,c,r[c]);return i},dist_index_es_b=(i,r)=>iS(i,iP(r));let index_es_ds=class index_es_ds extends w{constructor(i){super(i),this.name="engine",this.events=new(P()),this.initialized=!1,this.ignoredPayloadTypes=[C.rV],this.requestQueue={state:iI.idle,queue:[]},this.sessionRequestQueue={state:iI.idle,queue:[]},this.requestQueueDelay=ey.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(iw)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,ey.toMiliseconds)(this.requestQueueDelay)))},this.connect=async i=>{await this.isInitialized();let r=dist_index_es_b(dist_index_es_g({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});await this.isValidConnect(r);let{pairingTopic:c,requiredNamespaces:l,optionalNamespaces:S,sessionProperties:P,relays:R}=r,A=c,q,$=!1;if(A&&($=this.client.core.pairing.pairings.get(A).active),!A||!$){let{topic:i,uri:r}=await this.client.core.pairing.create();A=i,q=r}let U=await this.client.core.crypto.generateKeyPair(),F=dist_index_es_g({requiredNamespaces:l,optionalNamespaces:S,relays:R??[{protocol:"irn"}],proposer:{publicKey:U,metadata:this.client.metadata}},P&&{sessionProperties:P}),{reject:J,resolve:Q,done:X}=(0,C.H1)(ey.FIVE_MINUTES,im);if(this.events.once((0,C.E0)("session_connect"),async({error:i,session:r})=>{if(i)J(i);else if(r){r.self.publicKey=U;let i=dist_index_es_b(dist_index_es_g({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces});await this.client.session.set(r.topic,i),await this.setExpiry(r.topic,r.expiry),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:r.peer.metadata}),Q(i)}}),!A){let{message:i}=(0,C.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${A}`);throw Error(i)}let ee=await this.sendRequest({topic:A,method:"wc_sessionPropose",params:F}),et=(0,C.gn)(ey.FIVE_MINUTES);return await this.setProposal(ee,dist_index_es_g({id:ee,expiry:et},F)),{uri:q,approval:X}},this.pair=async i=>(await this.isInitialized(),await this.client.core.pairing.pair(i)),this.approve=async i=>{await this.isInitialized(),await this.isValidApprove(i);let{id:r,relayProtocol:c,namespaces:l,sessionProperties:S}=i,P=this.client.proposal.get(r),{pairingTopic:R,proposer:A,requiredNamespaces:q,optionalNamespaces:$}=P;R=R||"",(0,C.L5)(q)||(q=(0,C.fc)(l,"approve()"));let U=await this.client.core.crypto.generateKeyPair(),F=A.publicKey,J=await this.client.core.crypto.generateSharedKey(U,F);R&&r&&(await this.client.core.pairing.updateMetadata({topic:R,metadata:A.metadata}),await this.sendResult({id:r,topic:R,result:{relay:{protocol:c??"irn"},responderPublicKey:U}}),await this.client.proposal.delete(r,(0,C.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:R}));let Q=dist_index_es_g({relay:{protocol:c??"irn"},namespaces:l,requiredNamespaces:q,optionalNamespaces:$,pairingTopic:R,controller:{publicKey:U,metadata:this.client.metadata},expiry:(0,C.gn)(i_)},S&&{sessionProperties:S});await this.client.core.relayer.subscribe(J),await this.sendRequest({topic:J,method:"wc_sessionSettle",params:Q,throwOnFailedPublish:!0});let X=dist_index_es_b(dist_index_es_g({},Q),{topic:J,pairingTopic:R,acknowledged:!1,self:Q.controller,peer:{publicKey:A.publicKey,metadata:A.metadata},controller:U});return await this.client.session.set(J,X),await this.setExpiry(J,(0,C.gn)(i_)),{topic:J,acknowledged:()=>new Promise(i=>setTimeout(()=>i(this.client.session.get(J)),500))}},this.reject=async i=>{await this.isInitialized(),await this.isValidReject(i);let{id:r,reason:c}=i,{pairingTopic:l}=this.client.proposal.get(r);l&&(await this.sendError(r,l,c),await this.client.proposal.delete(r,(0,C.D6)("USER_DISCONNECTED")))},this.update=async i=>{await this.isInitialized(),await this.isValidUpdate(i);let{topic:r,namespaces:c}=i,l=await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:c}}),{done:S,resolve:P,reject:R}=(0,C.H1)();return this.events.once((0,C.E0)("session_update",l),({error:i})=>{i?R(i):P()}),await this.client.session.update(r,{namespaces:c}),{acknowledged:S}},this.extend=async i=>{await this.isInitialized(),await this.isValidExtend(i);let{topic:r}=i,c=await this.sendRequest({topic:r,method:"wc_sessionExtend",params:{}}),{done:l,resolve:S,reject:P}=(0,C.H1)();return this.events.once((0,C.E0)("session_extend",c),({error:i})=>{i?P(i):S()}),await this.setExpiry(r,(0,C.gn)(i_)),{acknowledged:l}},this.request=async i=>{await this.isInitialized(),await this.isValidRequest(i);let{chainId:r,request:c,topic:l,expiry:S}=i,P=(0,eS.payloadId)(),{done:R,resolve:A,reject:q}=(0,C.H1)(S,"Request expired. Please try again.");return this.events.once((0,C.E0)("session_request",P),({error:i,result:r})=>{i?q(i):A(r)}),await Promise.all([new Promise(async i=>{await this.sendRequest({clientRpcId:P,topic:l,method:"wc_sessionRequest",params:{request:c,chainId:r},expiry:S,throwOnFailedPublish:!0}).catch(i=>q(i)),this.client.events.emit("session_request_sent",{topic:l,request:c,chainId:r,id:P}),i()}),new Promise(async i=>{let r=await (0,C.bW)(this.client.core.storage,iy);(0,C.Hh)({id:P,topic:l,wcDeepLink:r}),i()}),R()]).then(i=>i[2])},this.respond=async i=>{await this.isInitialized(),await this.isValidRespond(i);let{topic:r,response:c}=i,{id:l}=c;(0,eS.isJsonRpcResult)(c)?await this.sendResult({id:l,topic:r,result:c.result,throwOnFailedPublish:!0}):(0,eS.isJsonRpcError)(c)&&await this.sendError(l,r,c.error),this.cleanupAfterResponse(i)},this.ping=async i=>{await this.isInitialized(),await this.isValidPing(i);let{topic:r}=i;if(this.client.session.keys.includes(r)){let i=await this.sendRequest({topic:r,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:S}=(0,C.H1)();this.events.once((0,C.E0)("session_ping",i),({error:i})=>{i?S(i):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async i=>{await this.isInitialized(),await this.isValidEmit(i);let{topic:r,event:c,chainId:l}=i;await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:c,chainId:l}})},this.disconnect=async i=>{await this.isInitialized(),await this.isValidDisconnect(i);let{topic:r}=i;this.client.session.keys.includes(r)?(await this.sendRequest({topic:r,method:"wc_sessionDelete",params:(0,C.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(r)):await this.client.core.pairing.disconnect({topic:r})},this.find=i=>(this.isInitialized(),this.client.session.getAll().filter(r=>(0,C.Ih)(r,i))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async i=>{if(i.pairingTopic)try{let r=this.client.core.pairing.pairings.get(i.pairingTopic),c=this.client.core.pairing.pairings.getAll().filter(c=>{var l,S;return(null==(l=c.peerMetadata)?void 0:l.url)&&(null==(S=c.peerMetadata)?void 0:S.url)===i.peer.metadata.url&&c.topic&&c.topic!==r.topic});if(0===c.length)return;this.client.logger.info(`Cleaning up ${c.length} duplicate pairing(s)`),await Promise.all(c.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(i,r)=>{let{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),this.client.session.delete(i,(0,C.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(iy).catch(i=>this.client.logger.warn(i)),this.getPendingSessionRequests().forEach(r=>{r.topic===i&&this.deletePendingSessionRequest(r.id,(0,C.D6)("USER_DISCONNECTED"))})},this.deleteProposal=async(i,r)=>{await Promise.all([this.client.proposal.delete(i,(0,C.D6)("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(i)])},this.deletePendingSessionRequest=async(i,r,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(i,r),c?Promise.resolve():this.client.core.expirer.del(i)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(r=>r.id!==i),c&&(this.sessionRequestQueue.state=iI.idle)},this.setExpiry=async(i,r)=>{this.client.session.keys.includes(i)&&await this.client.session.update(i,{expiry:r}),this.client.core.expirer.set(i,r)},this.setProposal=async(i,r)=>{await this.client.proposal.set(i,r),this.client.core.expirer.set(i,r.expiry)},this.setPendingSessionRequest=async i=>{let r=iw.wc_sessionRequest.req.ttl,{id:c,topic:l,params:S,verifyContext:P}=i;await this.client.pendingRequest.set(c,{id:c,topic:l,params:S,verifyContext:P}),r&&this.client.core.expirer.set(c,(0,C.gn)(r))},this.sendRequest=async i=>{let{topic:r,method:c,params:l,expiry:S,relayRpcId:P,clientRpcId:R,throwOnFailedPublish:A}=i,q=(0,eS.formatJsonRpcRequest)(c,l,R);if((0,C.jU)()&&iE.includes(c)){let i=(0,C.rj)(JSON.stringify(q));this.client.core.verify.register({attestationId:i})}let $=await this.client.core.crypto.encode(r,q),U=iw[c].req;return S&&(U.ttl=S),P&&(U.id=P),this.client.core.history.set(r,q),A?(U.internal=dist_index_es_b(dist_index_es_g({},U.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,$,U)):this.client.core.relayer.publish(r,$,U).catch(i=>this.client.logger.error(i)),q.id},this.sendResult=async i=>{let{id:r,topic:c,result:l,throwOnFailedPublish:S}=i,P=(0,eS.formatJsonRpcResult)(r,l),C=await this.client.core.crypto.encode(c,P),R=await this.client.core.history.get(c,r),A=iw[R.request.method].res;S?(A.internal=dist_index_es_b(dist_index_es_g({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(c,C,A)):this.client.core.relayer.publish(c,C,A).catch(i=>this.client.logger.error(i)),await this.client.core.history.resolve(P)},this.sendError=async(i,r,c)=>{let l=(0,eS.formatJsonRpcError)(i,c),S=await this.client.core.crypto.encode(r,l),P=await this.client.core.history.get(r,i),C=iw[P.request.method].res;this.client.core.relayer.publish(r,S,C),await this.client.core.history.resolve(l)},this.cleanup=async()=>{let i=[],r=[];this.client.session.getAll().forEach(r=>{(0,C.Bw)(r.expiry)&&i.push(r.topic)}),this.client.proposal.getAll().forEach(i=>{(0,C.Bw)(i.expiry)&&r.push(i.id)}),await Promise.all([...i.map(i=>this.deleteSession(i)),...r.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async i=>{this.requestQueue.queue.push(i),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===iI.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=iI.active;let i=this.requestQueue.queue.shift();if(i)try{this.processRequest(i),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=iI.idle},this.processRequest=i=>{let{topic:r,payload:c}=i,l=c.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(r,c);case"wc_sessionSettle":return this.onSessionSettleRequest(r,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,c);case"wc_sessionExtend":return this.onSessionExtendRequest(r,c);case"wc_sessionPing":return this.onSessionPingRequest(r,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,c);case"wc_sessionRequest":return this.onSessionRequest(r,c);case"wc_sessionEvent":return this.onSessionEventRequest(r,c);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async i=>{let{topic:r,payload:c}=i,l=(await this.client.core.history.get(r,c.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(r,c);case"wc_sessionSettle":return this.onSessionSettleResponse(r,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,c);case"wc_sessionExtend":return this.onSessionExtendResponse(r,c);case"wc_sessionPing":return this.onSessionPingResponse(r,c);case"wc_sessionRequest":return this.onSessionRequestResponse(r,c);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=i=>{let{topic:r}=i,{message:c}=(0,C.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw Error(c)},this.onSessionProposeRequest=async(i,r)=>{let{params:c,id:l}=r;try{this.isValidConnect(dist_index_es_g({},r.params));let S=(0,C.gn)(ey.FIVE_MINUTES),P=dist_index_es_g({id:l,pairingTopic:i,expiry:S},c);await this.setProposal(l,P);let R=(0,C.rj)(JSON.stringify(r)),A=await this.getVerifyContext(R,P.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:P,verifyContext:A})}catch(r){await this.sendError(l,i,r),this.client.logger.error(r)}},this.onSessionProposeResponse=async(i,r)=>{let{id:c}=r;if((0,eS.isJsonRpcResult)(r)){let{result:l}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});let S=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:S});let P=S.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:P});let C=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:C});let R=await this.client.core.crypto.generateSharedKey(P,C);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:R});let A=await this.client.core.relayer.subscribe(R);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:i})}else(0,eS.isJsonRpcError)(r)&&(await this.client.proposal.delete(c,(0,C.D6)("USER_DISCONNECTED")),this.events.emit((0,C.E0)("session_connect"),{error:r.error}))},this.onSessionSettleRequest=async(i,r)=>{let{id:c,params:l}=r;try{this.isValidSessionSettleRequest(l);let{relay:c,controller:S,expiry:P,namespaces:R,requiredNamespaces:A,optionalNamespaces:q,sessionProperties:$,pairingTopic:U}=r.params,F=dist_index_es_g({topic:i,relay:c,expiry:P,namespaces:R,acknowledged:!0,pairingTopic:U,requiredNamespaces:A,optionalNamespaces:q,controller:S.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:S.publicKey,metadata:S.metadata}},$&&{sessionProperties:$});await this.sendResult({id:r.id,topic:i,result:!0}),this.events.emit((0,C.E0)("session_connect"),{session:F}),this.cleanupDuplicatePairings(F)}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionSettleResponse=async(i,r)=>{let{id:c}=r;(0,eS.isJsonRpcResult)(r)?(await this.client.session.update(i,{acknowledged:!0}),this.events.emit((0,C.E0)("session_approve",c),{})):(0,eS.isJsonRpcError)(r)&&(await this.client.session.delete(i,(0,C.D6)("USER_DISCONNECTED")),this.events.emit((0,C.E0)("session_approve",c),{error:r.error}))},this.onSessionUpdateRequest=async(i,r)=>{let{params:c,id:l}=r;try{let r=`${i}_session_update`,S=C.O6.get(r);if(S&&this.isRequestOutOfSync(S,l)){this.client.logger.info(`Discarding out of sync request - ${l}`);return}this.isValidUpdate(dist_index_es_g({topic:i},c)),await this.client.session.update(i,{namespaces:c.namespaces}),await this.sendResult({id:l,topic:i,result:!0}),this.client.events.emit("session_update",{id:l,topic:i,params:c}),C.O6.set(r,l)}catch(r){await this.sendError(l,i,r),this.client.logger.error(r)}},this.isRequestOutOfSync=(i,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(i.toString().slice(0,-3)),this.onSessionUpdateResponse=(i,r)=>{let{id:c}=r;(0,eS.isJsonRpcResult)(r)?this.events.emit((0,C.E0)("session_update",c),{}):(0,eS.isJsonRpcError)(r)&&this.events.emit((0,C.E0)("session_update",c),{error:r.error})},this.onSessionExtendRequest=async(i,r)=>{let{id:c}=r;try{this.isValidExtend({topic:i}),await this.setExpiry(i,(0,C.gn)(i_)),await this.sendResult({id:c,topic:i,result:!0}),this.client.events.emit("session_extend",{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionExtendResponse=(i,r)=>{let{id:c}=r;(0,eS.isJsonRpcResult)(r)?this.events.emit((0,C.E0)("session_extend",c),{}):(0,eS.isJsonRpcError)(r)&&this.events.emit((0,C.E0)("session_extend",c),{error:r.error})},this.onSessionPingRequest=async(i,r)=>{let{id:c}=r;try{this.isValidPing({topic:i}),await this.sendResult({id:c,topic:i,result:!0}),this.client.events.emit("session_ping",{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionPingResponse=(i,r)=>{let{id:c}=r;setTimeout(()=>{(0,eS.isJsonRpcResult)(r)?this.events.emit((0,C.E0)("session_ping",c),{}):(0,eS.isJsonRpcError)(r)&&this.events.emit((0,C.E0)("session_ping",c),{error:r.error})},500)},this.onSessionDeleteRequest=async(i,r)=>{let{id:c}=r;try{this.isValidDisconnect({topic:i,reason:r.params}),await Promise.all([new Promise(r=>{this.client.core.relayer.once(tD.publish,async()=>{r(await this.deleteSession(i))})}),this.sendResult({id:c,topic:i,result:!0})]),this.client.events.emit("session_delete",{id:c,topic:i})}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async(i,r)=>{let{id:c,params:l}=r;try{this.isValidRequest(dist_index_es_g({topic:i},l));let r=(0,C.rj)(JSON.stringify((0,eS.formatJsonRpcRequest)("wc_sessionRequest",l,c))),S=this.client.session.get(i),P=await this.getVerifyContext(r,S.peer.metadata),R={id:c,topic:i,params:l,verifyContext:P};await this.setPendingSessionRequest(R),this.addSessionRequestToSessionRequestQueue(R),this.processSessionRequestQueue()}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionRequestResponse=(i,r)=>{let{id:c}=r;(0,eS.isJsonRpcResult)(r)?this.events.emit((0,C.E0)("session_request",c),{result:r.result}):(0,eS.isJsonRpcError)(r)&&this.events.emit((0,C.E0)("session_request",c),{error:r.error})},this.onSessionEventRequest=async(i,r)=>{let{id:c,params:l}=r;try{let r=`${i}_session_event_${l.event.name}`,S=C.O6.get(r);if(S&&this.isRequestOutOfSync(S,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidEmit(dist_index_es_g({topic:i},l)),this.client.events.emit("session_event",{id:c,topic:i,params:l}),C.O6.set(r,c)}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.addSessionRequestToSessionRequestQueue=i=>{this.sessionRequestQueue.queue.push(i)},this.cleanupAfterResponse=i=>{this.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=iI.idle,this.processSessionRequestQueue()},(0,ey.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===iI.active){this.client.logger.info("session request queue is already active.");return}let i=this.sessionRequestQueue.queue[0];if(!i){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=iI.active,this.client.events.emit("session_request",i)}catch(i){this.client.logger.error(i)}},this.onPairingCreated=i=>{if(i.active)return;let r=this.client.proposal.getAll().find(r=>r.pairingTopic===i.topic);r&&this.onSessionProposeRequest(i.topic,(0,eS.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id))},this.isValidConnect=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw Error(r)}let{pairingTopic:r,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:S,relays:P}=i;if((0,C.o8)(r)||await this.isValidPairingTopic(r),!(0,C.PM)(P,!0)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`connect() relays: ${P}`);throw Error(i)}(0,C.o8)(c)||0===(0,C.L5)(c)||this.validateNamespaces(c,"requiredNamespaces"),(0,C.o8)(l)||0===(0,C.L5)(l)||this.validateNamespaces(l,"optionalNamespaces"),(0,C.o8)(S)||this.validateSessionProps(S,"sessionProperties")},this.validateNamespaces=(i,r)=>{let c=(0,C.n)(i,"connect()",r);if(c)throw Error(c.message)},this.isValidApprove=async i=>{if(!(0,C.EJ)(i))throw Error((0,C.Z7)("MISSING_OR_INVALID",`approve() params: ${i}`).message);let{id:r,namespaces:c,relayProtocol:l,sessionProperties:S}=i;await this.isValidProposalId(r);let P=this.client.proposal.get(r),R=(0,C.in)(c,"approve()");if(R)throw Error(R.message);let A=(0,C.rF)(P.requiredNamespaces,c,"approve()");if(A)throw Error(A.message);if(!(0,C.M_)(l,!0)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw Error(i)}(0,C.o8)(S)||this.validateSessionProps(S,"sessionProperties")},this.isValidReject=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`reject() params: ${i}`);throw Error(r)}let{id:r,reason:c}=i;if(await this.isValidProposalId(r),!(0,C.$t)(c)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw Error(i)}},this.isValidSessionSettleRequest=i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${i}`);throw Error(r)}let{relay:r,controller:c,namespaces:l,expiry:S}=i;if(!(0,C.Z2)(r)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(i)}let P=(0,C.Dd)(c,"onSessionSettleRequest()");if(P)throw Error(P.message);let R=(0,C.in)(l,"onSessionSettleRequest()");if(R)throw Error(R.message);if((0,C.Bw)(S)){let{message:i}=(0,C.Z7)("EXPIRED","onSessionSettleRequest()");throw Error(i)}},this.isValidUpdate=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`update() params: ${i}`);throw Error(r)}let{topic:r,namespaces:c}=i;await this.isValidSessionTopic(r);let l=this.client.session.get(r),S=(0,C.in)(c,"update()");if(S)throw Error(S.message);let P=(0,C.rF)(l.requiredNamespaces,c,"update()");if(P)throw Error(P.message)},this.isValidExtend=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`extend() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionTopic(r)},this.isValidRequest=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`request() params: ${i}`);throw Error(r)}let{topic:r,request:c,chainId:l,expiry:S}=i;await this.isValidSessionTopic(r);let{namespaces:P}=this.client.session.get(r);if(!(0,C.p8)(P,l)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`request() chainId: ${l}`);throw Error(i)}if(!(0,C.hH)(c)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(c)}`);throw Error(i)}if(!(0,C.al)(P,l,c.method)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`request() method: ${c.method}`);throw Error(i)}if(S&&!(0,C.ON)(S,ib)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`request() expiry: ${S}. Expiry must be a number (in seconds) between ${ib.min} and ${ib.max}`);throw Error(i)}},this.isValidRespond=async i=>{var r;if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`respond() params: ${i}`);throw Error(r)}let{topic:c,response:l}=i;try{await this.isValidSessionTopic(c)}catch(c){throw null!=(r=i?.response)&&r.id&&this.cleanupAfterResponse(i),c}if(!(0,C.JT)(l)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(l)}`);throw Error(i)}},this.isValidPing=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`emit() params: ${i}`);throw Error(r)}let{topic:r,event:c,chainId:l}=i;await this.isValidSessionTopic(r);let{namespaces:S}=this.client.session.get(r);if(!(0,C.p8)(S,l)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw Error(i)}if(!(0,C.nf)(c)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(i)}if(!(0,C.sI)(S,l,c.name)){let{message:i}=(0,C.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(i)}},this.isValidDisconnect=async i=>{if(!(0,C.EJ)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionOrPairingTopic(r)},this.getVerifyContext=async(i,r)=>{let c={verified:{verifyUrl:r.verifyUrl||tW,validation:"UNKNOWN",origin:r.url||""}};try{let l=await this.client.core.verify.resolve({attestationId:i,verifyUrl:r.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(i){this.client.logger.info(i)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(i,r)=>{Object.values(i).forEach(i=>{if(!(0,C.M_)(i,!1)){let{message:c}=(0,C.Z7)("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw Error(c)}})}}async isInitialized(){if(!this.initialized){let{message:i}=(0,C.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tD.message,async i=>{let{topic:r,message:c}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(c)))return;let l=await this.client.core.crypto.decode(r,c);try{(0,eS.isJsonRpcRequest)(l)?(this.client.core.history.set(r,l),this.onRelayEventRequest({topic:r,payload:l})):(0,eS.isJsonRpcResponse)(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:r,payload:l}),this.client.core.history.delete(r,l.id)):this.onRelayEventUnknownPayload({topic:r,payload:l})}catch(i){this.client.logger.error(i)}})}registerExpirerEvents(){this.client.core.expirer.on(tB.expired,async i=>{let{topic:r,id:c}=(0,C.iP)(i.target);if(c&&this.client.pendingRequest.keys.includes(c))return await this.deletePendingSessionRequest(c,(0,C.Z7)("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):c&&(await this.deleteProposal(c,!0),this.client.events.emit("proposal_expire",{id:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(tK.create,i=>this.onPairingCreated(i))}isValidPairingTopic(i){if(!(0,C.M_)(i,!1)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw Error(r)}if(!this.client.core.pairing.pairings.keys.includes(i)){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw Error(r)}if((0,C.Bw)(this.client.core.pairing.pairings.get(i).expiry)){let{message:r}=(0,C.Z7)("EXPIRED",`pairing topic: ${i}`);throw Error(r)}}async isValidSessionTopic(i){if(!(0,C.M_)(i,!1)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw Error(r)}if(!this.client.session.keys.includes(i)){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw Error(r)}if((0,C.Bw)(this.client.session.get(i).expiry)){await this.deleteSession(i);let{message:r}=(0,C.Z7)("EXPIRED",`session topic: ${i}`);throw Error(r)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if((0,C.M_)(i,!1)){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw Error(r)}else{let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw Error(r)}}async isValidProposalId(i){if(!(0,C.Q0)(i)){let{message:r}=(0,C.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw Error(r)}if(!this.client.proposal.keys.includes(i)){let{message:r}=(0,C.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw Error(r)}if((0,C.Bw)(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);let{message:r}=(0,C.Z7)("EXPIRED",`proposal id: ${i}`);throw Error(r)}}};let index_es_us=class index_es_us extends Kt{constructor(i,r){super(i,r,"proposal",id),this.core=i,this.logger=r}};let index_es_ue=class index_es_ue extends Kt{constructor(i,r){super(i,r,"session",id),this.core=i,this.logger=r}};let index_es_gs=class index_es_gs extends Kt{constructor(i,r){super(i,r,"request",id,i=>i.id),this.core=i,this.logger=r}};let index_es_Q=class index_es_Q extends b{constructor(i){super(i),this.protocol="wc",this.version=2,this.name=ig.name,this.events=new S.EventEmitter,this.on=(i,r)=>this.events.on(i,r),this.once=(i,r)=>this.events.once(i,r),this.off=(i,r)=>this.events.off(i,r),this.removeListener=(i,r)=>this.events.removeListener(i,r),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(i){throw this.logger.error(i.message),i}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(i){throw this.logger.error(i.message),i}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(i){throw this.logger.error(i.message),i}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(i){throw this.logger.error(i.message),i}},this.update=async i=>{try{return await this.engine.update(i)}catch(i){throw this.logger.error(i.message),i}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(i){throw this.logger.error(i.message),i}},this.request=async i=>{try{return await this.engine.request(i)}catch(i){throw this.logger.error(i.message),i}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(i){throw this.logger.error(i.message),i}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(i){throw this.logger.error(i.message),i}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(i){throw this.logger.error(i.message),i}},this.find=i=>{try{return this.engine.find(i)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=i?.name||ig.name,this.metadata=i?.metadata||(0,C.D)();let r="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,et.pino)((0,et.getDefaultLoggerOptions)({level:i?.logger||ig.logger}));this.core=i?.core||new te(i),this.logger=(0,et.generateChildLogger)(r,this.name),this.session=new index_es_ue(this.core,this.logger),this.proposal=new index_es_us(this.core,this.logger),this.pendingRequest=new index_es_gs(this.core,this.logger),this.engine=new index_es_ds(this)}static async init(i){let r=new index_es_Q(i);return await r.initialize(),r}get context(){return(0,et.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}};var iA=c(40174);let iN="error",iL="wc@2:universal_provider:",ij={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var iT="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},iz={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(i,r){(function(){var c,l="Expected a function",S="__lodash_hash_undefined__",P="__lodash_placeholder__",C=1/0,R=0/0,A=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],q="[object Arguments]",$="[object Array]",U="[object Boolean]",F="[object Date]",J="[object Error]",Q="[object Function]",X="[object GeneratorFunction]",ee="[object Map]",et="[object Number]",eo="[object Object]",ep="[object Promise]",eg="[object RegExp]",ey="[object Set]",em="[object String]",e_="[object Symbol]",ew="[object WeakMap]",eb="[object ArrayBuffer]",eI="[object DataView]",eE="[object Float32Array]",ex="[object Float64Array]",eS="[object Int8Array]",eP="[object Int16Array]",eC="[object Int32Array]",eO="[object Uint8Array]",eR="[object Uint8ClampedArray]",eA="[object Uint16Array]",eN="[object Uint32Array]",eL=/\b__p \+= '';/g,ej=/\b(__p \+=) '' \+/g,eT=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ez=/&(?:amp|lt|gt|quot|#39);/g,eD=/[&<>"']/g,ek=RegExp(ez.source),eM=RegExp(eD.source),eH=/<%-([\s\S]+?)%>/g,e$=/<%([\s\S]+?)%>/g,eU=/<%=([\s\S]+?)%>/g,eK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eV=/^\w*$/,eB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eG=/[\\^$.*+?()[\]{}|]/g,eW=RegExp(eG.source),eZ=/^\s+/,eF=/\s/,eJ=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eY=/\{\n\/\* \[wrapped with (.+)\] \*/,eQ=/,? & /,eX=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,e0=/[()=,{}\[\]\/\s]/,e1=/\\(\\)?/g,e5=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,e6=/\w*$/,e2=/^[-+]0x[0-9a-f]+$/i,e3=/^0b[01]+$/i,e9=/^\[object .+?Constructor\]$/,e8=/^0o[0-7]+$/i,e4=/^(?:0|[1-9]\d*)$/,e7=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,ta=/['\n\r\u2028\u2029\\]/g,to="\ud800-\udfff",tp="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ty="\\u2700-\\u27bf",tm="a-z\\xdf-\\xf6\\xf8-\\xff",t_="A-Z\\xc0-\\xd6\\xd8-\\xde",tw="\\ufe0e\\ufe0f",tb="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tI="['’]",tE="["+tb+"]",tx="["+tp+"]",tS="["+tm+"]",tP="[^"+to+tb+"\\d+"+ty+tm+t_+"]",tC="\ud83c[\udffb-\udfff]",tO="[^"+to+"]",tR="(?:\ud83c[\udde6-\uddff]){2}",tA="[\ud800-\udbff][\udc00-\udfff]",tN="["+t_+"]",tL="\\u200d",tj="(?:"+tS+"|"+tP+")",tT="(?:"+tI+"(?:d|ll|m|re|s|t|ve))?",tz="(?:"+tI+"(?:D|LL|M|RE|S|T|VE))?",tq="(?:"+tx+"|"+tC+")?",tD="["+tw+"]?",tk="(?:"+tL+"(?:"+[tO,tR,tA].join("|")+")"+tD+tq+")*",tM=tD+tq+tk,tH="(?:"+["["+ty+"]",tR,tA].join("|")+")"+tM,t$="(?:"+[tO+tx+"?",tx,tR,tA,"["+to+"]"].join("|")+")",tU=RegExp(tI,"g"),tK=RegExp(tx,"g"),tV=RegExp(tC+"(?="+tC+")|"+t$+tM,"g"),tB=RegExp([tN+"?"+tS+"+"+tT+"(?="+[tE,tN,"$"].join("|")+")","(?:"+tN+"|"+tP+")+"+tz+"(?="+[tE,tN+tj,"$"].join("|")+")",tN+"?"+tj+"+"+tT,tN+"+"+tz,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tH].join("|"),"g"),tG=RegExp("["+tL+to+tp+tw+"]"),tW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tZ=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tF=-1,tJ={};tJ[eE]=tJ[ex]=tJ[eS]=tJ[eP]=tJ[eC]=tJ[eO]=tJ[eR]=tJ[eA]=tJ[eN]=!0,tJ[q]=tJ[$]=tJ[eb]=tJ[U]=tJ[eI]=tJ[F]=tJ[J]=tJ[Q]=tJ[ee]=tJ[et]=tJ[eo]=tJ[eg]=tJ[ey]=tJ[em]=tJ[ew]=!1;var tY={};tY[q]=tY[$]=tY[eb]=tY[eI]=tY[U]=tY[F]=tY[eE]=tY[ex]=tY[eS]=tY[eP]=tY[eC]=tY[ee]=tY[et]=tY[eo]=tY[eg]=tY[ey]=tY[em]=tY[e_]=tY[eO]=tY[eR]=tY[eA]=tY[eN]=!0,tY[J]=tY[Q]=tY[ew]=!1;var tQ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tX=parseFloat,t0=parseInt,t1="object"==typeof iT&&iT&&iT.Object===Object&&iT,t5="object"==typeof self&&self&&self.Object===Object&&self,t6=t1||t5||Function("return this")(),t2=r&&!r.nodeType&&r,t3=t2&&i&&!i.nodeType&&i,t9=t3&&t3.exports===t2,t8=t9&&t1.process,t4=function(){try{return t3&&t3.require&&t3.require("util").types||t8&&t8.binding&&t8.binding("util")}catch{}}(),t7=t4&&t4.isArrayBuffer,ie=t4&&t4.isDate,ir=t4&&t4.isMap,io=t4&&t4.isRegExp,il=t4&&t4.isSet,iu=t4&&t4.isTypedArray;function cn(i,r,c){switch(c.length){case 0:return i.call(r);case 1:return i.call(r,c[0]);case 2:return i.call(r,c[0],c[1]);case 3:return i.call(r,c[0],c[1],c[2])}return i.apply(r,c)}function Vo(i,r,c,l){for(var S=-1,P=null==i?0:i.length;++S<P;){var C=i[S];r(l,C,c(C),i)}return l}function mn(i,r){for(var c=-1,l=null==i?0:i.length;++c<l&&!1!==r(i[c],c,i););return i}function ko(i,r){for(var c=null==i?0:i.length;c--&&!1!==r(i[c],c,i););return i}function As(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(!r(i[c],c,i))return!1;return!0}function jn(i,r){for(var c=-1,l=null==i?0:i.length,S=0,P=[];++c<l;){var C=i[c];r(C,c,i)&&(P[S++]=C)}return P}function Ee(i,r){return!!(null==i?0:i.length)&&Tt(i,r,0)>-1}function Dr(i,r,c){for(var l=-1,S=null==i?0:i.length;++l<S;)if(c(r,i[l]))return!0;return!1}function G(i,r){for(var c=-1,l=null==i?0:i.length,S=Array(l);++c<l;)S[c]=r(i[c],c,i);return S}function nt(i,r){for(var c=-1,l=r.length,S=i.length;++c<l;)i[S+c]=r[c];return i}function Hr(i,r,c,l){var S=-1,P=null==i?0:i.length;for(l&&P&&(c=i[++S]);++S<P;)c=r(c,i[S],S,i);return c}function jo(i,r,c,l){var S=null==i?0:i.length;for(l&&S&&(c=i[--S]);S--;)c=r(c,i[S],S,i);return c}function Nr(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(r(i[c],c,i))return!0;return!1}var id=$r("length");function tf(i){return i.split("")}function ef(i){return i.match(eX)||[]}function Cs(i,r,c){var l;return c(i,function(i,c,S){if(r(i,c,S))return l=c,!1}),l}function ye(i,r,c,l){for(var S=i.length,P=c+(l?1:-1);l?P--:++P<S;)if(r(i[P],P,i))return P;return -1}function Tt(i,r,c){return r==r?gf(i,r,c):ye(i,Is,c)}function rf(i,r,c,l){for(var S=c-1,P=i.length;++S<P;)if(l(i[S],r))return S;return -1}function Is(i){return i!=i}function xs(i,r){var c=null==i?0:i.length;return c?Wr(i,r)/c:R}function $r(i){return function(r){return null==r?c:r[i]}}function Ur(i){return function(r){return null==i?c:i[r]}}function Es(i,r,c,l,S){return S(i,function(i,S,P){c=l?(l=!1,i):r(c,i,S,P)}),c}function sf(i,r){var c=i.length;for(i.sort(r);c--;)i[c]=i[c].value;return i}function Wr(i,r){for(var l,S=-1,P=i.length;++S<P;){var C=r(i[S]);C!==c&&(l=l===c?C:l+C)}return l}function Fr(i,r){for(var c=-1,l=Array(i);++c<i;)l[c]=r(c);return l}function uf(i,r){return G(r,function(r){return[r,i[r]]})}function ys(i){return i&&i.slice(0,bs(i)+1).replace(eZ,"")}function hn(i){return function(r){return i(r)}}function Mr(i,r){return G(r,function(r){return i[r]})}function jt(i,r){return i.has(r)}function Ss(i,r){for(var c=-1,l=i.length;++c<l&&Tt(r,i[c],0)>-1;);return c}function Os(i,r){for(var c=i.length;c--&&Tt(r,i[c],0)>-1;);return c}function af(i,r){for(var c=i.length,l=0;c--;)i[c]===r&&++l;return l}var ig=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),iy=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(i){return"\\"+tQ[i]}function hf(i,r){return null==i?c:i[r]}function Lt(i){return tG.test(i)}function lf(i){return tW.test(i)}function pf(i){for(var r,c=[];!(r=i.next()).done;)c.push(r.value);return c}function qr(i){var r=-1,c=Array(i.size);return i.forEach(function(i,l){c[++r]=[l,i]}),c}function Rs(i,r){return function(c){return i(r(c))}}function tt(i,r){for(var c=-1,l=i.length,S=0,C=[];++c<l;){var R=i[c];(R===r||R===P)&&(i[c]=P,C[S++]=c)}return C}function Se(i){var r=-1,c=Array(i.size);return i.forEach(function(i){c[++r]=i}),c}function df(i){var r=-1,c=Array(i.size);return i.forEach(function(i){c[++r]=[i,i]}),c}function gf(i,r,c){for(var l=c-1,S=i.length;++l<S;)if(i[l]===r)return l;return -1}function vf(i,r,c){for(var l=c+1;l--&&i[l]!==r;);return l}function Dt(i){return Lt(i)?mf(i):id(i)}function On(i){return Lt(i)?wf(i):tf(i)}function bs(i){for(var r=i.length;r--&&eF.test(i.charAt(r)););return r}var im=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function mf(i){for(var r=tV.lastIndex=0;tV.test(i);)++r;return r}function wf(i){return i.match(tV)||[]}function Pf(i){return i.match(tB)||[]}var i_=function h(i){var r,eF,eX=(i=null==i?t6:i_.defaults(t6.Object(),i,i_.pick(t6,tZ))).Array,to=i.Date,tp=i.Error,ty=i.Function,tm=i.Math,t_=i.Object,tw=i.RegExp,tb=i.String,tI=i.TypeError,tE=eX.prototype,tx=ty.prototype,tS=t_.prototype,tP=i["__core-js_shared__"],tC=tx.toString,tO=tS.hasOwnProperty,tR=0,tA=(r=/[^.]+$/.exec(tP&&tP.keys&&tP.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",tN=tS.toString,tL=tC.call(t_),tj=t6._,tT=tw("^"+tC.call(tO).replace(eG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tz=t9?i.Buffer:c,tq=i.Symbol,tD=i.Uint8Array,tk=tz?tz.allocUnsafe:c,tM=Rs(t_.getPrototypeOf,t_),tH=t_.create,t$=tS.propertyIsEnumerable,tV=tE.splice,tB=tq?tq.isConcatSpreadable:c,tG=tq?tq.iterator:c,tW=tq?tq.toStringTag:c,tQ=function(){try{var i=mt(t_,"defineProperty");return i({},"",{}),i}catch{}}(),t1=i.clearTimeout!==t6.clearTimeout&&i.clearTimeout,t5=to&&to.now!==t6.Date.now&&to.now,t2=i.setTimeout!==t6.setTimeout&&i.setTimeout,t3=tm.ceil,t8=tm.floor,t4=t_.getOwnPropertySymbols,id=tz?tz.isBuffer:c,iw=i.isFinite,ib=tE.join,iI=Rs(t_.keys,t_),iE=tm.max,ix=tm.min,iS=to.now,iP=i.parseInt,iC=tm.random,iO=tE.reverse,iR=mt(i,"DataView"),iA=mt(i,"Map"),iN=mt(i,"Promise"),iL=mt(i,"Set"),ij=mt(i,"WeakMap"),iT=mt(t_,"create"),iz=ij&&new ij,iq={},iD=wt(iR),ik=wt(iA),iM=wt(iN),iH=wt(iL),i$=wt(ij),iU=tq?tq.prototype:c,iK=iU?iU.valueOf:c,iV=iU?iU.toString:c;function a(i){if(Y(i)&&!rF(i)&&!(i instanceof H)){if(i instanceof Pn)return i;if(tO.call(i,"__wrapped__"))return Fu(i)}return new Pn(i)}var iB=function(){function n(){}return function(i){if(!K(i))return{};if(tH)return tH(i);n.prototype=i;var r=new n;return n.prototype=c,r}}();function qe(){}function Pn(i,r){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=c}function H(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Bf(){var i=new H(this.__wrapped__);return i.__actions__=un(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=un(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=un(this.__views__),i}function Gf(){if(this.__filtered__){var i=new H(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function zf(){var i=this.__wrapped__.value(),r=this.__dir__,c=rF(i),l=r<0,S=c?i.length:0,P=eh(0,S,this.__views__),C=P.start,R=P.end,A=R-C,q=l?R:C-1,$=this.__iteratees__,U=$.length,F=0,J=ix(A,this.__takeCount__);if(!c||!l&&S==A&&J==A)return ou(i,this.__actions__);var Q=[];e:for(;A--&&F<J;){q+=r;for(var X=-1,ee=i[q];++X<U;){var et=$[X],eo=et.iteratee,ep=et.type,eg=eo(ee);if(2==ep)ee=eg;else if(!eg){if(1==ep)continue e;break e}}Q[F++]=ee}return Q}function dt(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function Kf(){this.__data__=iT?iT(null):{},this.size=0}function Yf(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r}function Zf(i){var r=this.__data__;if(iT){var l=r[i];return l===S?c:l}return tO.call(r,i)?r[i]:c}function Jf(i){var r=this.__data__;return iT?r[i]!==c:tO.call(r,i)}function Xf(i,r){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=iT&&r===c?S:r,this}function Bn(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function Qf(){this.__data__=[],this.size=0}function Vf(i){var r=this.__data__,c=Be(r,i);return!(c<0)&&(c==r.length-1?r.pop():tV.call(r,c,1),--this.size,!0)}function kf(i){var r=this.__data__,l=Be(r,i);return l<0?c:r[l][1]}function jf(i){return Be(this.__data__,i)>-1}function nc(i,r){var c=this.__data__,l=Be(c,i);return l<0?(++this.size,c.push([i,r])):c[l][1]=r,this}function Gn(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function tc(){this.size=0,this.__data__={hash:new dt,map:new(iA||Bn),string:new dt}}function ec(i){var r=nr(this,i).delete(i);return this.size-=r?1:0,r}function rc(i){return nr(this,i).get(i)}function ic(i){return nr(this,i).has(i)}function sc(i,r){var c=nr(this,i),l=c.size;return c.set(i,r),this.size+=c.size==l?0:1,this}function gt(i){var r=-1,c=null==i?0:i.length;for(this.__data__=new Gn;++r<c;)this.add(i[r])}function uc(i){return this.__data__.set(i,S),this}function ac(i){return this.__data__.has(i)}function Rn(i){var r=this.__data__=new Bn(i);this.size=r.size}function oc(){this.__data__=new Bn,this.size=0}function fc(i){var r=this.__data__,c=r.delete(i);return this.size=r.size,c}function cc(i){return this.__data__.get(i)}function hc(i){return this.__data__.has(i)}function lc(i,r){var c=this.__data__;if(c instanceof Bn){var l=c.__data__;if(!iA||l.length<199)return l.push([i,r]),this.size=++c.size,this;c=this.__data__=new Gn(l)}return c.set(i,r),this.size=c.size,this}function Fs(i,r){var c=rF(i),l=!c&&rZ(i),S=!c&&!l&&rY(i),P=!c&&!l&&!S&&r5(i),C=c||l||S||P,R=C?Fr(i.length,tb):[],A=R.length;for(var q in i)(r||tO.call(i,q))&&!(C&&("length"==q||S&&("offset"==q||"parent"==q)||P&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||Zn(q,A)))&&R.push(q);return R}function Ms(i){var r=i.length;return r?i[ei(0,r-1)]:c}function pc(i,r){return tr(un(i),vt(r,0,i.length))}function dc(i){return tr(un(i))}function Yr(i,r,l){(l===c||bn(i[r],l))&&(l!==c||r in i)||zn(i,r,l)}function se(i,r,l){var S=i[r];tO.call(i,r)&&bn(S,l)&&(l!==c||r in i)||zn(i,r,l)}function Be(i,r){for(var c=i.length;c--;)if(bn(i[c][0],r))return c;return -1}function gc(i,r,c,l){return iG(i,function(i,S,P){r(l,i,c(i),P)}),l}function qs(i,r){return i&&Un(r,V(r),i)}function vc(i,r){return i&&Un(r,on(r),i)}function zn(i,r,c){"__proto__"==r&&tQ?tQ(i,r,{configurable:!0,enumerable:!0,value:c,writable:!0}):i[r]=c}function Zr(i,r){for(var l=-1,S=r.length,P=eX(S),C=null==i;++l<S;)P[l]=C?c:Si(i,r[l]);return P}function vt(i,r,l){return i==i&&(l!==c&&(i=i<=l?i:l),r!==c&&(i=i>=r?i:r)),i}function An(i,r,l,S,P,C){var R,A=1&r,$=2&r,U=4&r;if(l&&(R=P?l(i,S,P,C):l(i)),R!==c)return R;if(!K(i))return i;var F=rF(i);if(F){if(R=ih(i),!A)return un(i,R)}else{var J=i2(i),ee=J==Q||J==X;if(rY(i))return hu(i,A);if(J==eo||J==q||ee&&!P){if(R=$||ee?{}:bu(i),!A)return $?Zc(i,vc(R,i)):Yc(i,qs(R,i))}else{if(!tY[J])return P?i:{};R=sh(i,J,A)}}C||(C=new Rn);var et=C.get(i);if(et)return et;C.set(i,R),r1(i)?i.forEach(function(c){R.add(An(c,r,l,c,i,C))}):rX(i)&&i.forEach(function(c,S){R.set(S,An(c,r,l,S,i,C))});var ep=U?$?pi:li:$?on:V,eg=F?c:ep(i);return mn(eg||i,function(c,S){eg&&(c=i[S=c]),se(R,S,An(c,r,l,S,i,C))}),R}function _c(i){var r=V(i);return function(c){return Bs(c,i,r)}}function Bs(i,r,l){var S=l.length;if(null==i)return!S;for(i=t_(i);S--;){var P=l[S],C=r[P],R=i[P];if(R===c&&!(P in i)||!C(R))return!1}return!0}function Gs(i,r,S){if("function"!=typeof i)throw new tI(l);return i8(function(){i.apply(c,S)},r)}function ue(i,r,c,l){var S=-1,P=Ee,C=!0,R=i.length,A=[],q=r.length;if(!R)return A;c&&(r=G(r,hn(c))),l?(P=Dr,C=!1):r.length>=200&&(P=jt,C=!1,r=new gt(r));e:for(;++S<R;){var $=i[S],U=null==c?$:c($);if($=l||0!==$?$:0,C&&U==U){for(var F=q;F--;)if(r[F]===U)continue e;A.push($)}else P(r,U,l)||A.push($)}return A}a.templateSettings={escape:eH,evaluate:e$,interpolate:eU,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=iB(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=iB(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=Kf,dt.prototype.delete=Yf,dt.prototype.get=Zf,dt.prototype.has=Jf,dt.prototype.set=Xf,Bn.prototype.clear=Qf,Bn.prototype.delete=Vf,Bn.prototype.get=kf,Bn.prototype.has=jf,Bn.prototype.set=nc,Gn.prototype.clear=tc,Gn.prototype.delete=ec,Gn.prototype.get=rc,Gn.prototype.has=ic,Gn.prototype.set=sc,gt.prototype.add=gt.prototype.push=uc,gt.prototype.has=ac,Rn.prototype.clear=oc,Rn.prototype.delete=fc,Rn.prototype.get=cc,Rn.prototype.has=hc,Rn.prototype.set=lc;var iG=vu($n),iW=vu(Xr,!0);function mc(i,r){var c=!0;return iG(i,function(i,l,S){return c=!!r(i,l,S)}),c}function Ge(i,r,l){for(var S=-1,P=i.length;++S<P;){var C=i[S],R=r(C);if(null!=R&&(A===c?R==R&&!pn(R):l(R,A)))var A=R,q=C}return q}function wc(i,r,l,S){var P=i.length;for((l=b(l))<0&&(l=-l>P?0:P+l),(S=S===c||S>P?P:b(S))<0&&(S+=P),S=l>S?0:aa(S);l<S;)i[l++]=r;return i}function Ks(i,r){var c=[];return iG(i,function(i,l,S){r(i,l,S)&&c.push(i)}),c}function j(i,r,c,l,S){var P=-1,C=i.length;for(c||(c=ah),S||(S=[]);++P<C;){var R=i[P];r>0&&c(R)?r>1?j(R,r-1,c,l,S):nt(S,R):l||(S[S.length]=R)}return S}var iZ=_u(),iF=_u(!0);function $n(i,r){return i&&iZ(i,r,V)}function Xr(i,r){return i&&iF(i,r,V)}function ze(i,r){return jn(r,function(r){return Jn(i[r])})}function _t(i,r){r=st(r,i);for(var l=0,S=r.length;null!=i&&l<S;)i=i[Wn(r[l++])];return l&&l==S?i:c}function Zs(i,r,c){var l=r(i);return rF(i)?l:nt(l,c(i))}function en(i){return null==i?i===c?"[object Undefined]":"[object Null]":tW&&tW in t_(i)?th(i):dh(i)}function Qr(i,r){return i>r}function Pc(i,r){return null!=i&&tO.call(i,r)}function Ac(i,r){return null!=i&&r in t_(i)}function Cc(i,r,c){return i>=ix(r,c)&&i<iE(r,c)}function Vr(i,r,l){for(var S=l?Dr:Ee,P=i[0].length,C=i.length,R=C,A=eX(C),q=1/0,$=[];R--;){var U=i[R];R&&r&&(U=G(U,hn(r))),q=ix(U.length,q),A[R]=!l&&(r||P>=120&&U.length>=120)?new gt(R&&U):c}U=i[0];var F=-1,J=A[0];e:for(;++F<P&&$.length<q;){var Q=U[F],X=r?r(Q):Q;if(Q=l||0!==Q?Q:0,!(J?jt(J,X):S($,X,l))){for(R=C;--R;){var ee=A[R];if(!(ee?jt(ee,X):S(i[R],X,l)))continue e}J&&J.push(X),$.push(Q)}}return $}function Ic(i,r,c,l){return $n(i,function(i,S,P){r(l,c(i),S,P)}),l}function ae(i,r,l){r=st(r,i);var S=null==(i=Hu(i,r))?i:i[Wn(In(r))];return null==S?c:cn(S,i,l)}function Js(i){return Y(i)&&en(i)==q}function xc(i){return Y(i)&&en(i)==eb}function Ec(i){return Y(i)&&en(i)==F}function oe(i,r,c,l,S){return i===r||(null!=i&&null!=r&&(Y(i)||Y(r))?yc(i,r,c,l,oe,S):i!=i&&r!=r)}function yc(i,r,c,l,S,P){var C=rF(i),R=rF(r),A=C?$:i2(i),U=R?$:i2(r);A=A==q?eo:A,U=U==q?eo:U;var F=A==eo,J=U==eo,Q=A==U;if(Q&&rY(i)){if(!rY(r))return!1;C=!0,F=!1}if(Q&&!F)return P||(P=new Rn),C||r5(i)?Su(i,r,c,l,S,P):jc(i,r,A,c,l,S,P);if(!(1&c)){var X=F&&tO.call(i,"__wrapped__"),ee=J&&tO.call(r,"__wrapped__");if(X||ee){var et=X?i.value():i,ep=ee?r.value():r;return P||(P=new Rn),S(et,ep,c,l,P)}}return!!Q&&(P||(P=new Rn),nh(i,r,c,l,S,P))}function Sc(i){return Y(i)&&i2(i)==ee}function kr(i,r,l,S){var P=l.length,C=P,R=!S;if(null==i)return!C;for(i=t_(i);P--;){var A=l[P];if(R&&A[2]?A[1]!==i[A[0]]:!(A[0]in i))return!1}for(;++P<C;){var q=(A=l[P])[0],$=i[q],U=A[1];if(R&&A[2]){if($===c&&!(q in i))return!1}else{var F=new Rn;if(S)var J=S($,U,q,i,r,F);if(!(J===c?oe(U,$,3,S,F):J))return!1}}return!0}function Xs(i){return!(!K(i)||fh(i))&&(Jn(i)?tT:e9).test(wt(i))}function Oc(i){return Y(i)&&en(i)==eg}function Rc(i){return Y(i)&&i2(i)==ey}function bc(i){return Y(i)&&ar(i.length)&&!!tJ[en(i)]}function Qs(i){return"function"==typeof i?i:null==i?fn:"object"==typeof i?rF(i)?js(i[0],i[1]):ks(i):ma(i)}function jr(i){if(!he(i))return iI(i);var r=[];for(var c in t_(i))tO.call(i,c)&&"constructor"!=c&&r.push(c);return r}function Tc(i){if(!K(i))return ph(i);var r=he(i),c=[];for(var l in i)"constructor"==l&&(r||!tO.call(i,l))||c.push(l);return c}function ni(i,r){return i<r}function Vs(i,r){var c=-1,l=an(i)?eX(i.length):[];return iG(i,function(i,S,P){l[++c]=r(i,S,P)}),l}function ks(i){var r=gi(i);return 1==r.length&&r[0][2]?Lu(r[0][0],r[0][1]):function(c){return c===i||kr(c,i,r)}}function js(i,r){var l;return _i(i)&&(l=r)==l&&!K(l)?Lu(Wn(i),r):function(l){var S=Si(l,i);return S===c&&S===r?Oi(l,i):oe(r,S,3)}}function Ke(i,r,l,S,P){i!==r&&iZ(r,function(C,R){if(P||(P=new Rn),K(C))Lc(i,r,R,l,Ke,S,P);else{var A=S?S(wi(i,R),C,R+"",i,r,P):c;A===c&&(A=C),Yr(i,R,A)}},on)}function Lc(i,r,l,S,P,C,R){var A=wi(i,l),q=wi(r,l),$=R.get(q);if($){Yr(i,l,$);return}var U=C?C(A,q,l+"",i,r,R):c,F=U===c;if(F){var J=rF(q),Q=!J&&rY(q),X=!J&&!Q&&r5(q);U=q,J||Q||X?rF(A)?U=A:Z(A)?U=un(A):Q?(F=!1,U=hu(q,!0)):X?(F=!1,U=lu(q,!0)):U=[]:pe(q)||rZ(q)?(U=A,rZ(A)?U=oa(A):(!K(A)||Jn(A))&&(U=bu(q))):F=!1}F&&(R.set(q,U),P(U,q,S,C,R),R.delete(q)),Yr(i,l,U)}function nu(i,r){var l=i.length;if(l)return Zn(r+=r<0?l:0,l)?i[r]:c}function tu(i,r,c){r=r.length?G(r,function(i){return rF(i)?function(r){return _t(r,1===i.length?i[0]:i)}:i}):[fn];var l=-1;return r=G(r,hn(x())),sf(Vs(i,function(i,c,S){return{criteria:G(r,function(r){return r(i)}),index:++l,value:i}}),function(i,r){return Kc(i,r,c)})}function Dc(i,r){return eu(i,r,function(r,c){return Oi(i,c)})}function eu(i,r,c){for(var l=-1,S=r.length,P={};++l<S;){var C=r[l],R=_t(i,C);c(R,C)&&fe(P,st(C,i),R)}return P}function Hc(i){return function(r){return _t(r,i)}}function ti(i,r,c,l){var S=l?rf:Tt,P=-1,C=r.length,R=i;for(i===r&&(r=un(r)),c&&(R=G(i,hn(c)));++P<C;)for(var A=0,q=r[P],$=c?c(q):q;(A=S(R,$,A,l))>-1;)R!==i&&tV.call(R,A,1),tV.call(i,A,1);return i}function ru(i,r){for(var c=i?r.length:0,l=c-1;c--;){var S=r[c];if(c==l||S!==P){var P=S;Zn(S)?tV.call(i,S,1):si(i,S)}}return i}function ei(i,r){return i+t8(iC()*(r-i+1))}function Nc(i,r,c,l){for(var S=-1,P=iE(t3((r-i)/(c||1)),0),C=eX(P);P--;)C[l?P:++S]=i,i+=c;return C}function ri(i,r){var c="";if(!i||r<1||r>9007199254740991)return c;do r%2&&(c+=i),(r=t8(r/2))&&(i+=i);while(r);return c}function L(i,r){return i4(Du(i,r,fn),i+"")}function $c(i){return Ms(Gt(i))}function Uc(i,r){var c=Gt(i);return tr(c,vt(r,0,c.length))}function fe(i,r,l,S){if(!K(i))return i;r=st(r,i);for(var P=-1,C=r.length,R=C-1,A=i;null!=A&&++P<C;){var q=Wn(r[P]),$=l;if("__proto__"===q||"constructor"===q||"prototype"===q)break;if(P!=R){var U=A[q];($=S?S(U,q,A):c)===c&&($=K(U)?U:Zn(r[P+1])?[]:{})}se(A,q,$),A=A[q]}return i}var iJ=iz?function(i,r){return iz.set(i,r),i}:fn,iY=tQ?function(i,r){return tQ(i,"toString",{configurable:!0,enumerable:!1,value:bi(r),writable:!0})}:fn;function Fc(i){return tr(Gt(i))}function Cn(i,r,c){var l=-1,S=i.length;r<0&&(r=-r>S?0:S+r),(c=c>S?S:c)<0&&(c+=S),S=r>c?0:c-r>>>0,r>>>=0;for(var P=eX(S);++l<S;)P[l]=i[l+r];return P}function Mc(i,r){var c;return iG(i,function(i,l,S){return!(c=r(i,l,S))}),!!c}function Ye(i,r,c){var l=0,S=null==i?l:i.length;if("number"==typeof r&&r==r&&S<=2147483647){for(;l<S;){var P=l+S>>>1,C=i[P];null!==C&&!pn(C)&&(c?C<=r:C<r)?l=P+1:S=P}return S}return ii(i,r,fn,c)}function ii(i,r,l,S){var P=0,C=null==i?0:i.length;if(0===C)return 0;r=l(r);for(var R=r!=r,A=null===r,q=pn(r),$=r===c;P<C;){var U=t8((P+C)/2),F=l(i[U]),J=F!==c,Q=null===F,X=F==F,ee=pn(F);if(R)var et=S||X;else et=$?X&&(S||J):A?X&&J&&(S||!Q):q?X&&J&&!Q&&(S||!ee):!Q&&!ee&&(S?F<=r:F<r);et?P=U+1:C=U}return ix(C,4294967294)}function su(i,r){for(var c=-1,l=i.length,S=0,P=[];++c<l;){var C=i[c],R=r?r(C):C;if(!c||!bn(R,A)){var A=R;P[S++]=0===C?0:C}}return P}function uu(i){return"number"==typeof i?i:pn(i)?R:+i}function ln(i){if("string"==typeof i)return i;if(rF(i))return G(i,ln)+"";if(pn(i))return iV?iV.call(i):"";var r=i+"";return"0"==r&&1/i==-C?"-0":r}function it(i,r,c){var l=-1,S=Ee,P=i.length,C=!0,R=[],A=R;if(c)C=!1,S=Dr;else if(P>=200){var q=r?null:i0(i);if(q)return Se(q);C=!1,S=jt,A=new gt}else A=r?[]:R;e:for(;++l<P;){var $=i[l],U=r?r($):$;if($=c||0!==$?$:0,C&&U==U){for(var F=A.length;F--;)if(A[F]===U)continue e;r&&A.push(U),R.push($)}else S(A,U,c)||(A!==R&&A.push(U),R.push($))}return R}function si(i,r){return r=st(r,i),null==(i=Hu(i,r))||delete i[Wn(In(r))]}function au(i,r,c,l){return fe(i,r,c(_t(i,r)),l)}function Ze(i,r,c,l){for(var S=i.length,P=l?S:-1;(l?P--:++P<S)&&r(i[P],P,i););return c?Cn(i,l?0:P,l?P+1:S):Cn(i,l?P+1:0,l?S:P)}function ou(i,r){var c=i;return c instanceof H&&(c=c.value()),Hr(r,function(i,r){return r.func.apply(r.thisArg,nt([i],r.args))},c)}function ui(i,r,c){var l=i.length;if(l<2)return l?it(i[0]):[];for(var S=-1,P=eX(l);++S<l;)for(var C=i[S],R=-1;++R<l;)R!=S&&(P[S]=ue(P[S]||C,i[R],r,c));return it(j(P,1),r,c)}function fu(i,r,l){for(var S=-1,P=i.length,C=r.length,R={};++S<P;){var A=S<C?r[S]:c;l(R,i[S],A)}return R}function ai(i){return Z(i)?i:[]}function oi(i){return"function"==typeof i?i:fn}function st(i,r){return rF(i)?i:_i(i,r)?[i]:i7(W(i))}var iQ=L;function ut(i,r,l){var S=i.length;return l=l===c?S:l,!r&&l>=S?i:Cn(i,r,l)}var iX=t1||function(i){return t6.clearTimeout(i)};function hu(i,r){if(r)return i.slice();var c=i.length,l=tk?tk(c):new i.constructor(c);return i.copy(l),l}function fi(i){var r=new i.constructor(i.byteLength);return new tD(r).set(new tD(i)),r}function Bc(i,r){var c=r?fi(i.buffer):i.buffer;return new i.constructor(c,i.byteOffset,i.byteLength)}function Gc(i){var r=new i.constructor(i.source,e6.exec(i));return r.lastIndex=i.lastIndex,r}function zc(i){return iK?t_(iK.call(i)):{}}function lu(i,r){var c=r?fi(i.buffer):i.buffer;return new i.constructor(c,i.byteOffset,i.length)}function pu(i,r){if(i!==r){var l=i!==c,S=null===i,P=i==i,C=pn(i),R=r!==c,A=null===r,q=r==r,$=pn(r);if(!A&&!$&&!C&&i>r||C&&R&&q&&!A&&!$||S&&R&&q||!l&&q||!P)return 1;if(!S&&!C&&!$&&i<r||$&&l&&P&&!S&&!C||A&&l&&P||!R&&P||!q)return -1}return 0}function Kc(i,r,c){for(var l=-1,S=i.criteria,P=r.criteria,C=S.length,R=c.length;++l<C;){var A=pu(S[l],P[l]);if(A){if(l>=R)return A;return A*("desc"==c[l]?-1:1)}}return i.index-r.index}function du(i,r,c,l){for(var S=-1,P=i.length,C=c.length,R=-1,A=r.length,q=iE(P-C,0),$=eX(A+q),U=!l;++R<A;)$[R]=r[R];for(;++S<C;)(U||S<P)&&($[c[S]]=i[S]);for(;q--;)$[R++]=i[S++];return $}function gu(i,r,c,l){for(var S=-1,P=i.length,C=-1,R=c.length,A=-1,q=r.length,$=iE(P-R,0),U=eX($+q),F=!l;++S<$;)U[S]=i[S];for(var J=S;++A<q;)U[J+A]=r[A];for(;++C<R;)(F||S<P)&&(U[J+c[C]]=i[S++]);return U}function un(i,r){var c=-1,l=i.length;for(r||(r=eX(l));++c<l;)r[c]=i[c];return r}function Un(i,r,l,S){var P=!l;l||(l={});for(var C=-1,R=r.length;++C<R;){var A=r[C],q=S?S(l[A],i[A],A,l,i):c;q===c&&(q=i[A]),P?zn(l,A,q):se(l,A,q)}return l}function Yc(i,r){return Un(i,i5(i),r)}function Zc(i,r){return Un(i,i6(i),r)}function Je(i,r){return function(c,l){var S=rF(c)?Vo:gc,P=r?r():{};return S(c,i,x(l,2),P)}}function Ft(i){return L(function(r,l){var S=-1,P=l.length,C=P>1?l[P-1]:c,R=P>2?l[2]:c;for(C=i.length>3&&"function"==typeof C?(P--,C):c,R&&rn(l[0],l[1],R)&&(C=P<3?c:C,P=1),r=t_(r);++S<P;){var A=l[S];A&&i(r,A,S,C)}return r})}function vu(i,r){return function(c,l){if(null==c)return c;if(!an(c))return i(c,l);for(var S=c.length,P=r?S:-1,C=t_(c);(r?P--:++P<S)&&!1!==l(C[P],P,C););return c}}function _u(i){return function(r,c,l){for(var S=-1,P=t_(r),C=l(r),R=C.length;R--;){var A=C[i?R:++S];if(!1===c(P[A],A,P))break}return r}}function Jc(i,r,c){var l=1&r,S=ce(i);function o(){return(this&&this!==t6&&this instanceof o?S:i).apply(l?c:this,arguments)}return o}function mu(i){return function(r){var l=Lt(r=W(r))?On(r):c,S=l?l[0]:r.charAt(0),P=l?ut(l,1).join(""):r.slice(1);return S[i]()+P}}function Mt(i){return function(r){return Hr(va(ga(r).replace(tU,"")),i,"")}}function ce(i){return function(){var r=arguments;switch(r.length){case 0:return new i;case 1:return new i(r[0]);case 2:return new i(r[0],r[1]);case 3:return new i(r[0],r[1],r[2]);case 4:return new i(r[0],r[1],r[2],r[3]);case 5:return new i(r[0],r[1],r[2],r[3],r[4]);case 6:return new i(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new i(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var c=iB(i.prototype),l=i.apply(c,r);return K(l)?l:c}}function Xc(i,r,l){var S=ce(i);function s(){for(var P=arguments.length,C=eX(P),R=P,A=qt(s);R--;)C[R]=arguments[R];var q=P<3&&C[0]!==A&&C[P-1]!==A?[]:tt(C,A);return(P-=q.length)<l?Iu(i,r,Xe,s.placeholder,c,C,q,c,c,l-P):cn(this&&this!==t6&&this instanceof s?S:i,this,C)}return s}function wu(i){return function(r,l,S){var P=t_(r);if(!an(r)){var C=x(l,3);r=V(r),l=function(i){return C(P[i],i,P)}}var R=i(r,l,S);return R>-1?P[C?r[R]:R]:c}}function Pu(i){return Yn(function(r){var S=r.length,P=S,C=Pn.prototype.thru;for(i&&r.reverse();P--;){var R=r[P];if("function"!=typeof R)throw new tI(l);if(C&&!A&&"wrapper"==je(R))var A=new Pn([],!0)}for(P=A?P:S;++P<S;){var q=je(R=r[P]),$="wrapper"==q?i1(R):c;A=$&&mi($[0])&&424==$[1]&&!$[4].length&&1==$[9]?A[je($[0])].apply(A,$[3]):1==R.length&&mi(R)?A[q]():A.thru(R)}return function(){var i=arguments,c=i[0];if(A&&1==i.length&&rF(c))return A.plant(c).value();for(var l=0,P=S?r[l].apply(this,i):c;++l<S;)P=r[l].call(this,P);return P}})}function Xe(i,r,l,S,P,C,R,A,q,$){var U=128&r,F=1&r,J=2&r,Q=24&r,X=512&r,ee=J?c:ce(i);function y(){for(var c=arguments.length,et=eX(c),eo=c;eo--;)et[eo]=arguments[eo];if(Q)var ep=qt(y),eg=af(et,ep);if(S&&(et=du(et,S,P,Q)),C&&(et=gu(et,C,R,Q)),c-=eg,Q&&c<$){var ey=tt(et,ep);return Iu(i,r,Xe,y.placeholder,l,et,ey,A,q,$-c)}var em=F?l:this,e_=J?em[i]:i;return c=et.length,A?et=gh(et,A):X&&c>1&&et.reverse(),U&&q<c&&(et.length=q),this&&this!==t6&&this instanceof y&&(e_=ee||ce(e_)),e_.apply(em,et)}return y}function Au(i,r){return function(c,l){return Ic(c,i,r(l),{})}}function Qe(i,r){return function(l,S){var P;if(l===c&&S===c)return r;if(l!==c&&(P=l),S!==c){if(P===c)return S;"string"==typeof l||"string"==typeof S?(l=ln(l),S=ln(S)):(l=uu(l),S=uu(S)),P=i(l,S)}return P}}function ci(i){return Yn(function(r){return r=G(r,hn(x())),L(function(c){var l=this;return i(r,function(i){return cn(i,l,c)})})})}function Ve(i,r){var l=(r=r===c?" ":ln(r)).length;if(l<2)return l?ri(r,i):r;var S=ri(r,t3(i/Dt(r)));return Lt(r)?ut(On(S),0,i).join(""):S.slice(0,i)}function Qc(i,r,c,l){var S=1&r,P=ce(i);function f(){for(var r=-1,C=arguments.length,R=-1,A=l.length,q=eX(A+C),$=this&&this!==t6&&this instanceof f?P:i;++R<A;)q[R]=l[R];for(;C--;)q[R++]=arguments[++r];return cn($,S?c:this,q)}return f}function Cu(i){return function(r,l,S){return S&&"number"!=typeof S&&rn(r,l,S)&&(l=S=c),r=Xn(r),l===c?(l=r,r=0):l=Xn(l),S=S===c?r<l?1:-1:Xn(S),Nc(r,l,S,i)}}function ke(i){return function(r,c){return"string"==typeof r&&"string"==typeof c||(r=xn(r),c=xn(c)),i(r,c)}}function Iu(i,r,l,S,P,C,R,A,q,$){var U=8&r,F=U?R:c,J=U?c:R,Q=U?C:c,X=U?c:C;r|=U?32:64,4&(r&=~(U?64:32))||(r&=-4);var ee=[i,r,P,Q,F,X,J,A,q,$],et=l.apply(c,ee);return mi(i)&&i9(et,ee),et.placeholder=S,$u(et,i,r)}function hi(i){var r=tm[i];return function(i,c){if(i=xn(i),(c=null==c?0:ix(b(c),292))&&iw(i)){var l=(W(i)+"e").split("e");return+((l=(W(r(l[0]+"e"+(+l[1]+c)))+"e").split("e"))[0]+"e"+(+l[1]-c))}return r(i)}}var i0=iL&&1/Se(new iL([,-0]))[1]==C?function(i){return new iL(i)}:Di;function xu(i){return function(r){var c=i2(r);return c==ee?qr(r):c==ey?df(r):uf(r,i(r))}}function Kn(i,r,S,P,C,R,A,q){var $=2&r;if(!$&&"function"!=typeof i)throw new tI(l);var U=P?P.length:0;if(U||(r&=-97,P=C=c),A=A===c?A:iE(b(A),0),q=q===c?q:b(q),U-=C?C.length:0,64&r){var F=P,J=C;P=C=c}var Q=$?c:i1(i),X=[i,r,S,P,C,F,J,R,A,q];if(Q&&lh(X,Q),i=X[0],r=X[1],S=X[2],P=X[3],C=X[4],(q=X[9]=X[9]===c?$?0:i.length:iE(X[9]-U,0))||!(24&r)||(r&=-25),r&&1!=r)ee=8==r||16==r?Xc(i,r,q):32!=r&&33!=r||C.length?Xe.apply(c,X):Qc(i,r,S,P);else var ee=Jc(i,r,S);return $u((Q?iJ:i9)(ee,X),i,r)}function Eu(i,r,l,S){return i===c||bn(i,tS[l])&&!tO.call(S,l)?r:i}function yu(i,r,l,S,P,C){return K(i)&&K(r)&&(C.set(r,i),Ke(i,r,c,yu,C),C.delete(r)),i}function kc(i){return pe(i)?c:i}function Su(i,r,l,S,P,C){var R=1&l,A=i.length,q=r.length;if(A!=q&&!(R&&q>A))return!1;var $=C.get(i),U=C.get(r);if($&&U)return $==r&&U==i;var F=-1,J=!0,Q=2&l?new gt:c;for(C.set(i,r),C.set(r,i);++F<A;){var X=i[F],ee=r[F];if(S)var et=R?S(ee,X,F,r,i,C):S(X,ee,F,i,r,C);if(et!==c){if(et)continue;J=!1;break}if(Q){if(!Nr(r,function(i,r){if(!jt(Q,r)&&(X===i||P(X,i,l,S,C)))return Q.push(r)})){J=!1;break}}else if(!(X===ee||P(X,ee,l,S,C))){J=!1;break}}return C.delete(i),C.delete(r),J}function jc(i,r,c,l,S,P,C){switch(c){case eI:if(i.byteLength!=r.byteLength||i.byteOffset!=r.byteOffset)break;i=i.buffer,r=r.buffer;case eb:return!(i.byteLength!=r.byteLength||!P(new tD(i),new tD(r)));case U:case F:case et:return bn(+i,+r);case J:return i.name==r.name&&i.message==r.message;case eg:case em:return i==r+"";case ee:var R=qr;case ey:var A=1&l;if(R||(R=Se),i.size!=r.size&&!A)break;var q=C.get(i);if(q)return q==r;l|=2,C.set(i,r);var $=Su(R(i),R(r),l,S,P,C);return C.delete(i),$;case e_:if(iK)return iK.call(i)==iK.call(r)}return!1}function nh(i,r,l,S,P,C){var R=1&l,A=li(i),q=A.length;if(q!=li(r).length&&!R)return!1;for(var $=q;$--;){var U=A[$];if(!(R?U in r:tO.call(r,U)))return!1}var F=C.get(i),J=C.get(r);if(F&&J)return F==r&&J==i;var Q=!0;C.set(i,r),C.set(r,i);for(var X=R;++$<q;){var ee=i[U=A[$]],et=r[U];if(S)var eo=R?S(et,ee,U,r,i,C):S(ee,et,U,i,r,C);if(!(eo===c?ee===et||P(ee,et,l,S,C):eo)){Q=!1;break}X||(X="constructor"==U)}if(Q&&!X){var ep=i.constructor,eg=r.constructor;ep!=eg&&"constructor"in i&&"constructor"in r&&!("function"==typeof ep&&ep instanceof ep&&"function"==typeof eg&&eg instanceof eg)&&(Q=!1)}return C.delete(i),C.delete(r),Q}function Yn(i){return i4(Du(i,c,Bu),i+"")}function li(i){return Zs(i,V,i5)}function pi(i){return Zs(i,on,i6)}var i1=iz?function(i){return iz.get(i)}:Di;function je(i){for(var r=i.name+"",c=iq[r],l=tO.call(iq,r)?c.length:0;l--;){var S=c[l],P=S.func;if(null==P||P==i)return S.name}return r}function qt(i){return(tO.call(a,"placeholder")?a:i).placeholder}function x(){var i=a.iteratee||Ti;return i=i===Ti?Qs:i,arguments.length?i(arguments[0],arguments[1]):i}function nr(i,r){var c=i.__data__;return oh(r)?c["string"==typeof r?"string":"hash"]:c.map}function gi(i){for(var r=V(i),c=r.length;c--;){var l=r[c],S=i[l];r[c]=[l,S,S==S&&!K(S)]}return r}function mt(i,r){var l=hf(i,r);return Xs(l)?l:c}function th(i){var r=tO.call(i,tW),l=i[tW];try{i[tW]=c;var S=!0}catch{}var P=tN.call(i);return S&&(r?i[tW]=l:delete i[tW]),P}var i5=t4?function(i){return null==i?[]:jn(t4(i=t_(i)),function(r){return t$.call(i,r)})}:Hi,i6=t4?function(i){for(var r=[];i;)nt(r,i5(i)),i=tM(i);return r}:Hi,i2=en;function eh(i,r,c){for(var l=-1,S=c.length;++l<S;){var P=c[l],C=P.size;switch(P.type){case"drop":i+=C;break;case"dropRight":r-=C;break;case"take":r=ix(r,i+C);break;case"takeRight":i=iE(i,r-C)}}return{start:i,end:r}}function rh(i){var r=i.match(eY);return r?r[1].split(eQ):[]}function Ru(i,r,c){r=st(r,i);for(var l=-1,S=r.length,P=!1;++l<S;){var C=Wn(r[l]);if(!(P=null!=i&&c(i,C)))break;i=i[C]}return P||++l!=S?P:!!(S=null==i?0:i.length)&&ar(S)&&Zn(C,S)&&(rF(i)||rZ(i))}function ih(i){var r=i.length,c=new i.constructor(r);return r&&"string"==typeof i[0]&&tO.call(i,"index")&&(c.index=i.index,c.input=i.input),c}function bu(i){return"function"!=typeof i.constructor||he(i)?{}:iB(tM(i))}function sh(i,r,c){var l=i.constructor;switch(r){case eb:return fi(i);case U:case F:return new l(+i);case eI:return Bc(i,c);case eE:case ex:case eS:case eP:case eC:case eO:case eR:case eA:case eN:return lu(i,c);case ee:return new l;case et:case em:return new l(i);case eg:return Gc(i);case ey:return new l;case e_:return zc(i)}}function uh(i,r){var c=r.length;if(!c)return i;var l=c-1;return r[l]=(c>1?"& ":"")+r[l],r=r.join(c>2?", ":" "),i.replace(eJ,`{
/* [wrapped with `+r+`] */
`)}function ah(i){return rF(i)||rZ(i)||!!(tB&&i&&i[tB])}function Zn(i,r){var c=typeof i;return!!(r=r??9007199254740991)&&("number"==c||"symbol"!=c&&e4.test(i))&&i>-1&&i%1==0&&i<r}function rn(i,r,c){if(!K(c))return!1;var l=typeof r;return("number"==l?!!(an(c)&&Zn(r,c.length)):"string"==l&&r in c)&&bn(c[r],i)}function _i(i,r){if(rF(i))return!1;var c=typeof i;return!!("number"==c||"symbol"==c||"boolean"==c||null==i||pn(i))||eV.test(i)||!eK.test(i)||null!=r&&i in t_(r)}function oh(i){var r=typeof i;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i}function mi(i){var r=je(i),c=a[r];if("function"!=typeof c||!(r in H.prototype))return!1;if(i===c)return!0;var l=i1(c);return!!l&&i===l[0]}function fh(i){return!!tA&&tA in i}(iR&&i2(new iR(new ArrayBuffer(1)))!=eI||iA&&i2(new iA)!=ee||iN&&i2(iN.resolve())!=ep||iL&&i2(new iL)!=ey||ij&&i2(new ij)!=ew)&&(i2=function(i){var r=en(i),l=r==eo?i.constructor:c,S=l?wt(l):"";if(S)switch(S){case iD:return eI;case ik:return ee;case iM:return ep;case iH:return ey;case i$:return ew}return r});var i3=tP?Jn:Ni;function he(i){var r=i&&i.constructor;return i===("function"==typeof r&&r.prototype||tS)}function Lu(i,r){return function(l){return null!=l&&l[i]===r&&(r!==c||i in t_(l))}}function hh(i){var r=sr(i,function(i){return 500===c.size&&c.clear(),i}),c=r.cache;return r}function lh(i,r){var c=i[1],l=r[1],S=c|l,C=S<131,R=128==l&&8==c||128==l&&256==c&&i[7].length<=r[8]||384==l&&r[7].length<=r[8]&&8==c;if(!(C||R))return i;1&l&&(i[2]=r[2],S|=1&c?0:4);var A=r[3];if(A){var q=i[3];i[3]=q?du(q,A,r[4]):A,i[4]=q?tt(i[3],P):r[4]}return(A=r[5])&&(q=i[5],i[5]=q?gu(q,A,r[6]):A,i[6]=q?tt(i[5],P):r[6]),(A=r[7])&&(i[7]=A),128&l&&(i[8]=null==i[8]?r[8]:ix(i[8],r[8])),null==i[9]&&(i[9]=r[9]),i[0]=r[0],i[1]=S,i}function ph(i){var r=[];if(null!=i)for(var c in t_(i))r.push(c);return r}function dh(i){return tN.call(i)}function Du(i,r,l){return r=iE(r===c?i.length-1:r,0),function(){for(var c=arguments,S=-1,P=iE(c.length-r,0),C=eX(P);++S<P;)C[S]=c[r+S];S=-1;for(var R=eX(r+1);++S<r;)R[S]=c[S];return R[r]=l(C),cn(i,this,R)}}function Hu(i,r){return r.length<2?i:_t(i,Cn(r,0,-1))}function gh(i,r){for(var l=i.length,S=ix(r.length,l),P=un(i);S--;){var C=r[S];i[S]=Zn(C,l)?P[C]:c}return i}function wi(i,r){if(!("constructor"===r&&"function"==typeof i[r])&&"__proto__"!=r)return i[r]}var i9=Uu(iJ),i8=t2||function(i,r){return t6.setTimeout(i,r)},i4=Uu(iY);function $u(i,r,c){var l=r+"";return i4(i,uh(l,vh(rh(l),c)))}function Uu(i){var r=0,l=0;return function(){var S=iS(),P=16-(S-l);if(l=S,P>0){if(++r>=800)return arguments[0]}else r=0;return i.apply(c,arguments)}}function tr(i,r){var l=-1,S=i.length,P=S-1;for(r=r===c?S:r;++l<r;){var C=ei(l,P),R=i[C];i[C]=i[l],i[l]=R}return i.length=r,i}var i7=hh(function(i){var r=[];return 46===i.charCodeAt(0)&&r.push(""),i.replace(eB,function(i,c,l,S){r.push(l?S.replace(e1,"$1"):c||i)}),r});function Wn(i){if("string"==typeof i||pn(i))return i;var r=i+"";return"0"==r&&1/i==-C?"-0":r}function wt(i){if(null!=i){try{return tC.call(i)}catch{}try{return i+""}catch{}}return""}function vh(i,r){return mn(A,function(c){var l="_."+c[0];r&c[1]&&!Ee(i,l)&&i.push(l)}),i.sort()}function Fu(i){if(i instanceof H)return i.clone();var r=new Pn(i.__wrapped__,i.__chain__);return r.__actions__=un(i.__actions__),r.__index__=i.__index__,r.__values__=i.__values__,r}function _h(i,r,l){r=(l?rn(i,r,l):r===c)?1:iE(b(r),0);var S=null==i?0:i.length;if(!S||r<1)return[];for(var P=0,C=0,R=eX(t3(S/r));P<S;)R[C++]=Cn(i,P,P+=r);return R}function mh(i){for(var r=-1,c=null==i?0:i.length,l=0,S=[];++r<c;){var P=i[r];P&&(S[l++]=P)}return S}function wh(){var i=arguments.length;if(!i)return[];for(var r=eX(i-1),c=arguments[0],l=i;l--;)r[l-1]=arguments[l];return nt(rF(c)?un(c):[c],j(r,1))}var re=L(function(i,r){return Z(i)?ue(i,j(r,1,Z,!0)):[]}),rt=L(function(i,r){var l=In(r);return Z(l)&&(l=c),Z(i)?ue(i,j(r,1,Z,!0),x(l,2)):[]}),ra=L(function(i,r){var l=In(r);return Z(l)&&(l=c),Z(i)?ue(i,j(r,1,Z,!0),c,l):[]});function Ih(i,r,l){var S=null==i?0:i.length;return S?Cn(i,(r=l||r===c?1:b(r))<0?0:r,S):[]}function xh(i,r,l){var S=null==i?0:i.length;return S?Cn(i,0,(r=S-(r=l||r===c?1:b(r)))<0?0:r):[]}function Eh(i,r){return i&&i.length?Ze(i,x(r,3),!0,!0):[]}function yh(i,r){return i&&i.length?Ze(i,x(r,3),!0):[]}function Sh(i,r,c,l){var S=null==i?0:i.length;return S?(c&&"number"!=typeof c&&rn(i,r,c)&&(c=0,l=S),wc(i,r,c,l)):[]}function Mu(i,r,c){var l=null==i?0:i.length;if(!l)return -1;var S=null==c?0:b(c);return S<0&&(S=iE(l+S,0)),ye(i,x(r,3),S)}function qu(i,r,l){var S=null==i?0:i.length;if(!S)return -1;var P=S-1;return l!==c&&(P=b(l),P=l<0?iE(S+P,0):ix(P,S-1)),ye(i,x(r,3),P,!0)}function Bu(i){return(null==i?0:i.length)?j(i,1):[]}function Oh(i){return(null==i?0:i.length)?j(i,C):[]}function Rh(i,r){return(null==i?0:i.length)?j(i,r=r===c?1:b(r)):[]}function bh(i){for(var r=-1,c=null==i?0:i.length,l={};++r<c;){var S=i[r];l[S[0]]=S[1]}return l}function Gu(i){return i&&i.length?i[0]:c}function Th(i,r,c){var l=null==i?0:i.length;if(!l)return -1;var S=null==c?0:b(c);return S<0&&(S=iE(l+S,0)),Tt(i,r,S)}function Lh(i){return(null==i?0:i.length)?Cn(i,0,-1):[]}var ro=L(function(i){var r=G(i,ai);return r.length&&r[0]===i[0]?Vr(r):[]}),rd=L(function(i){var r=In(i),l=G(i,ai);return r===In(l)?r=c:l.pop(),l.length&&l[0]===i[0]?Vr(l,x(r,2)):[]}),rg=L(function(i){var r=In(i),l=G(i,ai);return(r="function"==typeof r?r:c)&&l.pop(),l.length&&l[0]===i[0]?Vr(l,c,r):[]});function $h(i,r){return null==i?"":ib.call(i,r)}function In(i){var r=null==i?0:i.length;return r?i[r-1]:c}function Uh(i,r,l){var S=null==i?0:i.length;if(!S)return -1;var P=S;return l!==c&&(P=(P=b(l))<0?iE(S+P,0):ix(P,S-1)),r==r?vf(i,r,P):ye(i,Is,P,!0)}function Wh(i,r){return i&&i.length?nu(i,b(r)):c}var ry=L(zu);function zu(i,r){return i&&i.length&&r&&r.length?ti(i,r):i}function Mh(i,r,c){return i&&i.length&&r&&r.length?ti(i,r,x(c,2)):i}function qh(i,r,l){return i&&i.length&&r&&r.length?ti(i,r,c,l):i}var rm=Yn(function(i,r){var c=null==i?0:i.length,l=Zr(i,r);return ru(i,G(r,function(i){return Zn(i,c)?+i:i}).sort(pu)),l});function Gh(i,r){var c=[];if(!(i&&i.length))return c;var l=-1,S=[],P=i.length;for(r=x(r,3);++l<P;){var C=i[l];r(C,l,i)&&(c.push(C),S.push(l))}return ru(i,S),c}function Ai(i){return null==i?i:iO.call(i)}function zh(i,r,l){var S=null==i?0:i.length;return S?(l&&"number"!=typeof l&&rn(i,r,l)?(r=0,l=S):(r=null==r?0:b(r),l=l===c?S:b(l)),Cn(i,r,l)):[]}function Kh(i,r){return Ye(i,r)}function Yh(i,r,c){return ii(i,r,x(c,2))}function Zh(i,r){var c=null==i?0:i.length;if(c){var l=Ye(i,r);if(l<c&&bn(i[l],r))return l}return -1}function Jh(i,r){return Ye(i,r,!0)}function Xh(i,r,c){return ii(i,r,x(c,2),!0)}function Qh(i,r){if(null==i?0:i.length){var c=Ye(i,r,!0)-1;if(bn(i[c],r))return c}return -1}function Vh(i){return i&&i.length?su(i):[]}function kh(i,r){return i&&i.length?su(i,x(r,2)):[]}function jh(i){var r=null==i?0:i.length;return r?Cn(i,1,r):[]}function nl(i,r,l){return i&&i.length?Cn(i,0,(r=l||r===c?1:b(r))<0?0:r):[]}function tl(i,r,l){var S=null==i?0:i.length;return S?Cn(i,(r=S-(r=l||r===c?1:b(r)))<0?0:r,S):[]}function el(i,r){return i&&i.length?Ze(i,x(r,3),!1,!0):[]}function rl(i,r){return i&&i.length?Ze(i,x(r,3)):[]}var r_=L(function(i){return it(j(i,1,Z,!0))}),rw=L(function(i){var r=In(i);return Z(r)&&(r=c),it(j(i,1,Z,!0),x(r,2))}),rb=L(function(i){var r=In(i);return r="function"==typeof r?r:c,it(j(i,1,Z,!0),c,r)});function al(i){return i&&i.length?it(i):[]}function ol(i,r){return i&&i.length?it(i,x(r,2)):[]}function fl(i,r){return r="function"==typeof r?r:c,i&&i.length?it(i,c,r):[]}function Ci(i){if(!(i&&i.length))return[];var r=0;return i=jn(i,function(i){if(Z(i))return r=iE(i.length,r),!0}),Fr(r,function(r){return G(i,$r(r))})}function Ku(i,r){if(!(i&&i.length))return[];var l=Ci(i);return null==r?l:G(l,function(i){return cn(r,c,i)})}var rI=L(function(i,r){return Z(i)?ue(i,r):[]}),rE=L(function(i){return ui(jn(i,Z))}),rx=L(function(i){var r=In(i);return Z(r)&&(r=c),ui(jn(i,Z),x(r,2))}),rS=L(function(i){var r=In(i);return r="function"==typeof r?r:c,ui(jn(i,Z),c,r)}),rP=L(Ci);function gl(i,r){return fu(i||[],r||[],se)}function vl(i,r){return fu(i||[],r||[],fe)}var rC=L(function(i){var r=i.length,l=r>1?i[r-1]:c;return l="function"==typeof l?(i.pop(),l):c,Ku(i,l)});function Yu(i){var r=a(i);return r.__chain__=!0,r}function ml(i,r){return r(i),i}function er(i,r){return r(i)}var rO=Yn(function(i){var r=i.length,l=r?i[0]:0,S=this.__wrapped__,s=function(r){return Zr(r,i)};return!(r>1)&&!this.__actions__.length&&S instanceof H&&Zn(l)?((S=S.slice(l,+l+(r?1:0))).__actions__.push({func:er,args:[s],thisArg:c}),new Pn(S,this.__chain__).thru(function(i){return r&&!i.length&&i.push(c),i})):this.thru(s)});function Pl(){return Yu(this)}function Al(){return new Pn(this.value(),this.__chain__)}function Cl(){this.__values__===c&&(this.__values__=ua(this.value()));var i=this.__index__>=this.__values__.length,r=i?c:this.__values__[this.__index__++];return{done:i,value:r}}function Il(){return this}function xl(i){for(var r,l=this;l instanceof qe;){var S=Fu(l);S.__index__=0,S.__values__=c,r?P.__wrapped__=S:r=S;var P=S;l=l.__wrapped__}return P.__wrapped__=i,r}function El(){var i=this.__wrapped__;if(i instanceof H){var r=i;return this.__actions__.length&&(r=new H(this)),(r=r.reverse()).__actions__.push({func:er,args:[Ai],thisArg:c}),new Pn(r,this.__chain__)}return this.thru(Ai)}function yl(){return ou(this.__wrapped__,this.__actions__)}var rR=Je(function(i,r,c){tO.call(i,c)?++i[c]:zn(i,c,1)});function Ol(i,r,l){var S=rF(i)?As:mc;return l&&rn(i,r,l)&&(r=c),S(i,x(r,3))}function Rl(i,r){return(rF(i)?jn:Ks)(i,x(r,3))}var rA=wu(Mu),rN=wu(qu);function Ll(i,r){return j(rr(i,r),1)}function Dl(i,r){return j(rr(i,r),C)}function Hl(i,r,l){return l=l===c?1:b(l),j(rr(i,r),l)}function Zu(i,r){return(rF(i)?mn:iG)(i,x(r,3))}function Ju(i,r){return(rF(i)?ko:iW)(i,x(r,3))}var rL=Je(function(i,r,c){tO.call(i,c)?i[c].push(r):zn(i,c,[r])});function $l(i,r,c,l){i=an(i)?i:Gt(i),c=c&&!l?b(c):0;var S=i.length;return c<0&&(c=iE(S+c,0)),or(i)?c<=S&&i.indexOf(r,c)>-1:!!S&&Tt(i,r,c)>-1}var rj=L(function(i,r,c){var l=-1,S="function"==typeof r,P=an(i)?eX(i.length):[];return iG(i,function(i){P[++l]=S?cn(r,i,c):ae(i,r,c)}),P}),rT=Je(function(i,r,c){zn(i,c,r)});function rr(i,r){return(rF(i)?G:Vs)(i,x(r,3))}function Fl(i,r,l,S){return null==i?[]:(rF(r)||(r=null==r?[]:[r]),rF(l=S?c:l)||(l=null==l?[]:[l]),tu(i,r,l))}var rz=Je(function(i,r,c){i[c?0:1].push(r)},function(){return[[],[]]});function ql(i,r,c){var l=rF(i)?Hr:Es,S=arguments.length<3;return l(i,x(r,4),c,S,iG)}function Bl(i,r,c){var l=rF(i)?jo:Es,S=arguments.length<3;return l(i,x(r,4),c,S,iW)}function Gl(i,r){return(rF(i)?jn:Ks)(i,ur(x(r,3)))}function zl(i){return(rF(i)?Ms:$c)(i)}function Kl(i,r,l){return r=(l?rn(i,r,l):r===c)?1:b(r),(rF(i)?pc:Uc)(i,r)}function Yl(i){return(rF(i)?dc:Fc)(i)}function Zl(i){if(null==i)return 0;if(an(i))return or(i)?Dt(i):i.length;var r=i2(i);return r==ee||r==ey?i.size:jr(i).length}function Jl(i,r,l){var S=rF(i)?Nr:Mc;return l&&rn(i,r,l)&&(r=c),S(i,x(r,3))}var rq=L(function(i,r){if(null==i)return[];var c=r.length;return c>1&&rn(i,r[0],r[1])?r=[]:c>2&&rn(r[0],r[1],r[2])&&(r=[r[0]]),tu(i,j(r,1),[])}),rD=t5||function(){return t6.Date.now()};function Ql(i,r){if("function"!=typeof r)throw new tI(l);return i=b(i),function(){if(--i<1)return r.apply(this,arguments)}}function Xu(i,r,l){return r=l?c:r,r=i&&null==r?i.length:r,Kn(i,128,c,c,c,c,r)}function Qu(i,r){var S;if("function"!=typeof r)throw new tI(l);return i=b(i),function(){return--i>0&&(S=r.apply(this,arguments)),i<=1&&(r=c),S}}var rk=L(function(i,r,c){var l=1;if(c.length){var S=tt(c,qt(rk));l|=32}return Kn(i,l,r,c,S)}),rM=L(function(i,r,c){var l=3;if(c.length){var S=tt(c,qt(rM));l|=32}return Kn(r,l,i,c,S)});function ku(i,r,l){r=l?c:r;var S=Kn(i,8,c,c,c,c,c,r);return S.placeholder=ku.placeholder,S}function ju(i,r,l){r=l?c:r;var S=Kn(i,16,c,c,c,c,c,r);return S.placeholder=ju.placeholder,S}function na(i,r,S){var P,C,R,A,q,$,U=0,F=!1,J=!1,Q=!0;if("function"!=typeof i)throw new tI(l);function I(r){var l=P,S=C;return P=C=c,U=r,A=i.apply(S,l)}function E(i){return U=i,q=i8(D,r),F?I(i):A}function T(i){var c=i-$,l=i-U,S=r-c;return J?ix(S,R-l):S}function y(i){var l=i-$,S=i-U;return $===c||l>=r||l<0||J&&S>=R}function D(){var i=rD();if(y(i))return N(i);q=i8(D,T(i))}function N(i){return q=c,Q&&P?I(i):(P=C=c,A)}function dn(){q!==c&&iX(q),U=0,P=$=C=q=c}function sn(){return q===c?A:N(rD())}function gn(){var i=rD(),l=y(i);if(P=arguments,C=this,$=i,l){if(q===c)return E($);if(J)return iX(q),q=i8(D,r),I($)}return q===c&&(q=i8(D,r)),A}return r=xn(r)||0,K(S)&&(F=!!S.leading,R=(J="maxWait"in S)?iE(xn(S.maxWait)||0,r):R,Q="trailing"in S?!!S.trailing:Q),gn.cancel=dn,gn.flush=sn,gn}var rH=L(function(i,r){return Gs(i,1,r)}),r$=L(function(i,r,c){return Gs(i,xn(r)||0,c)});function jl(i){return Kn(i,512)}function sr(i,r){if("function"!=typeof i||null!=r&&"function"!=typeof r)throw new tI(l);var e=function(){var c=arguments,l=r?r.apply(this,c):c[0],S=e.cache;if(S.has(l))return S.get(l);var P=i.apply(this,c);return e.cache=S.set(l,P)||S,P};return e.cache=new(sr.Cache||Gn),e}function ur(i){if("function"!=typeof i)throw new tI(l);return function(){var r=arguments;switch(r.length){case 0:return!i.call(this);case 1:return!i.call(this,r[0]);case 2:return!i.call(this,r[0],r[1]);case 3:return!i.call(this,r[0],r[1],r[2])}return!i.apply(this,r)}}function np(i){return Qu(2,i)}sr.Cache=Gn;var rU=iQ(function(i,r){var c=(r=1==r.length&&rF(r[0])?G(r[0],hn(x())):G(j(r,1),hn(x()))).length;return L(function(l){for(var S=-1,P=ix(l.length,c);++S<P;)l[S]=r[S].call(this,l[S]);return cn(i,this,l)})}),rK=L(function(i,r){var l=tt(r,qt(rK));return Kn(i,32,c,r,l)}),rV=L(function(i,r){var l=tt(r,qt(rV));return Kn(i,64,c,r,l)}),rB=Yn(function(i,r){return Kn(i,256,c,c,c,r)});function rp(i,r){if("function"!=typeof i)throw new tI(l);return L(i,r=r===c?r:b(r))}function ip(i,r){if("function"!=typeof i)throw new tI(l);return r=null==r?0:iE(b(r),0),L(function(c){var l=c[r],S=ut(c,0,r);return l&&nt(S,l),cn(i,this,S)})}function sp(i,r,c){var S=!0,P=!0;if("function"!=typeof i)throw new tI(l);return K(c)&&(S="leading"in c?!!c.leading:S,P="trailing"in c?!!c.trailing:P),na(i,r,{leading:S,maxWait:r,trailing:P})}function up(i){return Xu(i,1)}function ap(i,r){return rK(oi(r),i)}function op(){if(!arguments.length)return[];var i=arguments[0];return rF(i)?i:[i]}function fp(i){return An(i,4)}function cp(i,r){return An(i,4,r="function"==typeof r?r:c)}function hp(i){return An(i,5)}function lp(i,r){return An(i,5,r="function"==typeof r?r:c)}function pp(i,r){return null==r||Bs(i,r,V(r))}function bn(i,r){return i===r||i!=i&&r!=r}var rG=ke(Qr),rW=ke(function(i,r){return i>=r}),rZ=Js(function(){return arguments}())?Js:function(i){return Y(i)&&tO.call(i,"callee")&&!t$.call(i,"callee")},rF=eX.isArray,rJ=t7?hn(t7):xc;function an(i){return null!=i&&ar(i.length)&&!Jn(i)}function Z(i){return Y(i)&&an(i)}function _p(i){return!0===i||!1===i||Y(i)&&en(i)==U}var rY=id||Ni,rQ=ie?hn(ie):Ec;function wp(i){return Y(i)&&1===i.nodeType&&!pe(i)}function Pp(i){if(null==i)return!0;if(an(i)&&(rF(i)||"string"==typeof i||"function"==typeof i.splice||rY(i)||r5(i)||rZ(i)))return!i.length;var r=i2(i);if(r==ee||r==ey)return!i.size;if(he(i))return!jr(i).length;for(var c in i)if(tO.call(i,c))return!1;return!0}function Ap(i,r){return oe(i,r)}function Cp(i,r,l){var S=(l="function"==typeof l?l:c)?l(i,r):c;return S===c?oe(i,r,c,l):!!S}function Ei(i){if(!Y(i))return!1;var r=en(i);return r==J||"[object DOMException]"==r||"string"==typeof i.message&&"string"==typeof i.name&&!pe(i)}function Ip(i){return"number"==typeof i&&iw(i)}function Jn(i){if(!K(i))return!1;var r=en(i);return r==Q||r==X||"[object AsyncFunction]"==r||"[object Proxy]"==r}function ea(i){return"number"==typeof i&&i==b(i)}function ar(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function K(i){var r=typeof i;return null!=i&&("object"==r||"function"==r)}function Y(i){return null!=i&&"object"==typeof i}var rX=ir?hn(ir):Sc;function xp(i,r){return i===r||kr(i,r,gi(r))}function Ep(i,r,l){return l="function"==typeof l?l:c,kr(i,r,gi(r),l)}function yp(i){return ia(i)&&i!=+i}function Sp(i){if(i3(i))throw new tp("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(i)}function Op(i){return null===i}function Rp(i){return null==i}function ia(i){return"number"==typeof i||Y(i)&&en(i)==et}function pe(i){if(!Y(i)||en(i)!=eo)return!1;var r=tM(i);if(null===r)return!0;var c=tO.call(r,"constructor")&&r.constructor;return"function"==typeof c&&c instanceof c&&tC.call(c)==tL}var r0=io?hn(io):Oc;function bp(i){return ea(i)&&i>=-9007199254740991&&i<=9007199254740991}var r1=il?hn(il):Rc;function or(i){return"string"==typeof i||!rF(i)&&Y(i)&&en(i)==em}function pn(i){return"symbol"==typeof i||Y(i)&&en(i)==e_}var r5=iu?hn(iu):bc;function Tp(i){return i===c}function Lp(i){return Y(i)&&i2(i)==ew}function Dp(i){return Y(i)&&"[object WeakSet]"==en(i)}var r6=ke(ni),r2=ke(function(i,r){return i<=r});function ua(i){if(!i)return[];if(an(i))return or(i)?On(i):un(i);if(tG&&i[tG])return pf(i[tG]());var r=i2(i);return(r==ee?qr:r==ey?Se:Gt)(i)}function Xn(i){return i?(i=xn(i))===C||i===-C?(i<0?-1:1)*17976931348623157e292:i==i?i:0:0===i?i:0}function b(i){var r=Xn(i),c=r%1;return r==r?c?r-c:r:0}function aa(i){return i?vt(b(i),0,4294967295):0}function xn(i){if("number"==typeof i)return i;if(pn(i))return R;if(K(i)){var r="function"==typeof i.valueOf?i.valueOf():i;i=K(r)?r+"":r}if("string"!=typeof i)return 0===i?i:+i;i=ys(i);var c=e3.test(i);return c||e8.test(i)?t0(i.slice(2),c?2:8):e2.test(i)?R:+i}function oa(i){return Un(i,on(i))}function $p(i){return i?vt(b(i),-9007199254740991,9007199254740991):0===i?i:0}function W(i){return null==i?"":ln(i)}var r3=Ft(function(i,r){if(he(r)||an(r)){Un(r,V(r),i);return}for(var c in r)tO.call(r,c)&&se(i,c,r[c])}),r9=Ft(function(i,r){Un(r,on(r),i)}),r8=Ft(function(i,r,c,l){Un(r,on(r),i,l)}),r4=Ft(function(i,r,c,l){Un(r,V(r),i,l)}),r7=Yn(Zr);function Mp(i,r){var c=iB(i);return null==r?c:qs(c,r)}var ne=L(function(i,r){i=t_(i);var l=-1,S=r.length,P=S>2?r[2]:c;for(P&&rn(r[0],r[1],P)&&(S=1);++l<S;)for(var C=r[l],R=on(C),A=-1,q=R.length;++A<q;){var $=R[A],U=i[$];(U===c||bn(U,tS[$])&&!tO.call(i,$))&&(i[$]=C[$])}return i}),nn=L(function(i){return i.push(c,yu),cn(ny,c,i)});function Gp(i,r){return Cs(i,x(r,3),$n)}function zp(i,r){return Cs(i,x(r,3),Xr)}function Kp(i,r){return null==i?i:iZ(i,x(r,3),on)}function Yp(i,r){return null==i?i:iF(i,x(r,3),on)}function Zp(i,r){return i&&$n(i,x(r,3))}function Jp(i,r){return i&&Xr(i,x(r,3))}function Xp(i){return null==i?[]:ze(i,V(i))}function Qp(i){return null==i?[]:ze(i,on(i))}function Si(i,r,l){var S=null==i?c:_t(i,r);return S===c?l:S}function Vp(i,r){return null!=i&&Ru(i,r,Pc)}function Oi(i,r){return null!=i&&Ru(i,r,Ac)}var ns=Au(function(i,r,c){null!=r&&"function"!=typeof r.toString&&(r=tN.call(r)),i[r]=c},bi(fn)),no=Au(function(i,r,c){null!=r&&"function"!=typeof r.toString&&(r=tN.call(r)),tO.call(i,r)?i[r].push(c):i[r]=[c]},x),nf=L(ae);function V(i){return an(i)?Fs(i):jr(i)}function on(i){return an(i)?Fs(i,!0):Tc(i)}function td(i,r){var c={};return r=x(r,3),$n(i,function(i,l,S){zn(c,r(i,l,S),i)}),c}function ed(i,r){var c={};return r=x(r,3),$n(i,function(i,l,S){zn(c,l,r(i,l,S))}),c}var nd=Ft(function(i,r,c){Ke(i,r,c)}),ny=Ft(function(i,r,c,l){Ke(i,r,c,l)}),nm=Yn(function(i,r){var c={};if(null==i)return c;var l=!1;r=G(r,function(r){return r=st(r,i),l||(l=r.length>1),r}),Un(i,pi(i),c),l&&(c=An(c,7,kc));for(var S=r.length;S--;)si(c,r[S]);return c});function sd(i,r){return ha(i,ur(x(r)))}var n_=Yn(function(i,r){return null==i?{}:Dc(i,r)});function ha(i,r){if(null==i)return{};var c=G(pi(i),function(i){return[i]});return r=x(r),eu(i,c,function(i,c){return r(i,c[0])})}function ad(i,r,l){r=st(r,i);var S=-1,P=r.length;for(P||(P=1,i=c);++S<P;){var C=null==i?c:i[Wn(r[S])];C===c&&(S=P,C=l),i=Jn(C)?C.call(i):C}return i}function od(i,r,c){return null==i?i:fe(i,r,c)}function fd(i,r,l,S){return S="function"==typeof S?S:c,null==i?i:fe(i,r,l,S)}var nw=xu(V),nb=xu(on);function cd(i,r,c){var l=rF(i),S=l||rY(i)||r5(i);if(r=x(r,4),null==c){var P=i&&i.constructor;c=S?l?new P:[]:K(i)&&Jn(P)?iB(tM(i)):{}}return(S?mn:$n)(i,function(i,l,S){return r(c,i,l,S)}),c}function hd(i,r){return null==i||si(i,r)}function ld(i,r,c){return null==i?i:au(i,r,oi(c))}function pd(i,r,l,S){return S="function"==typeof S?S:c,null==i?i:au(i,r,oi(l),S)}function Gt(i){return null==i?[]:Mr(i,V(i))}function dd(i){return null==i?[]:Mr(i,on(i))}function gd(i,r,l){return l===c&&(l=r,r=c),l!==c&&(l=(l=xn(l))==l?l:0),r!==c&&(r=(r=xn(r))==r?r:0),vt(xn(i),r,l)}function vd(i,r,l){return r=Xn(r),l===c?(l=r,r=0):l=Xn(l),Cc(i=xn(i),r,l)}function _d(i,r,l){if(l&&"boolean"!=typeof l&&rn(i,r,l)&&(r=l=c),l===c&&("boolean"==typeof r?(l=r,r=c):"boolean"==typeof i&&(l=i,i=c)),i===c&&r===c?(i=0,r=1):(i=Xn(i),r===c?(r=i,i=0):r=Xn(r)),i>r){var S=i;i=r,r=S}if(l||i%1||r%1){var P=iC();return ix(i+P*(r-i+tX("1e-"+((P+"").length-1))),r)}return ei(i,r)}var nI=Mt(function(i,r,c){return r=r.toLowerCase(),i+(c?da(r):r)});function da(i){return nR(W(i).toLowerCase())}function ga(i){return(i=W(i))&&i.replace(e7,ig).replace(tK,"")}function wd(i,r,l){i=W(i),r=ln(r);var S=i.length,P=l=l===c?S:vt(b(l),0,S);return(l-=r.length)>=0&&i.slice(l,P)==r}function Pd(i){return(i=W(i))&&eM.test(i)?i.replace(eD,iy):i}function Ad(i){return(i=W(i))&&eW.test(i)?i.replace(eG,"\\$&"):i}var nE=Mt(function(i,r,c){return i+(c?"-":"")+r.toLowerCase()}),nx=Mt(function(i,r,c){return i+(c?" ":"")+r.toLowerCase()}),nS=mu("toLowerCase");function Ed(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;if(!r||l>=r)return i;var S=(r-l)/2;return Ve(t8(S),c)+i+Ve(t3(S),c)}function yd(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;return r&&l<r?i+Ve(r-l,c):i}function Sd(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;return r&&l<r?Ve(r-l,c)+i:i}function Od(i,r,c){return c||null==r?r=0:r&&(r=+r),iP(W(i).replace(eZ,""),r||0)}function Rd(i,r,l){return r=(l?rn(i,r,l):r===c)?1:b(r),ri(W(i),r)}function bd(){var i=arguments,r=W(i[0]);return i.length<3?r:r.replace(i[1],i[2])}var nP=Mt(function(i,r,c){return i+(c?"_":"")+r.toLowerCase()});function Ld(i,r,l){return l&&"number"!=typeof l&&rn(i,r,l)&&(r=l=c),(l=l===c?4294967295:l>>>0)?(i=W(i))&&("string"==typeof r||null!=r&&!r0(r))&&!(r=ln(r))&&Lt(i)?ut(On(i),0,l):i.split(r,l):[]}var nC=Mt(function(i,r,c){return i+(c?" ":"")+nR(r)});function Hd(i,r,c){return i=W(i),c=null==c?0:vt(b(c),0,i.length),r=ln(r),i.slice(c,c+r.length)==r}function Nd(i,r,l){var S=a.templateSettings;l&&rn(i,r,l)&&(r=c),i=W(i),r=r8({},r,S,Eu);var P,C,R=r8({},r.imports,S.imports,Eu),A=V(R),q=Mr(R,A),$=0,U=r.interpolate||tn,F="__p += '",J=tw((r.escape||tn).source+"|"+U.source+"|"+(U===eU?e5:tn).source+"|"+(r.evaluate||tn).source+"|$","g"),Q="//# sourceURL="+(tO.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tF+"]")+`
`;i.replace(J,function(r,c,l,S,R,A){return l||(l=S),F+=i.slice($,A).replace(ta,cf),c&&(P=!0,F+=`' +
__e(`+c+`) +
'`),R&&(C=!0,F+=`';
`+R+`;
__p += '`),l&&(F+=`' +
((__t = (`+l+`)) == null ? '' : __t) +
'`),$=A+r.length,r}),F+=`';
`;var X=tO.call(r,"variable")&&r.variable;if(X){if(e0.test(X))throw new tp("Invalid `variable` option passed into `_.template`")}else F=`with (obj) {
`+F+`
}
`;F=(C?F.replace(eL,""):F).replace(ej,"$1").replace(eT,"$1;"),F="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var ee=nA(function(){return ty(A,Q+"return "+F).apply(c,q)});if(ee.source=F,Ei(ee))throw ee;return ee}function $d(i){return W(i).toLowerCase()}function Ud(i){return W(i).toUpperCase()}function Wd(i,r,l){if((i=W(i))&&(l||r===c))return ys(i);if(!i||!(r=ln(r)))return i;var S=On(i),P=On(r),C=Ss(S,P),R=Os(S,P)+1;return ut(S,C,R).join("")}function Fd(i,r,l){if((i=W(i))&&(l||r===c))return i.slice(0,bs(i)+1);if(!i||!(r=ln(r)))return i;var S=On(i),P=Os(S,On(r))+1;return ut(S,0,P).join("")}function Md(i,r,l){if((i=W(i))&&(l||r===c))return i.replace(eZ,"");if(!i||!(r=ln(r)))return i;var S=On(i),P=Ss(S,On(r));return ut(S,P).join("")}function qd(i,r){var l=30,S="...";if(K(r)){var P="separator"in r?r.separator:P;l="length"in r?b(r.length):l,S="omission"in r?ln(r.omission):S}var C=(i=W(i)).length;if(Lt(i)){var R=On(i);C=R.length}if(l>=C)return i;var A=l-Dt(S);if(A<1)return S;var q=R?ut(R,0,A).join(""):i.slice(0,A);if(P===c)return q+S;if(R&&(A+=q.length-A),r0(P)){if(i.slice(A).search(P)){var $,U=q;for(P.global||(P=tw(P.source,W(e6.exec(P))+"g")),P.lastIndex=0;$=P.exec(U);)var F=$.index;q=q.slice(0,F===c?A:F)}}else if(i.indexOf(ln(P),A)!=A){var J=q.lastIndexOf(P);J>-1&&(q=q.slice(0,J))}return q+S}function Bd(i){return(i=W(i))&&ek.test(i)?i.replace(ez,im):i}var nO=Mt(function(i,r,c){return i+(c?" ":"")+r.toUpperCase()}),nR=mu("toUpperCase");function va(i,r,l){return i=W(i),(r=l?c:r)===c?lf(i)?Pf(i):ef(i):i.match(r)||[]}var nA=L(function(i,r){try{return cn(i,c,r)}catch(i){return Ei(i)?i:new tp(i)}}),nN=Yn(function(i,r){return mn(r,function(r){zn(i,r=Wn(r),rk(i[r],i))}),i});function Kd(i){var r=null==i?0:i.length,c=x();return i=r?G(i,function(i){if("function"!=typeof i[1])throw new tI(l);return[c(i[0]),i[1]]}):[],L(function(c){for(var l=-1;++l<r;){var S=i[l];if(cn(S[0],this,c))return cn(S[1],this,c)}})}function Yd(i){return _c(An(i,1))}function bi(i){return function(){return i}}function Zd(i,r){return null==i||i!=i?r:i}var nL=Pu(),nj=Pu(!0);function fn(i){return i}function Ti(i){return Qs("function"==typeof i?i:An(i,1))}function Qd(i){return ks(An(i,1))}function Vd(i,r){return js(i,An(r,1))}var nT=L(function(i,r){return function(c){return ae(c,i,r)}}),nz=L(function(i,r){return function(c){return ae(i,c,r)}});function Li(i,r,c){var l=V(r),S=ze(r,l);null!=c||K(r)&&(S.length||!l.length)||(c=r,r=i,i=this,S=ze(r,V(r)));var P=!(K(c)&&"chain"in c)||!!c.chain,C=Jn(i);return mn(S,function(c){var l=r[c];i[c]=l,C&&(i.prototype[c]=function(){var r=this.__chain__;if(P||r){var c=i(this.__wrapped__);return(c.__actions__=un(this.__actions__)).push({func:l,args:arguments,thisArg:i}),c.__chain__=r,c}return l.apply(i,nt([this.value()],arguments))})}),i}function ng(){return t6._===this&&(t6._=tj),this}function Di(){}function tg(i){return i=b(i),L(function(r){return nu(r,i)})}var nq=ci(G),nD=ci(As),nk=ci(Nr);function ma(i){return _i(i)?$r(Wn(i)):Hc(i)}function sg(i){return function(r){return null==i?c:_t(i,r)}}var nM=Cu(),nH=Cu(!0);function Hi(){return[]}function Ni(){return!1}function og(){return{}}function fg(){return""}function cg(){return!0}function hg(i,r){if((i=b(i))<1||i>9007199254740991)return[];var c=4294967295,l=ix(i,4294967295);r=x(r),i-=4294967295;for(var S=Fr(l,r);++c<i;)r(c);return S}function lg(i){return rF(i)?G(i,Wn):pn(i)?[i]:un(i7(W(i)))}function pg(i){var r=++tR;return W(i)+r}var n$=Qe(function(i,r){return i+r},0),nU=hi("ceil"),nK=Qe(function(i,r){return i/r},1),nV=hi("floor");function mg(i){return i&&i.length?Ge(i,fn,Qr):c}function wg(i,r){return i&&i.length?Ge(i,x(r,2),Qr):c}function Pg(i){return xs(i,fn)}function Ag(i,r){return xs(i,x(r,2))}function Cg(i){return i&&i.length?Ge(i,fn,ni):c}function Ig(i,r){return i&&i.length?Ge(i,x(r,2),ni):c}var nB=Qe(function(i,r){return i*r},1),nG=hi("round"),nW=Qe(function(i,r){return i-r},0);function Sg(i){return i&&i.length?Wr(i,fn):0}function Og(i,r){return i&&i.length?Wr(i,x(r,2)):0}return a.after=Ql,a.ary=Xu,a.assign=r3,a.assignIn=r9,a.assignInWith=r8,a.assignWith=r4,a.at=r7,a.before=Qu,a.bind=rk,a.bindAll=nN,a.bindKey=rM,a.castArray=op,a.chain=Yu,a.chunk=_h,a.compact=mh,a.concat=wh,a.cond=Kd,a.conforms=Yd,a.constant=bi,a.countBy=rR,a.create=Mp,a.curry=ku,a.curryRight=ju,a.debounce=na,a.defaults=ne,a.defaultsDeep=nn,a.defer=rH,a.delay=r$,a.difference=re,a.differenceBy=rt,a.differenceWith=ra,a.drop=Ih,a.dropRight=xh,a.dropRightWhile=Eh,a.dropWhile=yh,a.fill=Sh,a.filter=Rl,a.flatMap=Ll,a.flatMapDeep=Dl,a.flatMapDepth=Hl,a.flatten=Bu,a.flattenDeep=Oh,a.flattenDepth=Rh,a.flip=jl,a.flow=nL,a.flowRight=nj,a.fromPairs=bh,a.functions=Xp,a.functionsIn=Qp,a.groupBy=rL,a.initial=Lh,a.intersection=ro,a.intersectionBy=rd,a.intersectionWith=rg,a.invert=ns,a.invertBy=no,a.invokeMap=rj,a.iteratee=Ti,a.keyBy=rT,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=td,a.mapValues=ed,a.matches=Qd,a.matchesProperty=Vd,a.memoize=sr,a.merge=nd,a.mergeWith=ny,a.method=nT,a.methodOf=nz,a.mixin=Li,a.negate=ur,a.nthArg=tg,a.omit=nm,a.omitBy=sd,a.once=np,a.orderBy=Fl,a.over=nq,a.overArgs=rU,a.overEvery=nD,a.overSome=nk,a.partial=rK,a.partialRight=rV,a.partition=rz,a.pick=n_,a.pickBy=ha,a.property=ma,a.propertyOf=sg,a.pull=ry,a.pullAll=zu,a.pullAllBy=Mh,a.pullAllWith=qh,a.pullAt=rm,a.range=nM,a.rangeRight=nH,a.rearg=rB,a.reject=Gl,a.remove=Gh,a.rest=rp,a.reverse=Ai,a.sampleSize=Kl,a.set=od,a.setWith=fd,a.shuffle=Yl,a.slice=zh,a.sortBy=rq,a.sortedUniq=Vh,a.sortedUniqBy=kh,a.split=Ld,a.spread=ip,a.tail=jh,a.take=nl,a.takeRight=tl,a.takeRightWhile=el,a.takeWhile=rl,a.tap=ml,a.throttle=sp,a.thru=er,a.toArray=ua,a.toPairs=nw,a.toPairsIn=nb,a.toPath=lg,a.toPlainObject=oa,a.transform=cd,a.unary=up,a.union=r_,a.unionBy=rw,a.unionWith=rb,a.uniq=al,a.uniqBy=ol,a.uniqWith=fl,a.unset=hd,a.unzip=Ci,a.unzipWith=Ku,a.update=ld,a.updateWith=pd,a.values=Gt,a.valuesIn=dd,a.without=rI,a.words=va,a.wrap=ap,a.xor=rE,a.xorBy=rx,a.xorWith=rS,a.zip=rP,a.zipObject=gl,a.zipObjectDeep=vl,a.zipWith=rC,a.entries=nw,a.entriesIn=nb,a.extend=r9,a.extendWith=r8,Li(a,a),a.add=n$,a.attempt=nA,a.camelCase=nI,a.capitalize=da,a.ceil=nU,a.clamp=gd,a.clone=fp,a.cloneDeep=hp,a.cloneDeepWith=lp,a.cloneWith=cp,a.conformsTo=pp,a.deburr=ga,a.defaultTo=Zd,a.divide=nK,a.endsWith=wd,a.eq=bn,a.escape=Pd,a.escapeRegExp=Ad,a.every=Ol,a.find=rA,a.findIndex=Mu,a.findKey=Gp,a.findLast=rN,a.findLastIndex=qu,a.findLastKey=zp,a.floor=nV,a.forEach=Zu,a.forEachRight=Ju,a.forIn=Kp,a.forInRight=Yp,a.forOwn=Zp,a.forOwnRight=Jp,a.get=Si,a.gt=rG,a.gte=rW,a.has=Vp,a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=$l,a.indexOf=Th,a.inRange=vd,a.invoke=nf,a.isArguments=rZ,a.isArray=rF,a.isArrayBuffer=rJ,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=_p,a.isBuffer=rY,a.isDate=rQ,a.isElement=wp,a.isEmpty=Pp,a.isEqual=Ap,a.isEqualWith=Cp,a.isError=Ei,a.isFinite=Ip,a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=rX,a.isMatch=xp,a.isMatchWith=Ep,a.isNaN=yp,a.isNative=Sp,a.isNil=Rp,a.isNull=Op,a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=r0,a.isSafeInteger=bp,a.isSet=r1,a.isString=or,a.isSymbol=pn,a.isTypedArray=r5,a.isUndefined=Tp,a.isWeakMap=Lp,a.isWeakSet=Dp,a.join=$h,a.kebabCase=nE,a.last=In,a.lastIndexOf=Uh,a.lowerCase=nx,a.lowerFirst=nS,a.lt=r6,a.lte=r2,a.max=mg,a.maxBy=wg,a.mean=Pg,a.meanBy=Ag,a.min=Cg,a.minBy=Ig,a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=og,a.stubString=fg,a.stubTrue=cg,a.multiply=nB,a.nth=Wh,a.noConflict=ng,a.noop=Di,a.now=rD,a.pad=Ed,a.padEnd=yd,a.padStart=Sd,a.parseInt=Od,a.random=_d,a.reduce=ql,a.reduceRight=Bl,a.repeat=Rd,a.replace=bd,a.result=ad,a.round=nG,a.runInContext=h,a.sample=zl,a.size=Zl,a.snakeCase=nP,a.some=Jl,a.sortedIndex=Kh,a.sortedIndexBy=Yh,a.sortedIndexOf=Zh,a.sortedLastIndex=Jh,a.sortedLastIndexBy=Xh,a.sortedLastIndexOf=Qh,a.startCase=nC,a.startsWith=Hd,a.subtract=nW,a.sum=Sg,a.sumBy=Og,a.template=Nd,a.times=hg,a.toFinite=Xn,a.toInteger=b,a.toLength=aa,a.toLower=$d,a.toNumber=xn,a.toSafeInteger=$p,a.toString=W,a.toUpper=Ud,a.trim=Wd,a.trimEnd=Fd,a.trimStart=Md,a.truncate=qd,a.unescape=Bd,a.uniqueId=pg,a.upperCase=nO,a.upperFirst=nR,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(eF={},$n(a,function(i,r){tO.call(a.prototype,r)||(eF[r]=i)}),eF),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){a[i].placeholder=a}),mn(["drop","take"],function(i,r){H.prototype[i]=function(l){l=l===c?1:iE(b(l),0);var S=this.__filtered__&&!r?new H(this):this.clone();return S.__filtered__?S.__takeCount__=ix(l,S.__takeCount__):S.__views__.push({size:ix(l,4294967295),type:i+(S.__dir__<0?"Right":"")}),S},H.prototype[i+"Right"]=function(r){return this.reverse()[i](r).reverse()}}),mn(["filter","map","takeWhile"],function(i,r){var c=r+1,l=1==c||3==c;H.prototype[i]=function(i){var r=this.clone();return r.__iteratees__.push({iteratee:x(i,3),type:c}),r.__filtered__=r.__filtered__||l,r}}),mn(["head","last"],function(i,r){var c="take"+(r?"Right":"");H.prototype[i]=function(){return this[c](1).value()[0]}}),mn(["initial","tail"],function(i,r){var c="drop"+(r?"":"Right");H.prototype[i]=function(){return this.__filtered__?new H(this):this[c](1)}}),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(i){return this.filter(i).head()},H.prototype.findLast=function(i){return this.reverse().find(i)},H.prototype.invokeMap=L(function(i,r){return"function"==typeof i?new H(this):this.map(function(c){return ae(c,i,r)})}),H.prototype.reject=function(i){return this.filter(ur(x(i)))},H.prototype.slice=function(i,r){i=b(i);var l=this;return l.__filtered__&&(i>0||r<0)?new H(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),r!==c&&(l=(r=b(r))<0?l.dropRight(-r):l.take(r-i)),l)},H.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},$n(H.prototype,function(i,r){var l=/^(?:filter|find|map|reject)|While$/.test(r),S=/^(?:head|last)$/.test(r),P=a[S?"take"+("last"==r?"Right":""):r],C=S||/^find/.test(r);P&&(a.prototype[r]=function(){var r=this.__wrapped__,R=S?[1]:arguments,A=r instanceof H,q=R[0],$=A||rF(r),m=function(i){var r=P.apply(a,nt([i],R));return S&&U?r[0]:r};$&&l&&"function"==typeof q&&1!=q.length&&(A=$=!1);var U=this.__chain__,F=!!this.__actions__.length,J=C&&!U,Q=A&&!F;if(!C&&$){r=Q?r:new H(this);var X=i.apply(r,R);return X.__actions__.push({func:er,args:[m],thisArg:c}),new Pn(X,U)}return J&&Q?i.apply(this,R):(X=this.thru(m),J?S?X.value()[0]:X.value():X)})}),mn(["pop","push","shift","sort","splice","unshift"],function(i){var r=tE[i],c=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",l=/^(?:pop|shift)$/.test(i);a.prototype[i]=function(){var i=arguments;if(l&&!this.__chain__){var S=this.value();return r.apply(rF(S)?S:[],i)}return this[c](function(c){return r.apply(rF(c)?c:[],i)})}}),$n(H.prototype,function(i,r){var c=a[r];if(c){var l=c.name+"";tO.call(iq,l)||(iq[l]=[]),iq[l].push({name:r,func:c})}}),iq[Xe(c,2).name]=[{name:"wrapper",func:c}],H.prototype.clone=Bf,H.prototype.reverse=Gf,H.prototype.value=zf,a.prototype.at=rO,a.prototype.chain=Pl,a.prototype.commit=Al,a.prototype.next=Cl,a.prototype.plant=xl,a.prototype.reverse=El,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=yl,a.prototype.first=a.prototype.head,tG&&(a.prototype[tG]=Il),a}();t3?((t3.exports=i_)._=i_,t2._=i_):t6._=i_}).call(iT)}(iz,iz.exports);var iq=Object.defineProperty,iD=Object.defineProperties,ik=Object.getOwnPropertyDescriptors,iM=Object.getOwnPropertySymbols,iH=Object.prototype.hasOwnProperty,i$=Object.prototype.propertyIsEnumerable,ya=(i,r,c)=>r in i?iq(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_cr=(i,r)=>{for(var c in r||(r={}))iH.call(r,c)&&ya(i,c,r[c]);if(iM)for(var c of iM(r))i$.call(r,c)&&ya(i,c,r[c]);return i},Zg=(i,r)=>iD(i,ik(r));function index_es_ft(i,r,c){var l;let S=(0,C.DQ)(i);return(null==(l=r.rpcMap)?void 0:l[S.reference])||`https://rpc.walletconnect.com/v1/?chainId=${S.namespace}:${S.reference}&projectId=${c}`}function index_es_Ct(i){return i.includes(":")?i.split(":")[1]:i}function Sa(i){return i.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function Jg(i,r){let c=Object.keys(r.namespaces).filter(r=>r.includes(i));if(!c.length)return[];let l=[];return c.forEach(i=>{let c=r.namespaces[i].accounts;l.push(...c)}),l}function Xg(i={},r={}){let c=Oa(i),l=Oa(r);return iz.exports.merge(c,l)}function Oa(i){var r,c,l,S;let P={};if(!(0,C.L5)(i))return P;for(let[R,A]of Object.entries(i)){let i=(0,C.gp)(R)?[R]:A.chains,q=A.methods||[],$=A.events||[],U=A.rpcMap||{},F=(0,C.M)(R);P[F]=Zg(index_es_cr(index_es_cr({},P[F]),A),{chains:(0,C.eG)(i,null==(r=P[F])?void 0:r.chains),methods:(0,C.eG)(q,null==(c=P[F])?void 0:c.methods),events:(0,C.eG)($,null==(l=P[F])?void 0:l.events),rpcMap:index_es_cr(index_es_cr({},U),null==(S=P[F])?void 0:S.rpcMap)})}return P}function Qg(i){return i.includes(":")?i.split(":")[2]:i}function Vg(i){let r={};for(let[c,l]of Object.entries(i)){let i=l.methods||[],S=l.events||[],P=l.accounts||[],R=(0,C.gp)(c)?[c]:l.chains?l.chains:Sa(l.accounts);r[c]={chains:R,methods:i,events:S,accounts:P}}return r}function index_es_Wi(i){return"number"==typeof i?i:i.includes("0x")?parseInt(i,16):i.includes(":")?Number(i.split(":")[1]):Number(i)}let iU={},index_es_z=i=>iU[i],Fi=(i,r)=>{iU[i]=r};let kg=class kg{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getAccounts(){let i=this.namespace.accounts;return i&&i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let jg=class jg{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(parseInt(i),r),this.chainId=parseInt(i),this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,r){let c=r||index_es_ft(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.k(c,index_es_z("disableProviderPing")))}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=parseInt(index_es_Ct(r));i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}getHttpProvider(){let i=this.chainId,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}async handleSwitchChain(i){var r,c;let l=i.request.params?null==(r=i.request.params[0])?void 0:r.chainId:"0x0";l=l.startsWith("0x")?l:`0x${l}`;let S=parseInt(l,16);if(this.isChainApproved(S))this.setDefaultChain(`${S}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:l}]},chainId:null==(c=this.namespace.chains)?void 0:c[0]}),this.setDefaultChain(`${S}`);else throw Error(`Failed to switch to chain 'eip155:${S}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}};let nv=class nv{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let tv=class tv{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let ev=class ev{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{let c=this.getCardanoRPCUrl(r),l=index_es_Ct(r);i[l]=this.createHttpProvider(l,c)}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}getCardanoRPCUrl(i){let r=this.namespace.rpcMap;if(r)return r[i]}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||this.getCardanoRPCUrl(i);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let rv=class rv{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let iv=class iv{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};let sv=class sv{constructor(i){this.name="near",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){let c=r||index_es_ft(`${this.name}:${i}`,this.namespace);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,c)}this.events.emit(ij.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i&&i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;i[r]=this.createHttpProvider(r,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace);return typeof c>"u"?void 0:new ex.r(new iA.Z(c,index_es_z("disableProviderPing")))}};var iK=Object.defineProperty,iV=Object.defineProperties,iB=Object.getOwnPropertyDescriptors,iG=Object.getOwnPropertySymbols,iW=Object.prototype.hasOwnProperty,iZ=Object.prototype.propertyIsEnumerable,Ta=(i,r,c)=>r in i?iK(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_hr=(i,r)=>{for(var c in r||(r={}))iW.call(r,c)&&Ta(i,c,r[c]);if(iG)for(var c of iG(r))iZ.call(r,c)&&Ta(i,c,r[c]);return i},Mi=(i,r)=>iV(i,iB(r));let index_es_lr=class index_es_lr{constructor(i){this.events=new(P()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,et.pino)((0,et.getDefaultLoggerOptions)({level:i?.logger||iN})),this.disableProviderPing=i?.disableProviderPing||!1}static async init(i){let r=new index_es_lr(i);return await r.initialize(),r}async request(i,r){let[c,l]=this.validateChain(r);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(c).request({request:index_es_hr({},i),chainId:`${c}:${l}`,topic:this.session.topic})}sendAsync(i,r,c){let l=new Date().getTime();this.request(i,c).then(i=>r(null,(0,eS.formatJsonRpcResult)(l,i))).catch(i=>r(i,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(i=this.session)?void 0:i.topic,reason:(0,C.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}removeListener(i,r){this.events.removeListener(i,r)}off(i,r){this.events.off(i,r)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:c,approval:l}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});c&&(this.uri=c,this.events.emit("display_uri",c)),await l().then(i=>{this.session=i,this.namespaces||(this.namespaces=Vg(i.namespaces),this.persist("namespaces",this.namespaces))}).catch(i=>{if(i.message!==im)throw i;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,r){try{if(!this.session)return;let[c,l]=this.validateChain(i);this.getProvider(c).setDefaultChain(l,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");let r=this.client.pairing.getAll();if((0,C.qt)(r)){for(let c of r)i.deletePairings?this.client.core.expirer.set(c.topic,0):await this.client.core.relayer.subscriber.unsubscribe(c.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_Q.init({logger:this.providerOpts.logger||iN,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let i=[...new Set(Object.keys(this.session.namespaces).map(i=>(0,C.M)(i)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),i.forEach(i=>{if(!this.session)return;let r=Jg(i,this.session),c=Sa(r),l=Xg(this.namespaces,this.optionalNamespaces),S=Mi(index_es_hr({},l[i]),{accounts:r,chains:c});switch(i){case"eip155":this.rpcProviders[i]=new jg({namespace:S});break;case"solana":this.rpcProviders[i]=new nv({namespace:S});break;case"cosmos":this.rpcProviders[i]=new tv({namespace:S});break;case"polkadot":this.rpcProviders[i]=new kg({namespace:S});break;case"cip34":this.rpcProviders[i]=new ev({namespace:S});break;case"elrond":this.rpcProviders[i]=new rv({namespace:S});break;case"multiversx":this.rpcProviders[i]=new iv({namespace:S});break;case"near":this.rpcProviders[i]=new sv({namespace:S})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{let{params:r}=i,{event:c}=r;if("accountsChanged"===c.name){let i=c.data;i&&(0,C.qt)(i)&&this.events.emit("accountsChanged",i.map(Qg))}else if("chainChanged"===c.name){let i=r.chainId,c=r.event.data,l=(0,C.M)(i),S=index_es_Wi(i)!==index_es_Wi(c)?`${l}:${index_es_Wi(c)}`:i;this.onChainChanged(S)}else this.events.emit(c.name,c.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:r})=>{var c;let{namespaces:l}=r,S=null==(c=this.client)?void 0:c.session.get(i);this.session=Mi(index_es_hr({},S),{namespaces:l}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:r})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",Mi(index_es_hr({},(0,C.D6)("USER_DISCONNECTED")),{data:i.topic}))}),this.on(ij.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var r;this.getProvider(i).updateNamespace(null==(r=this.session)?void 0:r.namespaces[i])})}setNamespaces(i){let{namespaces:r,optionalNamespaces:c,sessionProperties:l}=i;r&&Object.keys(r).length&&(this.namespaces=r),c&&Object.keys(c).length&&(this.optionalNamespaces=c),this.sessionProperties=l,this.persist("namespaces",r),this.persist("optionalNamespaces",c)}validateChain(i){let[r,c]=i?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,c];if(r&&!Object.keys(this.namespaces||{}).map(i=>(0,C.M)(i)).includes(r))throw Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&c)return[r,c];let l=(0,C.M)(Object.keys(this.namespaces)[0]),S=this.rpcProviders[l].getDefaultChain();return[l,S]}async requestAccounts(){let[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,r=!1){var c;if(!this.namespaces)return;let[l,S]=this.validateChain(i);r||this.getProvider(l).setDefaultChain(S),(null!=(c=this.namespaces[l])?c:this.namespaces[`${l}:${S}`]).defaultChain=S,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",S)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,r){this.client.core.storage.setItem(`${iL}/${i}`,r)}async getFromStore(i){return await this.client.core.storage.getItem(`${iL}/${i}`)}};let iF=["eth_sendTransaction","personal_sign"],iJ=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],iY=["chainChanged","accountsChanged"],iQ=["chainChanged","accountsChanged","message","disconnect","connect"];var iX=Object.defineProperty,i0=Object.defineProperties,i1=Object.getOwnPropertyDescriptors,i5=Object.getOwnPropertySymbols,i6=Object.prototype.hasOwnProperty,i2=Object.prototype.propertyIsEnumerable,dist_index_es_O=(i,r,c)=>r in i?iX(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_p=(i,r)=>{for(var c in r||(r={}))i6.call(r,c)&&dist_index_es_O(i,c,r[c]);if(i5)for(var c of i5(r))i2.call(r,c)&&dist_index_es_O(i,c,r[c]);return i},index_es_M=(i,r)=>i0(i,i1(r));function ethereum_provider_dist_index_es_g(i){return Number(i[0].split(":")[1])}function index_es_f(i){return`0x${i.toString(16)}`}function L(i){let{chains:r,optionalChains:c,methods:l,optionalMethods:S,events:P,optionalEvents:R,rpcMap:A}=i;if(!(0,C.qt)(r))throw Error("Invalid chains");let q={chains:r,methods:l||iF,events:P||iY,rpcMap:index_es_p({},r.length?{[ethereum_provider_dist_index_es_g(r)]:A[ethereum_provider_dist_index_es_g(r)]}:{})},$=P?.filter(i=>!iY.includes(i)),U=l?.filter(i=>!iF.includes(i));if(!c&&!R&&!S&&!(null!=$&&$.length)&&!(null!=U&&U.length))return{required:r.length?q:void 0};let F=$?.length&&U?.length||!c,J={chains:[...new Set(F?q.chains.concat(c||[]):c)],methods:[...new Set(q.methods.concat(null!=S&&S.length?S:iJ))],events:[...new Set(q.events.concat(null!=R&&R.length?R:iQ))],rpcMap:A};return{required:r.length?q:void 0,optional:c.length?J:void 0}}let dist_index_es_v=class dist_index_es_v{constructor(){this.events=new S.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(i,r)=>(this.events.on(i,r),this),this.once=(i,r)=>(this.events.once(i,r),this),this.removeListener=(i,r)=>(this.events.removeListener(i,r),this),this.off=(i,r)=>(this.events.off(i,r),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){let r=new dist_index_es_v;return await r.initialize(i),r}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,r){this.signer.sendAsync(i,r,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);let{required:r,optional:c}=L(this.rpc);try{let l=await new Promise(async(l,S)=>{var P;this.rpc.showQrModal&&(null==(P=this.modal)||P.subscribeModal(i=>{i.open||this.signer.session||(this.signer.abortPairingAttempt(),S(Error("Connection request reset. Please try again.")))})),await this.signer.connect(index_es_M(index_es_p({namespaces:index_es_p({},r&&{[this.namespace]:r})},c&&{optionalNamespaces:{[this.namespace]:c}}),{pairingTopic:i?.pairingTopic})).then(i=>{l(i)}).catch(i=>{S(Error(i.message))})});if(!l)return;let S=(0,C.gu)(l.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:S),this.setAccounts(S),this.events.emit("connect",{chainId:index_es_f(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{let{params:r}=i,{event:c}=r;"accountsChanged"===c.name?(this.accounts=this.parseAccounts(c.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===c.name?this.setChainId(this.formatChainId(c.data)):this.events.emit(c.name,c.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{let r=parseInt(i);this.chainId=r,this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",index_es_M(index_es_p({},(0,C.D6)("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var r,c;this.rpc.showQrModal&&(null==(r=this.modal)||r.closeModal(),null==(c=this.modal)||c.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return"string"==typeof i&&i.startsWith(`${this.namespace}:`)}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){let r=i.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){let r=this.parseChainId(i);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(i){let[r,c,l]=i.split(":");return{chainId:`${r}:${c}`,address:l}}setAccounts(i){this.accounts=i.filter(i=>this.parseChainId(this.parseAccountId(i).chainId)===this.chainId).map(i=>this.parseAccountId(i).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var r,c;let l=null!=(r=i?.chains)?r:[],S=null!=(c=i?.optionalChains)?c:[],P=l.concat(S);if(!P.length)throw Error("No chains specified in either `chains` or `optionalChains`");let C=l.length?i?.methods||iF:[],R=l.length?i?.events||iY:[],A=i?.optionalMethods||[],q=i?.optionalEvents||[],$=i?.rpcMap||this.buildRpcMap(P,i.projectId),U=i?.qrModalOptions||void 0;return{chains:l?.map(i=>this.formatChainId(i)),optionalChains:S.map(i=>this.formatChainId(i)),methods:C,events:R,optionalMethods:A,optionalEvents:q,rpcMap:$,showQrModal:!!(null!=i&&i.showQrModal),qrModalOptions:U,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,r){let c={};return i.forEach(i=>{c[i]=this.getRpcUrl(i,r)}),c}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await index_es_lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let i;try{let{WalletConnectModal:r}=await c.e(254).then(c.bind(c,79254));i=r}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(i)try{this.modal=new i(index_es_p({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;let{chains:r,optionalChains:c,rpcMap:l}=i;r&&(0,C.qt)(r)&&(this.rpc.chains=r.map(i=>this.formatChainId(i)),r.forEach(i=>{this.rpc.rpcMap[i]=l?.[i]||this.getRpcUrl(i)})),c&&(0,C.qt)(c)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=c?.map(i=>this.formatChainId(i)),c.forEach(i=>{this.rpc.rpcMap[i]=l?.[i]||this.getRpcUrl(i)}))}getRpcUrl(i,r){var c;return(null==(c=this.rpc.rpcMap)?void 0:c[i])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${i}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return"string"==typeof i||i instanceof String?[this.parseAccount(i)]:i.map(i=>this.parseAccount(i))}};let i3=dist_index_es_v},13263:function(i,r,c){"use strict";c.d(r,{q:function(){return IEvents}});let IEvents=class IEvents{}},50062:function(i,r,c){"use strict";c.r(r),c.d(r,{IEvents:function(){return l.q}});var l=c(13263)},64596:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HEARTBEAT_EVENTS=r.HEARTBEAT_INTERVAL=void 0;let l=c(88316);r.HEARTBEAT_INTERVAL=l.FIVE_SECONDS,r.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},65886:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(96579);l.__exportStar(c(64596),r)},57187:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HeartBeat=void 0;let l=c(96579),S=c(68495),P=c(88316),C=c(22935),R=c(65886);let HeartBeat=class HeartBeat extends C.IHeartBeat{constructor(i){super(i),this.events=new S.EventEmitter,this.interval=R.HEARTBEAT_INTERVAL,this.interval=(null==i?void 0:i.interval)||R.HEARTBEAT_INTERVAL}static init(i){return l.__awaiter(this,void 0,void 0,function*(){let r=new HeartBeat(i);return yield r.init(),r})}init(){return l.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}initialize(){return l.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),P.toMiliseconds(this.interval))})}pulse(){this.events.emit(R.HEARTBEAT_EVENTS.pulse)}};r.HeartBeat=HeartBeat},60118:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(96579);l.__exportStar(c(57187),r),l.__exportStar(c(22935),r),l.__exportStar(c(65886),r)},59998:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IHeartBeat=void 0;let l=c(50062);let IHeartBeat=class IHeartBeat extends l.IEvents{constructor(i){super()}};r.IHeartBeat=IHeartBeat},22935:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(96579);l.__exportStar(c(59998),r)},99369:function(i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PINO_CUSTOM_CONTEXT_KEY=r.PINO_LOGGER_DEFAULTS=void 0,r.PINO_LOGGER_DEFAULTS={level:"info"},r.PINO_CUSTOM_CONTEXT_KEY="custom_context"},11121:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;let l=c(96579),S=l.__importDefault(c(2412));Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return S.default}}),l.__exportStar(c(99369),r),l.__exportStar(c(54358),r)},54358:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateChildLogger=r.formatChildLoggerContext=r.getLoggerContext=r.setBrowserLoggerContext=r.getBrowserLoggerContext=r.getDefaultLoggerOptions=void 0;let l=c(99369);function getDefaultLoggerOptions(i){return Object.assign(Object.assign({},i),{level:(null==i?void 0:i.level)||l.PINO_LOGGER_DEFAULTS.level})}function getBrowserLoggerContext(i,r=l.PINO_CUSTOM_CONTEXT_KEY){return i[r]||""}function setBrowserLoggerContext(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){return i[c]=r,i}function getLoggerContext(i,r=l.PINO_CUSTOM_CONTEXT_KEY){return void 0===i.bindings?getBrowserLoggerContext(i,r):i.bindings().context||""}function formatChildLoggerContext(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){let S=getLoggerContext(i,c),P=S.trim()?`${S}/${r}`:r;return P}function generateChildLogger(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){let S=formatChildLoggerContext(i,r,c),P=i.child({context:S});return setBrowserLoggerContext(P,S,c)}r.getDefaultLoggerOptions=getDefaultLoggerOptions,r.getBrowserLoggerContext=getBrowserLoggerContext,r.setBrowserLoggerContext=setBrowserLoggerContext,r.getLoggerContext=getLoggerContext,r.formatChildLoggerContext=formatChildLoggerContext,r.generateChildLogger=generateChildLogger},97947:function(){},36657:function(i,r,c){i=c.nmd(i);var l,S="__lodash_hash_undefined__",P="[object Arguments]",C="[object Array]",R="[object Boolean]",A="[object Date]",q="[object Error]",$="[object Function]",U="[object Map]",F="[object Number]",J="[object Object]",Q="[object Promise]",X="[object RegExp]",ee="[object Set]",et="[object String]",eo="[object WeakMap]",ep="[object ArrayBuffer]",eg="[object DataView]",ey=/^\[object .+?Constructor\]$/,em=/^(?:0|[1-9]\d*)$/,e_={};e_["[object Float32Array]"]=e_["[object Float64Array]"]=e_["[object Int8Array]"]=e_["[object Int16Array]"]=e_["[object Int32Array]"]=e_["[object Uint8Array]"]=e_["[object Uint8ClampedArray]"]=e_["[object Uint16Array]"]=e_["[object Uint32Array]"]=!0,e_[P]=e_[C]=e_[ep]=e_[R]=e_[eg]=e_[A]=e_[q]=e_[$]=e_[U]=e_[F]=e_[J]=e_[X]=e_[ee]=e_[et]=e_[eo]=!1;var ew="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,eb="object"==typeof self&&self&&self.Object===Object&&self,eI=ew||eb||Function("return this")(),eE=r&&!r.nodeType&&r,ex=eE&&i&&!i.nodeType&&i,eS=ex&&ex.exports===eE,eP=eS&&ew.process,eC=function(){try{return eP&&eP.binding&&eP.binding("util")}catch(i){}}(),eO=eC&&eC.isTypedArray;function arrayFilter(i,r){for(var c=-1,l=null==i?0:i.length,S=0,P=[];++c<l;){var C=i[c];r(C,c,i)&&(P[S++]=C)}return P}function arrayPush(i,r){for(var c=-1,l=r.length,S=i.length;++c<l;)i[S+c]=r[c];return i}function arraySome(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(r(i[c],c,i))return!0;return!1}function baseTimes(i,r){for(var c=-1,l=Array(i);++c<i;)l[c]=r(c);return l}function baseUnary(i){return function(r){return i(r)}}function cacheHas(i,r){return i.has(r)}function getValue(i,r){return null==i?void 0:i[r]}function mapToArray(i){var r=-1,c=Array(i.size);return i.forEach(function(i,l){c[++r]=[l,i]}),c}function overArg(i,r){return function(c){return i(r(c))}}function setToArray(i){var r=-1,c=Array(i.size);return i.forEach(function(i){c[++r]=i}),c}var eR=Array.prototype,eA=Function.prototype,eN=Object.prototype,eL=eI["__core-js_shared__"],ej=eA.toString,eT=eN.hasOwnProperty,ez=(l=/[^.]+$/.exec(eL&&eL.keys&&eL.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",eD=eN.toString,ek=RegExp("^"+ej.call(eT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eM=eS?eI.Buffer:void 0,eH=eI.Symbol,e$=eI.Uint8Array,eU=eN.propertyIsEnumerable,eK=eR.splice,eV=eH?eH.toStringTag:void 0,eB=Object.getOwnPropertySymbols,eG=eM?eM.isBuffer:void 0,eW=overArg(Object.keys,Object),eZ=getNative(eI,"DataView"),eF=getNative(eI,"Map"),eJ=getNative(eI,"Promise"),eY=getNative(eI,"Set"),eQ=getNative(eI,"WeakMap"),eX=getNative(Object,"create"),e0=toSource(eZ),e1=toSource(eF),e5=toSource(eJ),e6=toSource(eY),e2=toSource(eQ),e3=eH?eH.prototype:void 0,e9=e3?e3.valueOf:void 0;function Hash(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function hashClear(){this.__data__=eX?eX(null):{},this.size=0}function hashDelete(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r}function hashGet(i){var r=this.__data__;if(eX){var c=r[i];return c===S?void 0:c}return eT.call(r,i)?r[i]:void 0}function hashHas(i){var r=this.__data__;return eX?void 0!==r[i]:eT.call(r,i)}function hashSet(i,r){var c=this.__data__;return this.size+=this.has(i)?0:1,c[i]=eX&&void 0===r?S:r,this}function ListCache(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(i){var r=this.__data__,c=assocIndexOf(r,i);return!(c<0)&&(c==r.length-1?r.pop():eK.call(r,c,1),--this.size,!0)}function listCacheGet(i){var r=this.__data__,c=assocIndexOf(r,i);return c<0?void 0:r[c][1]}function listCacheHas(i){return assocIndexOf(this.__data__,i)>-1}function listCacheSet(i,r){var c=this.__data__,l=assocIndexOf(c,i);return l<0?(++this.size,c.push([i,r])):c[l][1]=r,this}function MapCache(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(eF||ListCache),string:new Hash}}function mapCacheDelete(i){var r=getMapData(this,i).delete(i);return this.size-=r?1:0,r}function mapCacheGet(i){return getMapData(this,i).get(i)}function mapCacheHas(i){return getMapData(this,i).has(i)}function mapCacheSet(i,r){var c=getMapData(this,i),l=c.size;return c.set(i,r),this.size+=c.size==l?0:1,this}function SetCache(i){var r=-1,c=null==i?0:i.length;for(this.__data__=new MapCache;++r<c;)this.add(i[r])}function setCacheAdd(i){return this.__data__.set(i,S),this}function setCacheHas(i){return this.__data__.has(i)}function Stack(i){var r=this.__data__=new ListCache(i);this.size=r.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(i){var r=this.__data__,c=r.delete(i);return this.size=r.size,c}function stackGet(i){return this.__data__.get(i)}function stackHas(i){return this.__data__.has(i)}function stackSet(i,r){var c=this.__data__;if(c instanceof ListCache){var l=c.__data__;if(!eF||l.length<199)return l.push([i,r]),this.size=++c.size,this;c=this.__data__=new MapCache(l)}return c.set(i,r),this.size=c.size,this}function arrayLikeKeys(i,r){var c=tn(i),l=!c&&e7(i),S=!c&&!l&&ta(i),P=!c&&!l&&!S&&to(i),C=c||l||S||P,R=C?baseTimes(i.length,String):[],A=R.length;for(var q in i)(r||eT.call(i,q))&&!(C&&("length"==q||S&&("offset"==q||"parent"==q)||P&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||isIndex(q,A)))&&R.push(q);return R}function assocIndexOf(i,r){for(var c=i.length;c--;)if(eq(i[c][0],r))return c;return -1}function baseGetAllKeys(i,r,c){var l=r(i);return tn(i)?l:arrayPush(l,c(i))}function baseGetTag(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":eV&&eV in Object(i)?getRawTag(i):objectToString(i)}function baseIsArguments(i){return isObjectLike(i)&&baseGetTag(i)==P}function baseIsEqual(i,r,c,l,S){return i===r||(null!=i&&null!=r&&(isObjectLike(i)||isObjectLike(r))?baseIsEqualDeep(i,r,c,l,baseIsEqual,S):i!=i&&r!=r)}function baseIsEqualDeep(i,r,c,l,S,R){var A=tn(i),q=tn(r),$=A?C:e4(i),U=q?C:e4(r);$=$==P?J:$,U=U==P?J:U;var F=$==J,Q=U==J,X=$==U;if(X&&ta(i)){if(!ta(r))return!1;A=!0,F=!1}if(X&&!F)return R||(R=new Stack),A||to(i)?equalArrays(i,r,c,l,S,R):equalByTag(i,r,$,c,l,S,R);if(!(1&c)){var ee=F&&eT.call(i,"__wrapped__"),et=Q&&eT.call(r,"__wrapped__");if(ee||et){var eo=ee?i.value():i,ep=et?r.value():r;return R||(R=new Stack),S(eo,ep,c,l,R)}}return!!X&&(R||(R=new Stack),equalObjects(i,r,c,l,S,R))}function baseIsNative(i){return!(!isObject(i)||isMasked(i))&&(isFunction(i)?ek:ey).test(toSource(i))}function baseIsTypedArray(i){return isObjectLike(i)&&isLength(i.length)&&!!e_[baseGetTag(i)]}function baseKeys(i){if(!isPrototype(i))return eW(i);var r=[];for(var c in Object(i))eT.call(i,c)&&"constructor"!=c&&r.push(c);return r}function equalArrays(i,r,c,l,S,P){var C=1&c,R=i.length,A=r.length;if(R!=A&&!(C&&A>R))return!1;var q=P.get(i);if(q&&P.get(r))return q==r;var $=-1,U=!0,F=2&c?new SetCache:void 0;for(P.set(i,r),P.set(r,i);++$<R;){var J=i[$],Q=r[$];if(l)var X=C?l(Q,J,$,r,i,P):l(J,Q,$,i,r,P);if(void 0!==X){if(X)continue;U=!1;break}if(F){if(!arraySome(r,function(i,r){if(!cacheHas(F,r)&&(J===i||S(J,i,c,l,P)))return F.push(r)})){U=!1;break}}else if(!(J===Q||S(J,Q,c,l,P))){U=!1;break}}return P.delete(i),P.delete(r),U}function equalByTag(i,r,c,l,S,P,C){switch(c){case eg:if(i.byteLength!=r.byteLength||i.byteOffset!=r.byteOffset)break;i=i.buffer,r=r.buffer;case ep:if(i.byteLength!=r.byteLength||!P(new e$(i),new e$(r)))break;return!0;case R:case A:case F:return eq(+i,+r);case q:return i.name==r.name&&i.message==r.message;case X:case et:return i==r+"";case U:var $=mapToArray;case ee:var J=1&l;if($||($=setToArray),i.size!=r.size&&!J)break;var Q=C.get(i);if(Q)return Q==r;l|=2,C.set(i,r);var eo=equalArrays($(i),$(r),l,S,P,C);return C.delete(i),eo;case"[object Symbol]":if(e9)return e9.call(i)==e9.call(r)}return!1}function equalObjects(i,r,c,l,S,P){var C=1&c,R=baseGetAllKeys(i,keys,e8),A=R.length;if(A!=baseGetAllKeys(r,keys,e8).length&&!C)return!1;for(var q=A;q--;){var $=R[q];if(!(C?$ in r:eT.call(r,$)))return!1}var U=P.get(i);if(U&&P.get(r))return U==r;var F=!0;P.set(i,r),P.set(r,i);for(var J=C;++q<A;){var Q=i[$=R[q]],X=r[$];if(l)var ee=C?l(X,Q,$,r,i,P):l(Q,X,$,i,r,P);if(!(void 0===ee?Q===X||S(Q,X,c,l,P):ee)){F=!1;break}J||(J="constructor"==$)}if(F&&!J){var et=i.constructor,eo=r.constructor;et!=eo&&"constructor"in i&&"constructor"in r&&!("function"==typeof et&&et instanceof et&&"function"==typeof eo&&eo instanceof eo)&&(F=!1)}return P.delete(i),P.delete(r),F}function getMapData(i,r){var c=i.__data__;return isKeyable(r)?c["string"==typeof r?"string":"hash"]:c.map}function getNative(i,r){var c=getValue(i,r);return baseIsNative(c)?c:void 0}function getRawTag(i){var r=eT.call(i,eV),c=i[eV];try{i[eV]=void 0;var l=!0}catch(i){}var S=eD.call(i);return l&&(r?i[eV]=c:delete i[eV]),S}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var e8=eB?function(i){return null==i?[]:arrayFilter(eB(i=Object(i)),function(r){return eU.call(i,r)})}:stubArray,e4=baseGetTag;function isIndex(i,r){return!!(r=null==r?9007199254740991:r)&&("number"==typeof i||em.test(i))&&i>-1&&i%1==0&&i<r}function isKeyable(i){var r=typeof i;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i}function isMasked(i){return!!ez&&ez in i}function isPrototype(i){var r=i&&i.constructor;return i===("function"==typeof r&&r.prototype||eN)}function objectToString(i){return eD.call(i)}function toSource(i){if(null!=i){try{return ej.call(i)}catch(i){}try{return i+""}catch(i){}}return""}function eq(i,r){return i===r||i!=i&&r!=r}(eZ&&e4(new eZ(new ArrayBuffer(1)))!=eg||eF&&e4(new eF)!=U||eJ&&e4(eJ.resolve())!=Q||eY&&e4(new eY)!=ee||eQ&&e4(new eQ)!=eo)&&(e4=function(i){var r=baseGetTag(i),c=r==J?i.constructor:void 0,l=c?toSource(c):"";if(l)switch(l){case e0:return eg;case e1:return U;case e5:return Q;case e6:return ee;case e2:return eo}return r});var e7=baseIsArguments(function(){return arguments}())?baseIsArguments:function(i){return isObjectLike(i)&&eT.call(i,"callee")&&!eU.call(i,"callee")},tn=Array.isArray;function isArrayLike(i){return null!=i&&isLength(i.length)&&!isFunction(i)}var ta=eG||stubFalse;function isEqual(i,r){return baseIsEqual(i,r)}function isFunction(i){if(!isObject(i))return!1;var r=baseGetTag(i);return r==$||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function isLength(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function isObject(i){var r=typeof i;return null!=i&&("object"==r||"function"==r)}function isObjectLike(i){return null!=i&&"object"==typeof i}var to=eO?baseUnary(eO):baseIsTypedArray;function keys(i){return isArrayLike(i)?arrayLikeKeys(i):baseKeys(i)}function stubArray(){return[]}function stubFalse(){return!1}i.exports=isEqual},18805:function(i){"use strict";let r=self.fetch.bind(self);i.exports=r,i.exports.default=i.exports},3280:function(i){"use strict";function tryStringify(i){try{return JSON.stringify(i)}catch(i){return'"[Circular]"'}}function format(i,r,c){var l=c&&c.stringify||tryStringify;if("object"==typeof i&&null!==i){var S=r.length+1;if(1===S)return i;var P=Array(S);P[0]=l(i);for(var C=1;C<S;C++)P[C]=l(r[C]);return P.join(" ")}if("string"!=typeof i)return i;var R=r.length;if(0===R)return i;for(var A="",q=0,$=-1,U=i&&i.length||0,F=0;F<U;){if(37===i.charCodeAt(F)&&F+1<U){switch($=$>-1?$:0,i.charCodeAt(F+1)){case 100:case 102:if(q>=R||null==r[q])break;$<F&&(A+=i.slice($,F)),A+=Number(r[q]),$=F+2,F++;break;case 105:if(q>=R||null==r[q])break;$<F&&(A+=i.slice($,F)),A+=Math.floor(Number(r[q])),$=F+2,F++;break;case 79:case 111:case 106:if(q>=R||void 0===r[q])break;$<F&&(A+=i.slice($,F));var J=typeof r[q];if("string"===J){A+="'"+r[q]+"'",$=F+2,F++;break}if("function"===J){A+=r[q].name||"<anonymous>",$=F+2,F++;break}A+=l(r[q]),$=F+2,F++;break;case 115:if(q>=R)break;$<F&&(A+=i.slice($,F)),A+=String(r[q]),$=F+2,F++;break;case 37:$<F&&(A+=i.slice($,F)),A+="%",$=F+2,F++,q--}++q}++F}return -1===$?i:($<U&&(A+=i.slice($)),A)}i.exports=format},13361:function(i){"use strict";i.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},2412:function(i,r,c){"use strict";let l=c(3280);i.exports=pino;let S=pfGlobalThisOrFallback().console||{};function shouldSerialize(i,r){if(Array.isArray(i)){let r=i.filter(function(i){return"!stdSerializers.err"!==i});return r}return!0===i&&Object.keys(r)}function pino(i){(i=i||{}).browser=i.browser||{};let r=i.browser.transmit;if(r&&"function"!=typeof r.send)throw Error("pino: transmit option must have a send function");let c=i.browser.write||S;i.browser.write&&(i.browser.asObject=!0);let l=i.serializers||{},P=shouldSerialize(i.browser.serialize,l),C=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1),"function"==typeof c&&(c.error=c.fatal=c.warn=c.info=c.debug=c.trace=c),!1===i.enabled&&(i.level="silent");let R=i.level||"info",A=Object.create(c);A.log||(A.log=noop),Object.defineProperty(A,"levelVal",{get:getLevelVal}),Object.defineProperty(A,"level",{get:getLevel,set:setLevel});let q={transmit:r,serialize:P,asObject:i.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:getTimeFunction(i)};function getLevelVal(){return"silent"===this.level?1/0:this.levels.values[this.level]}function getLevel(){return this._level}function setLevel(i){if("silent"!==i&&!this.levels.values[i])throw Error("unknown level "+i);this._level=i,set(q,A,"error","log"),set(q,A,"fatal","error"),set(q,A,"warn","error"),set(q,A,"info","log"),set(q,A,"debug","log"),set(q,A,"trace","log")}function child(c,S){if(!c)throw Error("missing bindings for child Pino");S=S||{},P&&c.serializers&&(S.serializers=c.serializers);let C=S.serializers;if(P&&C){var R=Object.assign({},l,C),A=!0===i.browser.serialize?Object.keys(R):P;delete c.serializers,applySerializers([c],A,R,this._stdErrSerialize)}function Child(i){this._childLevel=(0|i._childLevel)+1,this.error=bind(i,c,"error"),this.fatal=bind(i,c,"fatal"),this.warn=bind(i,c,"warn"),this.info=bind(i,c,"info"),this.debug=bind(i,c,"debug"),this.trace=bind(i,c,"trace"),R&&(this.serializers=R,this._serialize=A),r&&(this._logEvent=createLogEventShape([].concat(i._logEvent.bindings,c)))}return Child.prototype=this,new Child(this)}return A.levels=pino.levels,A.level=R,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=noop,A.serializers=l,A._serialize=P,A._stdErrSerialize=C,A.child=child,r&&(A._logEvent=createLogEventShape()),A}function set(i,r,c,l){let P=Object.getPrototypeOf(r);r[c]=r.levelVal>r.levels.values[c]?noop:P[c]?P[c]:S[c]||S[l]||noop,wrap(i,r,c)}function wrap(i,r,c){if(i.transmit||r[c]!==noop){var l;r[c]=(l=r[c],function(){let P=i.timestamp(),C=Array(arguments.length),R=Object.getPrototypeOf&&Object.getPrototypeOf(this)===S?S:this;for(var A=0;A<C.length;A++)C[A]=arguments[A];if(i.serialize&&!i.asObject&&applySerializers(C,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?l.call(R,asObject(this,c,C,P)):l.apply(R,C),i.transmit){let l=i.transmit.level||r.level,S=pino.levels.values[l],R=pino.levels.values[c];if(R<S)return;transmit(this,{ts:P,methodLevel:c,methodValue:R,transmitLevel:l,transmitValue:pino.levels.values[i.transmit.level||r.level],send:i.transmit.send,val:r.levelVal},C)}})}}function asObject(i,r,c,S){i._serialize&&applySerializers(c,i._serialize,i.serializers,i._stdErrSerialize);let P=c.slice(),C=P[0],R={};S&&(R.time=S),R.level=pino.levels.values[r];let A=(0|i._childLevel)+1;if(A<1&&(A=1),null!==C&&"object"==typeof C){for(;A--&&"object"==typeof P[0];)Object.assign(R,P.shift());C=P.length?l(P.shift(),P):void 0}else"string"==typeof C&&(C=l(P.shift(),P));return void 0!==C&&(R.msg=C),R}function applySerializers(i,r,c,l){for(let S in i)if(l&&i[S]instanceof Error)i[S]=pino.stdSerializers.err(i[S]);else if("object"==typeof i[S]&&!Array.isArray(i[S]))for(let l in i[S])r&&r.indexOf(l)>-1&&l in c&&(i[S][l]=c[l](i[S][l]))}function bind(i,r,c){return function(){let l=Array(1+arguments.length);l[0]=r;for(var S=1;S<l.length;S++)l[S]=arguments[S-1];return i[c].apply(this,l)}}function transmit(i,r,c){let l=r.send,S=r.ts,P=r.methodLevel,C=r.methodValue,R=r.val,A=i._logEvent.bindings;applySerializers(c,i._serialize||Object.keys(i.serializers),i.serializers,void 0===i._stdErrSerialize||i._stdErrSerialize),i._logEvent.ts=S,i._logEvent.messages=c.filter(function(i){return -1===A.indexOf(i)}),i._logEvent.level.label=P,i._logEvent.level.value=C,l(P,i._logEvent,R),i._logEvent=createLogEventShape(A)}function createLogEventShape(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function asErrValue(i){let r={type:i.constructor.name,msg:i.message,stack:i.stack};for(let c in i)void 0===r[c]&&(r[c]=i[c]);return r}function getTimeFunction(i){return"function"==typeof i.timestamp?i.timestamp:!1===i.timestamp?nullTime:epochTime}function mock(){return{}}function passthrough(i){return i}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}function unixTime(){return Math.round(Date.now()/1e3)}function isoTime(){return new Date(Date.now()).toISOString()}function pfGlobalThisOrFallback(){function defd(i){return void 0!==i&&i}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(i){return defd(self)||defd(window)||defd(this)||{}}}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:asErrValue},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime,isoTime})}}]);